var $g=Object.create;var gi=Object.defineProperty;var Dg=Object.getOwnPropertyDescriptor;var Lg=Object.getOwnPropertyNames;var jg=Object.getPrototypeOf,qg=Object.prototype.hasOwnProperty;var _=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Fg=(t,e)=>{for(var r in e)gi(t,r,{get:e[r],enumerable:!0})},gu=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of Lg(e))!qg.call(t,i)&&i!==r&&gi(t,i,{get:()=>e[i],enumerable:!(n=Dg(e,i))||n.enumerable});return t};var Ke=(t,e,r)=>(r=t!=null?$g(jg(t)):{},gu(e||!t||!t.__esModule?gi(r,"default",{value:t,enumerable:!0}):r,t)),Ug=t=>gu(gi({},"__esModule",{value:!0}),t);var De=_((L1,Iu)=>{"use strict";var $o=class t extends Error{constructor(e){super(`Format functions must be synchronous taking a two arguments: (info, opts)
Found: ${e.toString().split(`
`)[0]}
`),Error.captureStackTrace(this,t)}};Iu.exports=t=>{if(t.length>2)throw new $o(t);function e(n={}){this.options=n}e.prototype.transform=t;function r(n){return new e(n)}return r.Format=e,r}});var Lu=_((j1,Du)=>{var $u={};Du.exports=$u;var Nu={reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29],black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],gray:[90,39],grey:[90,39],brightRed:[91,39],brightGreen:[92,39],brightYellow:[93,39],brightBlue:[94,39],brightMagenta:[95,39],brightCyan:[96,39],brightWhite:[97,39],bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgGray:[100,49],bgGrey:[100,49],bgBrightRed:[101,49],bgBrightGreen:[102,49],bgBrightYellow:[103,49],bgBrightBlue:[104,49],bgBrightMagenta:[105,49],bgBrightCyan:[106,49],bgBrightWhite:[107,49],blackBG:[40,49],redBG:[41,49],greenBG:[42,49],yellowBG:[43,49],blueBG:[44,49],magentaBG:[45,49],cyanBG:[46,49],whiteBG:[47,49]};Object.keys(Nu).forEach(function(t){var e=Nu[t],r=$u[t]=[];r.open="\x1B["+e[0]+"m",r.close="\x1B["+e[1]+"m"})});var qu=_((q1,ju)=>{"use strict";ju.exports=function(t,e){e=e||process.argv;var r=e.indexOf("--"),n=/^-{1,2}/.test(t)?"":"--",i=e.indexOf(n+t);return i!==-1&&(r===-1?!0:i<r)}});var Uu=_((F1,Fu)=>{"use strict";var ry=require("os"),Je=qu(),Ae=process.env,vr=void 0;Je("no-color")||Je("no-colors")||Je("color=false")?vr=!1:(Je("color")||Je("colors")||Je("color=true")||Je("color=always"))&&(vr=!0);"FORCE_COLOR"in Ae&&(vr=Ae.FORCE_COLOR.length===0||parseInt(Ae.FORCE_COLOR,10)!==0);function ny(t){return t===0?!1:{level:t,hasBasic:!0,has256:t>=2,has16m:t>=3}}function iy(t){if(vr===!1)return 0;if(Je("color=16m")||Je("color=full")||Je("color=truecolor"))return 3;if(Je("color=256"))return 2;if(t&&!t.isTTY&&vr!==!0)return 0;var e=vr?1:0;if(process.platform==="win32"){var r=ry.release().split(".");return Number(process.versions.node.split(".")[0])>=8&&Number(r[0])>=10&&Number(r[2])>=10586?Number(r[2])>=14931?3:2:1}if("CI"in Ae)return["TRAVIS","CIRCLECI","APPVEYOR","GITLAB_CI"].some(function(i){return i in Ae})||Ae.CI_NAME==="codeship"?1:e;if("TEAMCITY_VERSION"in Ae)return/^(9\.(0*[1-9]\d*)\.|\d{2,}\.)/.test(Ae.TEAMCITY_VERSION)?1:0;if("TERM_PROGRAM"in Ae){var n=parseInt((Ae.TERM_PROGRAM_VERSION||"").split(".")[0],10);switch(Ae.TERM_PROGRAM){case"iTerm.app":return n>=3?3:2;case"Hyper":return 3;case"Apple_Terminal":return 2}}return/-256(color)?$/i.test(Ae.TERM)?2:/^screen|^xterm|^vt100|^rxvt|color|ansi|cygwin|linux/i.test(Ae.TERM)||"COLORTERM"in Ae?1:(Ae.TERM==="dumb",e)}function Do(t){var e=iy(t);return ny(e)}Fu.exports={supportsColor:Do,stdout:Do(process.stdout),stderr:Do(process.stderr)}});var Bu=_((U1,zu)=>{zu.exports=function(e,r){var n="";e=e||"Run the trap, drop the bass",e=e.split("");var i={a:["@","\u0104","\u023A","\u0245","\u0394","\u039B","\u0414"],b:["\xDF","\u0181","\u0243","\u026E","\u03B2","\u0E3F"],c:["\xA9","\u023B","\u03FE"],d:["\xD0","\u018A","\u0500","\u0501","\u0502","\u0503"],e:["\xCB","\u0115","\u018E","\u0258","\u03A3","\u03BE","\u04BC","\u0A6C"],f:["\u04FA"],g:["\u0262"],h:["\u0126","\u0195","\u04A2","\u04BA","\u04C7","\u050A"],i:["\u0F0F"],j:["\u0134"],k:["\u0138","\u04A0","\u04C3","\u051E"],l:["\u0139"],m:["\u028D","\u04CD","\u04CE","\u0520","\u0521","\u0D69"],n:["\xD1","\u014B","\u019D","\u0376","\u03A0","\u048A"],o:["\xD8","\xF5","\xF8","\u01FE","\u0298","\u047A","\u05DD","\u06DD","\u0E4F"],p:["\u01F7","\u048E"],q:["\u09CD"],r:["\xAE","\u01A6","\u0210","\u024C","\u0280","\u042F"],s:["\xA7","\u03DE","\u03DF","\u03E8"],t:["\u0141","\u0166","\u0373"],u:["\u01B1","\u054D"],v:["\u05D8"],w:["\u0428","\u0460","\u047C","\u0D70"],x:["\u04B2","\u04FE","\u04FC","\u04FD"],y:["\xA5","\u04B0","\u04CB"],z:["\u01B5","\u0240"]};return e.forEach(function(s){s=s.toLowerCase();var o=i[s]||[" "],a=Math.floor(Math.random()*o.length);typeof i[s]<"u"?n+=i[s][a]:n+=s}),n}});var Yu=_((z1,Wu)=>{Wu.exports=function(e,r){e=e||"   he is here   ";var n={up:["\u030D","\u030E","\u0304","\u0305","\u033F","\u0311","\u0306","\u0310","\u0352","\u0357","\u0351","\u0307","\u0308","\u030A","\u0342","\u0313","\u0308","\u034A","\u034B","\u034C","\u0303","\u0302","\u030C","\u0350","\u0300","\u0301","\u030B","\u030F","\u0312","\u0313","\u0314","\u033D","\u0309","\u0363","\u0364","\u0365","\u0366","\u0367","\u0368","\u0369","\u036A","\u036B","\u036C","\u036D","\u036E","\u036F","\u033E","\u035B","\u0346","\u031A"],down:["\u0316","\u0317","\u0318","\u0319","\u031C","\u031D","\u031E","\u031F","\u0320","\u0324","\u0325","\u0326","\u0329","\u032A","\u032B","\u032C","\u032D","\u032E","\u032F","\u0330","\u0331","\u0332","\u0333","\u0339","\u033A","\u033B","\u033C","\u0345","\u0347","\u0348","\u0349","\u034D","\u034E","\u0353","\u0354","\u0355","\u0356","\u0359","\u035A","\u0323"],mid:["\u0315","\u031B","\u0300","\u0301","\u0358","\u0321","\u0322","\u0327","\u0328","\u0334","\u0335","\u0336","\u035C","\u035D","\u035E","\u035F","\u0360","\u0362","\u0338","\u0337","\u0361"," \u0489"]},i=[].concat(n.up,n.down,n.mid);function s(l){var u=Math.floor(Math.random()*l);return u}function o(l){var u=!1;return i.filter(function(d){u=d===l}),u}function a(l,u){var d="",c,f;u=u||{},u.up=typeof u.up<"u"?u.up:!0,u.mid=typeof u.mid<"u"?u.mid:!0,u.down=typeof u.down<"u"?u.down:!0,u.size=typeof u.size<"u"?u.size:"maxi",l=l.split("");for(f in l)if(!o(f)){switch(d=d+l[f],c={up:0,down:0,mid:0},u.size){case"mini":c.up=s(8),c.mid=s(2),c.down=s(8);break;case"maxi":c.up=s(16)+3,c.mid=s(4)+1,c.down=s(64)+3;break;default:c.up=s(8)+1,c.mid=s(6)/2,c.down=s(8)+1;break}var h=["up","mid","down"];for(var p in h)for(var g=h[p],m=0;m<=c[g];m++)u[g]&&(d=d+n[g][s(n[g].length)])}return d}return a(e,r)}});var Vu=_((B1,Hu)=>{Hu.exports=function(t){return function(e,r,n){if(e===" ")return e;switch(r%3){case 0:return t.red(e);case 1:return t.white(e);case 2:return t.blue(e)}}}});var Ku=_((W1,Gu)=>{Gu.exports=function(t){return function(e,r,n){return r%2===0?e:t.inverse(e)}}});var Ju=_((Y1,Zu)=>{Zu.exports=function(t){var e=["red","yellow","green","blue","magenta"];return function(r,n,i){return r===" "?r:t[e[n++%e.length]](r)}}});var Qu=_((H1,Xu)=>{Xu.exports=function(t){var e=["underline","inverse","grey","yellow","red","green","blue","white","cyan","magenta","brightYellow","brightRed","brightGreen","brightBlue","brightWhite","brightCyan","brightMagenta"];return function(r,n,i){return r===" "?r:t[e[Math.round(Math.random()*(e.length-2))]](r)}}});var sc=_((G1,ic)=>{var V={};ic.exports=V;V.themes={};var sy=require("util"),Zt=V.styles=Lu(),tc=Object.defineProperties,oy=new RegExp(/[\r\n]+/g);V.supportsColor=Uu().supportsColor;typeof V.enabled>"u"&&(V.enabled=V.supportsColor()!==!1);V.enable=function(){V.enabled=!0};V.disable=function(){V.enabled=!1};V.stripColors=V.strip=function(t){return(""+t).replace(/\x1B\[\d+m/g,"")};var V1=V.stylize=function(e,r){if(!V.enabled)return e+"";var n=Zt[r];return!n&&r in V?V[r](e):n.open+e+n.close},ay=/[|\\{}()[\]^$+*?.]/g,ly=function(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(ay,"\\$&")};function rc(t){var e=function r(){return cy.apply(r,arguments)};return e._styles=t,e.__proto__=uy,e}var nc=function(){var t={};return Zt.grey=Zt.gray,Object.keys(Zt).forEach(function(e){Zt[e].closeRe=new RegExp(ly(Zt[e].close),"g"),t[e]={get:function(){return rc(this._styles.concat(e))}}}),t}(),uy=tc(function(){},nc);function cy(){var t=Array.prototype.slice.call(arguments),e=t.map(function(o){return o!=null&&o.constructor===String?o:sy.inspect(o)}).join(" ");if(!V.enabled||!e)return e;for(var r=e.indexOf(`
`)!=-1,n=this._styles,i=n.length;i--;){var s=Zt[n[i]];e=s.open+e.replace(s.closeRe,s.open)+s.close,r&&(e=e.replace(oy,function(o){return s.close+o+s.open}))}return e}V.setTheme=function(t){if(typeof t=="string"){console.log("colors.setTheme now only accepts an object, not a string.  If you are trying to set a theme from a file, it is now your (the caller's) responsibility to require the file.  The old syntax looked like colors.setTheme(__dirname + '/../themes/generic-logging.js'); The new syntax looks like colors.setTheme(require(__dirname + '/../themes/generic-logging.js'));");return}for(var e in t)(function(r){V[r]=function(n){if(typeof t[r]=="object"){var i=n;for(var s in t[r])i=V[t[r][s]](i);return i}return V[t[r]](n)}})(e)};function fy(){var t={};return Object.keys(nc).forEach(function(e){t[e]={get:function(){return rc([e])}}}),t}var dy=function(e,r){var n=r.split("");return n=n.map(e),n.join("")};V.trap=Bu();V.zalgo=Yu();V.maps={};V.maps.america=Vu()(V);V.maps.zebra=Ku()(V);V.maps.rainbow=Ju()(V);V.maps.random=Qu()(V);for(ec in V.maps)(function(t){V[t]=function(e){return dy(V.maps[t],e)}})(ec);var ec;tc(V,fy())});var Lo=_((K1,oc)=>{var hy=sc();oc.exports=hy});var ac=_(jo=>{"use strict";jo.levels={error:0,warn:1,help:2,data:3,info:4,debug:5,prompt:6,verbose:7,input:8,silly:9};jo.colors={error:"red",warn:"yellow",help:"cyan",data:"grey",info:"green",debug:"blue",prompt:"grey",verbose:"cyan",input:"grey",silly:"magenta"}});var lc=_(qo=>{"use strict";qo.levels={error:0,warn:1,info:2,http:3,verbose:4,debug:5,silly:6};qo.colors={error:"red",warn:"yellow",info:"green",http:"green",verbose:"cyan",debug:"blue",silly:"magenta"}});var uc=_(Fo=>{"use strict";Fo.levels={emerg:0,alert:1,crit:2,error:3,warning:4,notice:5,info:6,debug:7};Fo.colors={emerg:"red",alert:"yellow",crit:"red",error:"red",warning:"red",notice:"yellow",info:"green",debug:"blue"}});var cc=_(Ei=>{"use strict";Object.defineProperty(Ei,"cli",{value:ac()});Object.defineProperty(Ei,"npm",{value:lc()});Object.defineProperty(Ei,"syslog",{value:uc()})});var Te=_(on=>{"use strict";Object.defineProperty(on,"LEVEL",{value:Symbol.for("level")});Object.defineProperty(on,"MESSAGE",{value:Symbol.for("message")});Object.defineProperty(on,"SPLAT",{value:Symbol.for("splat")});Object.defineProperty(on,"configs",{value:cc()})});var Ri=_((tR,ki)=>{"use strict";var Bo=Lo(),{LEVEL:Uo,MESSAGE:zo}=Te();Bo.enabled=!0;var fc=/\s+/,xi=class t{constructor(e={}){e.colors&&this.addColors(e.colors),this.options=e}static addColors(e){let r=Object.keys(e).reduce((n,i)=>(n[i]=fc.test(e[i])?e[i].split(fc):e[i],n),{});return t.allColors=Object.assign({},t.allColors||{},r),t.allColors}addColors(e){return t.addColors(e)}colorize(e,r,n){if(typeof n>"u"&&(n=r),!Array.isArray(t.allColors[e]))return Bo[t.allColors[e]](n);for(let i=0,s=t.allColors[e].length;i<s;i++)n=Bo[t.allColors[e][i]](n);return n}transform(e,r){return r.all&&typeof e[zo]=="string"&&(e[zo]=this.colorize(e[Uo],e.level,e[zo])),(r.level||r.all||!r.message)&&(e.level=this.colorize(e[Uo],e.level)),(r.all||r.message)&&(e.message=this.colorize(e[Uo],e.level,e.message)),e}};ki.exports=t=>new xi(t);ki.exports.Colorizer=ki.exports.Format=xi});var hc=_((rR,dc)=>{"use strict";var{Colorizer:py}=Ri();dc.exports=t=>(py.addColors(t.colors||t),t)});var mc=_((nR,pc)=>{"use strict";var my=De();pc.exports=my(t=>(t.message=`	${t.message}`,t))});var bc=_((iR,yc)=>{"use strict";var gy=De(),{LEVEL:gc,MESSAGE:Wo}=Te();yc.exports=gy((t,{stack:e,cause:r})=>{if(t instanceof Error){let i=Object.assign({},t,{level:t.level,[gc]:t[gc]||t.level,message:t.message,[Wo]:t[Wo]||t.message});return e&&(i.stack=t.stack),r&&(i.cause=t.cause),i}if(!(t.message instanceof Error))return t;let n=t.message;return Object.assign(t,n),t.message=n.message,t[Wo]=n.message,e&&(t.stack=n.stack),r&&(t.cause=n.cause),t})});var Ho=_((sR,Mi)=>{"use strict";var{configs:yy,LEVEL:_c,MESSAGE:Yo}=Te(),Oi=class t{constructor(e={levels:yy.npm.levels}){this.paddings=t.paddingForLevels(e.levels,e.filler),this.options=e}static getLongestLevel(e){let r=Object.keys(e).map(n=>n.length);return Math.max(...r)}static paddingForLevel(e,r,n){let i=n+1-e.length,s=Math.floor(i/r.length);return`${r}${r.repeat(s)}`.slice(0,i)}static paddingForLevels(e,r=" "){let n=t.getLongestLevel(e);return Object.keys(e).reduce((i,s)=>(i[s]=t.paddingForLevel(s,r,n),i),{})}transform(e,r){return e.message=`${this.paddings[e[_c]]}${e.message}`,e[Yo]&&(e[Yo]=`${this.paddings[e[_c]]}${e[Yo]}`),e}};Mi.exports=t=>new Oi(t);Mi.exports.Padder=Mi.exports.Format=Oi});var wc=_((oR,Vo)=>{"use strict";var{Colorizer:by}=Ri(),{Padder:_y}=Ho(),{configs:wy,MESSAGE:vy}=Te(),Pi=class{constructor(e={}){e.levels||(e.levels=wy.cli.levels),this.colorizer=new by(e),this.padder=new _y(e),this.options=e}transform(e,r){return this.colorizer.transform(this.padder.transform(e,r),r),e[vy]=`${e.level}:${e.message}`,e}};Vo.exports=t=>new Pi(t);Vo.exports.Format=Pi});var Tc=_((aR,Go)=>{"use strict";var Ty=De();function vc(t){if(t.every(Sy))return e=>{let r=e;for(let n=0;n<t.length;n++)if(r=t[n].transform(r,t[n].options),!r)return!1;return r}}function Sy(t){if(typeof t.transform!="function")throw new Error(["No transform function found on format. Did you create a format instance?","const myFormat = format(formatFn);","const instance = myFormat();"].join(`
`));return!0}Go.exports=(...t)=>{let e=Ty(vc(t)),r=e();return r.Format=e.Format,r};Go.exports.cascade=vc});var an=_((Xo,kc)=>{"use strict";var{hasOwnProperty:Ci}=Object.prototype,Xt=Jo();Xt.configure=Jo;Xt.stringify=Xt;Xt.default=Xt;Xo.stringify=Xt;Xo.configure=Jo;kc.exports=Xt;var Ey=/[\u0000-\u001f\u0022\u005c\ud800-\udfff]|[\ud800-\udbff](?![\udc00-\udfff])|(?:[^\ud800-\udbff]|^)[\udc00-\udfff]/;function Mt(t){return t.length<5e3&&!Ey.test(t)?`"${t}"`:JSON.stringify(t)}function Ko(t){if(t.length>200)return t.sort();for(let e=1;e<t.length;e++){let r=t[e],n=e;for(;n!==0&&t[n-1]>r;)t[n]=t[n-1],n--;t[n]=r}return t}var xy=Object.getOwnPropertyDescriptor(Object.getPrototypeOf(Object.getPrototypeOf(new Int8Array)),Symbol.toStringTag).get;function Zo(t){return xy.call(t)!==void 0&&t.length!==0}function Sc(t,e,r){t.length<r&&(r=t.length);let n=e===","?"":" ",i=`"0":${n}${t[0]}`;for(let s=1;s<r;s++)i+=`${e}"${s}":${n}${t[s]}`;return i}function ky(t){if(Ci.call(t,"circularValue")){let e=t.circularValue;if(typeof e=="string")return`"${e}"`;if(e==null)return e;if(e===Error||e===TypeError)return{toString(){throw new TypeError("Converting circular structure to JSON")}};throw new TypeError('The "circularValue" argument must be of type string or the value null or undefined')}return'"[Circular]"'}function Ec(t,e){let r;if(Ci.call(t,e)&&(r=t[e],typeof r!="boolean"))throw new TypeError(`The "${e}" argument must be of type boolean`);return r===void 0?!0:r}function xc(t,e){let r;if(Ci.call(t,e)){if(r=t[e],typeof r!="number")throw new TypeError(`The "${e}" argument must be of type number`);if(!Number.isInteger(r))throw new TypeError(`The "${e}" argument must be an integer`);if(r<1)throw new RangeError(`The "${e}" argument must be >= 1`)}return r===void 0?1/0:r}function Jt(t){return t===1?"1 item":`${t} items`}function Ry(t){let e=new Set;for(let r of t)(typeof r=="string"||typeof r=="number")&&e.add(String(r));return e}function Oy(t){if(Ci.call(t,"strict")){let e=t.strict;if(typeof e!="boolean")throw new TypeError('The "strict" argument must be of type boolean');if(e)return r=>{let n=`Object can not safely be stringified. Received type ${typeof r}`;throw typeof r!="function"&&(n+=` (${r.toString()})`),new Error(n)}}}function Jo(t){t={...t};let e=Oy(t);e&&(t.bigint===void 0&&(t.bigint=!1),"circularValue"in t||(t.circularValue=Error));let r=ky(t),n=Ec(t,"bigint"),i=Ec(t,"deterministic"),s=xc(t,"maximumDepth"),o=xc(t,"maximumBreadth");function a(f,h,p,g,m,x){let k=h[f];switch(typeof k=="object"&&k!==null&&typeof k.toJSON=="function"&&(k=k.toJSON(f)),k=g.call(h,f,k),typeof k){case"string":return Mt(k);case"object":{if(k===null)return"null";if(p.indexOf(k)!==-1)return r;let T="",b=",",M=x;if(Array.isArray(k)){if(k.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(k),m!==""&&(x+=m,T+=`
${x}`,b=`,
${x}`);let A=Math.min(k.length,o),R=0;for(;R<A-1;R++){let E=a(String(R),k,p,g,m,x);T+=E!==void 0?E:"null",T+=b}let v=a(String(R),k,p,g,m,x);if(T+=v!==void 0?v:"null",k.length-1>o){let E=k.length-o-1;T+=`${b}"... ${Jt(E)} not stringified"`}return m!==""&&(T+=`
${M}`),p.pop(),`[${T}]`}let $=Object.keys(k),N=$.length;if(N===0)return"{}";if(s<p.length+1)return'"[Object]"';let C="",G="";m!==""&&(x+=m,b=`,
${x}`,C=" ");let se=Math.min(N,o);i&&!Zo(k)&&($=Ko($)),p.push(k);for(let A=0;A<se;A++){let R=$[A],v=a(R,k,p,g,m,x);v!==void 0&&(T+=`${G}${Mt(R)}:${C}${v}`,G=b)}if(N>o){let A=N-o;T+=`${G}"...":${C}"${Jt(A)} not stringified"`,G=b}return m!==""&&G.length>1&&(T=`
${x}${T}
${M}`),p.pop(),`{${T}}`}case"number":return isFinite(k)?String(k):e?e(k):"null";case"boolean":return k===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(k);default:return e?e(k):void 0}}function l(f,h,p,g,m,x){switch(typeof h=="object"&&h!==null&&typeof h.toJSON=="function"&&(h=h.toJSON(f)),typeof h){case"string":return Mt(h);case"object":{if(h===null)return"null";if(p.indexOf(h)!==-1)return r;let k=x,T="",b=",";if(Array.isArray(h)){if(h.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(h),m!==""&&(x+=m,T+=`
${x}`,b=`,
${x}`);let N=Math.min(h.length,o),C=0;for(;C<N-1;C++){let se=l(String(C),h[C],p,g,m,x);T+=se!==void 0?se:"null",T+=b}let G=l(String(C),h[C],p,g,m,x);if(T+=G!==void 0?G:"null",h.length-1>o){let se=h.length-o-1;T+=`${b}"... ${Jt(se)} not stringified"`}return m!==""&&(T+=`
${k}`),p.pop(),`[${T}]`}p.push(h);let M="";m!==""&&(x+=m,b=`,
${x}`,M=" ");let $="";for(let N of g){let C=l(N,h[N],p,g,m,x);C!==void 0&&(T+=`${$}${Mt(N)}:${M}${C}`,$=b)}return m!==""&&$.length>1&&(T=`
${x}${T}
${k}`),p.pop(),`{${T}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function u(f,h,p,g,m){switch(typeof h){case"string":return Mt(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return u(f,h,p,g,m);if(h===null)return"null"}if(p.indexOf(h)!==-1)return r;let x=m;if(Array.isArray(h)){if(h.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(h),m+=g;let C=`
${m}`,G=`,
${m}`,se=Math.min(h.length,o),A=0;for(;A<se-1;A++){let v=u(String(A),h[A],p,g,m);C+=v!==void 0?v:"null",C+=G}let R=u(String(A),h[A],p,g,m);if(C+=R!==void 0?R:"null",h.length-1>o){let v=h.length-o-1;C+=`${G}"... ${Jt(v)} not stringified"`}return C+=`
${x}`,p.pop(),`[${C}]`}let k=Object.keys(h),T=k.length;if(T===0)return"{}";if(s<p.length+1)return'"[Object]"';m+=g;let b=`,
${m}`,M="",$="",N=Math.min(T,o);Zo(h)&&(M+=Sc(h,b,o),k=k.slice(h.length),N-=h.length,$=b),i&&(k=Ko(k)),p.push(h);for(let C=0;C<N;C++){let G=k[C],se=u(G,h[G],p,g,m);se!==void 0&&(M+=`${$}${Mt(G)}: ${se}`,$=b)}if(T>o){let C=T-o;M+=`${$}"...": "${Jt(C)} not stringified"`,$=b}return $!==""&&(M=`
${m}${M}
${x}`),p.pop(),`{${M}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function d(f,h,p){switch(typeof h){case"string":return Mt(h);case"object":{if(h===null)return"null";if(typeof h.toJSON=="function"){if(h=h.toJSON(f),typeof h!="object")return d(f,h,p);if(h===null)return"null"}if(p.indexOf(h)!==-1)return r;let g="";if(Array.isArray(h)){if(h.length===0)return"[]";if(s<p.length+1)return'"[Array]"';p.push(h);let b=Math.min(h.length,o),M=0;for(;M<b-1;M++){let N=d(String(M),h[M],p);g+=N!==void 0?N:"null",g+=","}let $=d(String(M),h[M],p);if(g+=$!==void 0?$:"null",h.length-1>o){let N=h.length-o-1;g+=`,"... ${Jt(N)} not stringified"`}return p.pop(),`[${g}]`}let m=Object.keys(h),x=m.length;if(x===0)return"{}";if(s<p.length+1)return'"[Object]"';let k="",T=Math.min(x,o);Zo(h)&&(g+=Sc(h,",",o),m=m.slice(h.length),T-=h.length,k=","),i&&(m=Ko(m)),p.push(h);for(let b=0;b<T;b++){let M=m[b],$=d(M,h[M],p);$!==void 0&&(g+=`${k}${Mt(M)}:${$}`,k=",")}if(x>o){let b=x-o;g+=`${k}"...":"${Jt(b)} not stringified"`}return p.pop(),`{${g}}`}case"number":return isFinite(h)?String(h):e?e(h):"null";case"boolean":return h===!0?"true":"false";case"undefined":return;case"bigint":if(n)return String(h);default:return e?e(h):void 0}}function c(f,h,p){if(arguments.length>1){let g="";if(typeof p=="number"?g=" ".repeat(Math.min(p,10)):typeof p=="string"&&(g=p.slice(0,10)),h!=null){if(typeof h=="function")return a("",{"":f},[],h,g,"");if(Array.isArray(h))return l("",f,[],Ry(h),g,"")}if(g.length!==0)return u("",f,[],g,"")}return d("",f,[])}return c}});var Qo=_((lR,Rc)=>{"use strict";var My=De(),{MESSAGE:Py}=Te(),Cy=an();function Ay(t,e){return typeof e=="bigint"?e.toString():e}Rc.exports=My((t,e)=>{let r=Cy.configure(e);return t[Py]=r(t,e.replacer||Ay,e.space),t})});var Mc=_((uR,Oc)=>{"use strict";var Iy=De();Oc.exports=Iy((t,e)=>e.message?(t.message=`[${e.label}] ${t.message}`,t):(t.label=e.label,t))});var Cc=_((cR,Pc)=>{"use strict";var Ny=De(),{MESSAGE:$y}=Te(),Dy=an();Pc.exports=Ny(t=>{let e={};return t.message&&(e["@message"]=t.message,delete t.message),t.timestamp&&(e["@timestamp"]=t.timestamp,delete t.timestamp),e["@fields"]=t,t[$y]=Dy(e),t})});var Ic=_((fR,Ac)=>{"use strict";var Ly=De();function jy(t,e,r){let n=e.reduce((s,o)=>(s[o]=t[o],delete t[o],s),{}),i=Object.keys(t).reduce((s,o)=>(s[o]=t[o],delete t[o],s),{});return Object.assign(t,n,{[r]:i}),t}function qy(t,e,r){return t[r]=e.reduce((n,i)=>(n[i]=t[i],delete t[i],n),{}),t}Ac.exports=Ly((t,e={})=>{let r="metadata";e.key&&(r=e.key);let n=[];return!e.fillExcept&&!e.fillWith&&(n.push("level"),n.push("message")),e.fillExcept&&(n=e.fillExcept),n.length>0?jy(t,n,r):e.fillWith?qy(t,e.fillWith,r):t})});var $c=_((dR,Nc)=>{var Tr=1e3,Sr=Tr*60,Er=Sr*60,Qt=Er*24,Fy=Qt*7,Uy=Qt*365.25;Nc.exports=function(t,e){e=e||{};var r=typeof t;if(r==="string"&&t.length>0)return zy(t);if(r==="number"&&isFinite(t))return e.long?Wy(t):By(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))};function zy(t){if(t=String(t),!(t.length>100)){var e=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(e){var r=parseFloat(e[1]),n=(e[2]||"ms").toLowerCase();switch(n){case"years":case"year":case"yrs":case"yr":case"y":return r*Uy;case"weeks":case"week":case"w":return r*Fy;case"days":case"day":case"d":return r*Qt;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Er;case"minutes":case"minute":case"mins":case"min":case"m":return r*Sr;case"seconds":case"second":case"secs":case"sec":case"s":return r*Tr;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function By(t){var e=Math.abs(t);return e>=Qt?Math.round(t/Qt)+"d":e>=Er?Math.round(t/Er)+"h":e>=Sr?Math.round(t/Sr)+"m":e>=Tr?Math.round(t/Tr)+"s":t+"ms"}function Wy(t){var e=Math.abs(t);return e>=Qt?Ai(t,e,Qt,"day"):e>=Er?Ai(t,e,Er,"hour"):e>=Sr?Ai(t,e,Sr,"minute"):e>=Tr?Ai(t,e,Tr,"second"):t+" ms"}function Ai(t,e,r,n){var i=e>=r*1.5;return Math.round(t/r)+" "+n+(i?"s":"")}});var Lc=_((ln,Dc)=>{"use strict";var Yy=De(),Hy=$c();Dc.exports=Yy(t=>{let e=+new Date;return ln.diff=e-(ln.prevTime||e),ln.prevTime=e,t.ms=`+${Hy(ln.diff)}`,t})});var Fc=_((hR,qc)=>{"use strict";var Vy=require("util").inspect,Gy=De(),{LEVEL:Ky,MESSAGE:jc,SPLAT:Zy}=Te();qc.exports=Gy((t,e={})=>{let r=Object.assign({},t);return delete r[Ky],delete r[jc],delete r[Zy],t[jc]=Vy(r,!1,e.depth||null,e.colorize),t})});var Uc=_((pR,Ni)=>{"use strict";var{MESSAGE:Jy}=Te(),Ii=class{constructor(e){this.template=e}transform(e){return e[Jy]=this.template(e),e}};Ni.exports=t=>new Ii(t);Ni.exports.Printf=Ni.exports.Format=Ii});var Wc=_((mR,Bc)=>{"use strict";var Xy=De(),{MESSAGE:zc}=Te(),Qy=an();Bc.exports=Xy(t=>{let e=Qy(Object.assign({},t,{level:void 0,message:void 0,splat:void 0})),r=t.padding&&t.padding[t.level]||"";return e!=="{}"?t[zc]=`${t.level}:${r} ${t.message} ${e}`:t[zc]=`${t.level}:${r} ${t.message}`,t})});var Vc=_((gR,Hc)=>{"use strict";var eb=require("util"),{SPLAT:Yc}=Te(),tb=/%[scdjifoO%]/g,rb=/%%/g,ea=class{constructor(e){this.options=e}_splat(e,r){let n=e.message,i=e[Yc]||e.splat||[],s=n.match(rb),o=s&&s.length||0,l=r.length-o-i.length,u=l<0?i.splice(l,-1*l):[],d=u.length;if(d)for(let c=0;c<d;c++)Object.assign(e,u[c]);return e.message=eb.format(n,...i),e}transform(e){let r=e.message,n=e[Yc]||e.splat;if(!n||!n.length)return e;let i=r&&r.match&&r.match(tb);if(!i&&(n||n.length)){let s=n.length>1?n.splice(0):n,o=s.length;if(o)for(let a=0;a<o;a++)Object.assign(e,s[a]);return e}return i?this._splat(e,i):e}};Hc.exports=t=>new ea(t)});var Kc=_(($i,Gc)=>{(function(t,e){typeof $i=="object"&&typeof Gc<"u"?e($i):typeof define=="function"&&define.amd?define(["exports"],e):e(t.fecha={})})($i,function(t){"use strict";var e=/d{1,4}|M{1,4}|YY(?:YY)?|S{1,3}|Do|ZZ|Z|([HhMsDm])\1?|[aA]|"[^"]*"|'[^']*'/g,r="\\d\\d?",n="\\d\\d",i="\\d{3}",s="\\d{4}",o="[^\\s]+",a=/\[([^]*?)\]/gm;function l(y,S){for(var D=[],W=0,I=y.length;W<I;W++)D.push(y[W].substr(0,S));return D}var u=function(y){return function(S,D){var W=D[y].map(function(ae){return ae.toLowerCase()}),I=W.indexOf(S.toLowerCase());return I>-1?I:null}};function d(y){for(var S=[],D=1;D<arguments.length;D++)S[D-1]=arguments[D];for(var W=0,I=S;W<I.length;W++){var ae=I[W];for(var we in ae)y[we]=ae[we]}return y}var c=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=["January","February","March","April","May","June","July","August","September","October","November","December"],h=l(f,3),p=l(c,3),g={dayNamesShort:p,dayNames:c,monthNamesShort:h,monthNames:f,amPm:["am","pm"],DoFn:function(y){return y+["th","st","nd","rd"][y%10>3?0:(y-y%10!==10?1:0)*y%10]}},m=d({},g),x=function(y){return m=d(m,y)},k=function(y){return y.replace(/[|\\{()[^$+*?.-]/g,"\\$&")},T=function(y,S){for(S===void 0&&(S=2),y=String(y);y.length<S;)y="0"+y;return y},b={D:function(y){return String(y.getDate())},DD:function(y){return T(y.getDate())},Do:function(y,S){return S.DoFn(y.getDate())},d:function(y){return String(y.getDay())},dd:function(y){return T(y.getDay())},ddd:function(y,S){return S.dayNamesShort[y.getDay()]},dddd:function(y,S){return S.dayNames[y.getDay()]},M:function(y){return String(y.getMonth()+1)},MM:function(y){return T(y.getMonth()+1)},MMM:function(y,S){return S.monthNamesShort[y.getMonth()]},MMMM:function(y,S){return S.monthNames[y.getMonth()]},YY:function(y){return T(String(y.getFullYear()),4).substr(2)},YYYY:function(y){return T(y.getFullYear(),4)},h:function(y){return String(y.getHours()%12||12)},hh:function(y){return T(y.getHours()%12||12)},H:function(y){return String(y.getHours())},HH:function(y){return T(y.getHours())},m:function(y){return String(y.getMinutes())},mm:function(y){return T(y.getMinutes())},s:function(y){return String(y.getSeconds())},ss:function(y){return T(y.getSeconds())},S:function(y){return String(Math.round(y.getMilliseconds()/100))},SS:function(y){return T(Math.round(y.getMilliseconds()/10),2)},SSS:function(y){return T(y.getMilliseconds(),3)},a:function(y,S){return y.getHours()<12?S.amPm[0]:S.amPm[1]},A:function(y,S){return y.getHours()<12?S.amPm[0].toUpperCase():S.amPm[1].toUpperCase()},ZZ:function(y){var S=y.getTimezoneOffset();return(S>0?"-":"+")+T(Math.floor(Math.abs(S)/60)*100+Math.abs(S)%60,4)},Z:function(y){var S=y.getTimezoneOffset();return(S>0?"-":"+")+T(Math.floor(Math.abs(S)/60),2)+":"+T(Math.abs(S)%60,2)}},M=function(y){return+y-1},$=[null,r],N=[null,o],C=["isPm",o,function(y,S){var D=y.toLowerCase();return D===S.amPm[0]?0:D===S.amPm[1]?1:null}],G=["timezoneOffset","[^\\s]*?[\\+\\-]\\d\\d:?\\d\\d|[^\\s]*?Z?",function(y){var S=(y+"").match(/([+-]|\d\d)/gi);if(S){var D=+S[1]*60+parseInt(S[2],10);return S[0]==="+"?D:-D}return 0}],se={D:["day",r],DD:["day",n],Do:["day",r+o,function(y){return parseInt(y,10)}],M:["month",r,M],MM:["month",n,M],YY:["year",n,function(y){var S=new Date,D=+(""+S.getFullYear()).substr(0,2);return+(""+(+y>68?D-1:D)+y)}],h:["hour",r,void 0,"isPm"],hh:["hour",n,void 0,"isPm"],H:["hour",r],HH:["hour",n],m:["minute",r],mm:["minute",n],s:["second",r],ss:["second",n],YYYY:["year",s],S:["millisecond","\\d",function(y){return+y*100}],SS:["millisecond",n,function(y){return+y*10}],SSS:["millisecond",i],d:$,dd:$,ddd:N,dddd:N,MMM:["month",o,u("monthNamesShort")],MMMM:["month",o,u("monthNames")],a:C,A:C,ZZ:G,Z:G},A={default:"ddd MMM DD YYYY HH:mm:ss",shortDate:"M/D/YY",mediumDate:"MMM D, YYYY",longDate:"MMMM D, YYYY",fullDate:"dddd, MMMM D, YYYY",isoDate:"YYYY-MM-DD",isoDateTime:"YYYY-MM-DDTHH:mm:ssZ",shortTime:"HH:mm",mediumTime:"HH:mm:ss",longTime:"HH:mm:ss.SSS"},R=function(y){return d(A,y)},v=function(y,S,D){if(S===void 0&&(S=A.default),D===void 0&&(D={}),typeof y=="number"&&(y=new Date(y)),Object.prototype.toString.call(y)!=="[object Date]"||isNaN(y.getTime()))throw new Error("Invalid Date pass to format");S=A[S]||S;var W=[];S=S.replace(a,function(ae,we){return W.push(we),"@@@"});var I=d(d({},m),D);return S=S.replace(e,function(ae){return b[ae](y,I)}),S.replace(/@@@/g,function(){return W.shift()})};function E(y,S,D){if(D===void 0&&(D={}),typeof S!="string")throw new Error("Invalid format in fecha parse");if(S=A[S]||S,y.length>1e3)return null;var W=new Date,I={year:W.getFullYear(),month:0,day:1,hour:0,minute:0,second:0,millisecond:0,isPm:null,timezoneOffset:null},ae=[],we=[],Ue=S.replace(a,function(tn,gr){return we.push(k(gr)),"@@@"}),ze={},Et={};Ue=k(Ue).replace(e,function(tn){var gr=se[tn],Eo=gr[0],Ng=gr[1],mu=gr[3];if(ze[Eo])throw new Error("Invalid format. "+Eo+" specified twice in format");return ze[Eo]=!0,mu&&(Et[mu]=!0),ae.push(gr),"("+Ng+")"}),Object.keys(Et).forEach(function(tn){if(!ze[tn])throw new Error("Invalid format. "+tn+" is required in specified format")}),Ue=Ue.replace(/@@@/g,function(){return we.shift()});var Be=y.match(new RegExp(Ue,"i"));if(!Be)return null;for(var Re=d(d({},m),D),ve=1;ve<Be.length;ve++){var xt=ae[ve-1],mr=xt[0],hu=xt[2],pu=hu?hu(Be[ve],Re):+Be[ve];if(pu==null)return null;I[mr]=pu}I.isPm===1&&I.hour!=null&&+I.hour!=12?I.hour=+I.hour+12:I.isPm===0&&+I.hour==12&&(I.hour=0);var pi;if(I.timezoneOffset==null){pi=new Date(I.year,I.month,I.day,I.hour,I.minute,I.second,I.millisecond);for(var mi=[["month","getMonth"],["day","getDate"],["hour","getHours"],["minute","getMinutes"],["second","getSeconds"]],ve=0,Ig=mi.length;ve<Ig;ve++)if(ze[mi[ve][0]]&&I[mi[ve][0]]!==pi[mi[ve][1]]())return null}else if(pi=new Date(Date.UTC(I.year,I.month,I.day,I.hour,I.minute-I.timezoneOffset,I.second,I.millisecond)),I.month>11||I.month<0||I.day>31||I.day<1||I.hour>23||I.hour<0||I.minute>59||I.minute<0||I.second>59||I.second<0)return null;return pi}var O={format:v,parse:E,defaultI18n:g,setGlobalDateI18n:x,setGlobalDateMasks:R};t.assign=d,t.default=O,t.format=v,t.parse=E,t.defaultI18n=g,t.setGlobalDateI18n=x,t.setGlobalDateMasks=R,Object.defineProperty(t,"__esModule",{value:!0})})});var Jc=_((yR,Zc)=>{"use strict";var nb=Kc(),ib=De();Zc.exports=ib((t,e={})=>(e.format&&(t.timestamp=typeof e.format=="function"?e.format():nb.format(new Date,e.format)),t.timestamp||(t.timestamp=new Date().toISOString()),e.alias&&(t[e.alias]=t.timestamp),t))});var Qc=_((bR,Xc)=>{"use strict";var ta=Lo(),sb=De(),{MESSAGE:ra}=Te();Xc.exports=sb((t,e)=>(e.level!==!1&&(t.level=ta.strip(t.level)),e.message!==!1&&(t.message=ta.strip(String(t.message))),e.raw!==!1&&t[ra]&&(t[ra]=ta.strip(String(t[ra]))),t))});var ia=_(na=>{"use strict";var ob=na.format=De();na.levels=hc();function Ee(t,e){Object.defineProperty(ob,t,{get(){return e()},configurable:!0})}Ee("align",function(){return mc()});Ee("errors",function(){return bc()});Ee("cli",function(){return wc()});Ee("combine",function(){return Tc()});Ee("colorize",function(){return Ri()});Ee("json",function(){return Qo()});Ee("label",function(){return Mc()});Ee("logstash",function(){return Cc()});Ee("metadata",function(){return Ic()});Ee("ms",function(){return Lc()});Ee("padLevels",function(){return Ho()});Ee("prettyPrint",function(){return Fc()});Ee("printf",function(){return Uc()});Ee("simple",function(){return Wc()});Ee("splat",function(){return Vc()});Ee("timestamp",function(){return Jc()});Ee("uncolorize",function(){return Qc()})});var sa=_(Di=>{"use strict";var{format:ef}=require("util");Di.warn={deprecated(t){return()=>{throw new Error(ef("{ %s } was removed in winston@3.0.0.",t))}},useFormat(t){return()=>{throw new Error([ef("{ %s } was removed in winston@3.0.0.",t),"Use a custom winston.format = winston.format(function) instead."].join(`
`))}},forFunctions(t,e,r){r.forEach(n=>{t[n]=Di.warn[e](n)})},forProperties(t,e,r){r.forEach(n=>{let i=Di.warn[e](n);Object.defineProperty(t,n,{get:i,set:i})})}}});var tf=_((vR,ab)=>{ab.exports={name:"winston",description:"A logger for just about everything.",version:"3.10.0",author:"Charlie Robbins <charlie.robbins@gmail.com>",maintainers:["David Hyde <dabh@alumni.stanford.edu>"],repository:{type:"git",url:"https://github.com/winstonjs/winston.git"},keywords:["winston","logger","logging","logs","sysadmin","bunyan","pino","loglevel","tools","json","stream"],dependencies:{"@dabh/diagnostics":"^2.0.2","@colors/colors":"1.5.0",async:"^3.2.3","is-stream":"^2.0.0",logform:"^2.4.0","one-time":"^1.0.0","readable-stream":"^3.4.0","safe-stable-stringify":"^2.3.1","stack-trace":"0.0.x","triple-beam":"^1.3.0","winston-transport":"^4.5.0"},devDependencies:{"@babel/cli":"^7.17.0","@babel/core":"^7.17.2","@babel/preset-env":"^7.16.7","@dabh/eslint-config-populist":"^5.0.0","@types/node":"^20.3.1","abstract-winston-transport":"^0.5.1",assume:"^2.2.0","cross-spawn-async":"^2.2.5",eslint:"^8.9.0",hock:"^1.4.1",mocha:"8.1.3",nyc:"^15.1.0",rimraf:"^3.0.2",split2:"^4.1.0","std-mocks":"^1.0.1",through2:"^4.0.2","winston-compat":"^0.1.5"},main:"./lib/winston.js",browser:"./dist/winston",types:"./index.d.ts",scripts:{lint:"eslint lib/*.js lib/winston/*.js lib/winston/**/*.js --resolve-plugins-relative-to ./node_modules/@dabh/eslint-config-populist",test:"mocha","test:coverage":"nyc npm run test:unit","test:unit":"mocha test/unit","test:integration":"mocha test/integration",build:"rimraf dist && babel lib -d dist",prepublishOnly:"npm run build"},engines:{node:">= 12.0.0"},license:"MIT"}});var nf=_((TR,rf)=>{rf.exports=require("util").deprecate});var oa=_((SR,sf)=>{sf.exports=require("stream")});var la=_((ER,af)=>{"use strict";function lb(t,e){var r=this,n=this._readableState&&this._readableState.destroyed,i=this._writableState&&this._writableState.destroyed;return n||i?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,process.nextTick(aa,this,t)):process.nextTick(aa,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(s){!e&&s?r._writableState?r._writableState.errorEmitted?process.nextTick(Li,r):(r._writableState.errorEmitted=!0,process.nextTick(of,r,s)):process.nextTick(of,r,s):e?(process.nextTick(Li,r),e(s)):process.nextTick(Li,r)}),this)}function of(t,e){aa(t,e),Li(t)}function Li(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function ub(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}function aa(t,e){t.emit("error",e)}function cb(t,e){var r=t._readableState,n=t._writableState;r&&r.autoDestroy||n&&n.autoDestroy?t.destroy(e):t.emit("error",e)}af.exports={destroy:lb,undestroy:ub,errorOrDestroy:cb}});var Pt=_((xR,cf)=>{"use strict";var uf={};function Ye(t,e,r){r||(r=Error);function n(s,o,a){return typeof e=="string"?e:e(s,o,a)}class i extends r{constructor(o,a,l){super(n(o,a,l))}}i.prototype.name=r.name,i.prototype.code=t,uf[t]=i}function lf(t,e){if(Array.isArray(t)){let r=t.length;return t=t.map(n=>String(n)),r>2?`one of ${e} ${t.slice(0,r-1).join(", ")}, or `+t[r-1]:r===2?`one of ${e} ${t[0]} or ${t[1]}`:`of ${e} ${t[0]}`}else return`of ${e} ${String(t)}`}function fb(t,e,r){return t.substr(!r||r<0?0:+r,e.length)===e}function db(t,e,r){return(r===void 0||r>t.length)&&(r=t.length),t.substring(r-e.length,r)===e}function hb(t,e,r){return typeof r!="number"&&(r=0),r+e.length>t.length?!1:t.indexOf(e,r)!==-1}Ye("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError);Ye("ERR_INVALID_ARG_TYPE",function(t,e,r){let n;typeof e=="string"&&fb(e,"not ")?(n="must not be",e=e.replace(/^not /,"")):n="must be";let i;if(db(t," argument"))i=`The ${t} ${n} ${lf(e,"type")}`;else{let s=hb(t,".")?"property":"argument";i=`The "${t}" ${s} ${n} ${lf(e,"type")}`}return i+=`. Received type ${typeof r}`,i},TypeError);Ye("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF");Ye("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"});Ye("ERR_STREAM_PREMATURE_CLOSE","Premature close");Ye("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"});Ye("ERR_MULTIPLE_CALLBACK","Callback called multiple times");Ye("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable");Ye("ERR_STREAM_WRITE_AFTER_END","write after end");Ye("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError);Ye("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError);Ye("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event");cf.exports.codes=uf});var ua=_((kR,ff)=>{"use strict";var pb=Pt().codes.ERR_INVALID_OPT_VALUE;function mb(t,e,r){return t.highWaterMark!=null?t.highWaterMark:e?t[r]:null}function gb(t,e,r,n){var i=mb(e,n,r);if(i!=null){if(!(isFinite(i)&&Math.floor(i)===i)||i<0){var s=n?r:"highWaterMark";throw new pb(s,i)}return Math.floor(i)}return t.objectMode?16:16*1024}ff.exports={getHighWaterMark:gb}});var df=_((RR,ca)=>{typeof Object.create=="function"?ca.exports=function(e,r){r&&(e.super_=r,e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}))}:ca.exports=function(e,r){if(r){e.super_=r;var n=function(){};n.prototype=r.prototype,e.prototype=new n,e.prototype.constructor=e}}});var xr=_((OR,da)=>{try{if(fa=require("util"),typeof fa.inherits!="function")throw"";da.exports=fa.inherits}catch{da.exports=df()}var fa});var bf=_((MR,yf)=>{"use strict";function hf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function pf(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?hf(Object(r),!0).forEach(function(n){yb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):hf(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function yb(t,e,r){return e=gf(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function bb(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function mf(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,gf(n.key),n)}}function _b(t,e,r){return e&&mf(t.prototype,e),r&&mf(t,r),Object.defineProperty(t,"prototype",{writable:!1}),t}function gf(t){var e=wb(t,"string");return typeof e=="symbol"?e:String(e)}function wb(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var vb=require("buffer"),ji=vb.Buffer,Tb=require("util"),ha=Tb.inspect,Sb=ha&&ha.custom||"inspect";function Eb(t,e,r){ji.prototype.copy.call(t,e,r)}yf.exports=function(){function t(){bb(this,t),this.head=null,this.tail=null,this.length=0}return _b(t,[{key:"push",value:function(r){var n={data:r,next:null};this.length>0?this.tail.next=n:this.head=n,this.tail=n,++this.length}},{key:"unshift",value:function(r){var n={data:r,next:this.head};this.length===0&&(this.tail=n),this.head=n,++this.length}},{key:"shift",value:function(){if(this.length!==0){var r=this.head.data;return this.length===1?this.head=this.tail=null:this.head=this.head.next,--this.length,r}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(r){if(this.length===0)return"";for(var n=this.head,i=""+n.data;n=n.next;)i+=r+n.data;return i}},{key:"concat",value:function(r){if(this.length===0)return ji.alloc(0);for(var n=ji.allocUnsafe(r>>>0),i=this.head,s=0;i;)Eb(i.data,n,s),s+=i.data.length,i=i.next;return n}},{key:"consume",value:function(r,n){var i;return r<this.head.data.length?(i=this.head.data.slice(0,r),this.head.data=this.head.data.slice(r)):r===this.head.data.length?i=this.shift():i=n?this._getString(r):this._getBuffer(r),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(r){var n=this.head,i=1,s=n.data;for(r-=s.length;n=n.next;){var o=n.data,a=r>o.length?o.length:r;if(a===o.length?s+=o:s+=o.slice(0,r),r-=a,r===0){a===o.length?(++i,n.next?this.head=n.next:this.head=this.tail=null):(this.head=n,n.data=o.slice(a));break}++i}return this.length-=i,s}},{key:"_getBuffer",value:function(r){var n=ji.allocUnsafe(r),i=this.head,s=1;for(i.data.copy(n),r-=i.data.length;i=i.next;){var o=i.data,a=r>o.length?o.length:r;if(o.copy(n,n.length-r,0,a),r-=a,r===0){a===o.length?(++s,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=o.slice(a));break}++s}return this.length-=s,n}},{key:Sb,value:function(r,n){return ha(this,pf(pf({},n),{},{depth:0,customInspect:!1}))}}]),t}()});var vf=_((pa,wf)=>{var qi=require("buffer"),nt=qi.Buffer;function _f(t,e){for(var r in t)e[r]=t[r]}nt.from&&nt.alloc&&nt.allocUnsafe&&nt.allocUnsafeSlow?wf.exports=qi:(_f(qi,pa),pa.Buffer=er);function er(t,e,r){return nt(t,e,r)}er.prototype=Object.create(nt.prototype);_f(nt,er);er.from=function(t,e,r){if(typeof t=="number")throw new TypeError("Argument must not be a number");return nt(t,e,r)};er.alloc=function(t,e,r){if(typeof t!="number")throw new TypeError("Argument must be a number");var n=nt(t);return e!==void 0?typeof r=="string"?n.fill(e,r):n.fill(e):n.fill(0),n};er.allocUnsafe=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return nt(t)};er.allocUnsafeSlow=function(t){if(typeof t!="number")throw new TypeError("Argument must be a number");return qi.SlowBuffer(t)}});var ya=_(Sf=>{"use strict";var ga=vf().Buffer,Tf=ga.isEncoding||function(t){switch(t=""+t,t&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function xb(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}function kb(t){var e=xb(t);if(typeof e!="string"&&(ga.isEncoding===Tf||!Tf(t)))throw new Error("Unknown encoding: "+t);return e||t}Sf.StringDecoder=un;function un(t){this.encoding=kb(t);var e;switch(this.encoding){case"utf16le":this.text=Ab,this.end=Ib,e=4;break;case"utf8":this.fillLast=Mb,e=4;break;case"base64":this.text=Nb,this.end=$b,e=3;break;default:this.write=Db,this.end=Lb;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=ga.allocUnsafe(e)}un.prototype.write=function(t){if(t.length===0)return"";var e,r;if(this.lastNeed){if(e=this.fillLast(t),e===void 0)return"";r=this.lastNeed,this.lastNeed=0}else r=0;return r<t.length?e?e+this.text(t,r):this.text(t,r):e||""};un.prototype.end=Cb;un.prototype.text=Pb;un.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length};function ma(t){return t<=127?0:t>>5===6?2:t>>4===14?3:t>>3===30?4:t>>6===2?-1:-2}function Rb(t,e,r){var n=e.length-1;if(n<r)return 0;var i=ma(e[n]);return i>=0?(i>0&&(t.lastNeed=i-1),i):--n<r||i===-2?0:(i=ma(e[n]),i>=0?(i>0&&(t.lastNeed=i-2),i):--n<r||i===-2?0:(i=ma(e[n]),i>=0?(i>0&&(i===2?i=0:t.lastNeed=i-3),i):0))}function Ob(t,e,r){if((e[0]&192)!==128)return t.lastNeed=0,"\uFFFD";if(t.lastNeed>1&&e.length>1){if((e[1]&192)!==128)return t.lastNeed=1,"\uFFFD";if(t.lastNeed>2&&e.length>2&&(e[2]&192)!==128)return t.lastNeed=2,"\uFFFD"}}function Mb(t){var e=this.lastTotal-this.lastNeed,r=Ob(this,t,e);if(r!==void 0)return r;if(this.lastNeed<=t.length)return t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,e,0,t.length),this.lastNeed-=t.length}function Pb(t,e){var r=Rb(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=r;var n=t.length-(r-this.lastNeed);return t.copy(this.lastChar,0,n),t.toString("utf8",e,n)}function Cb(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"\uFFFD":e}function Ab(t,e){if((t.length-e)%2===0){var r=t.toString("utf16le",e);if(r){var n=r.charCodeAt(r.length-1);if(n>=55296&&n<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],r.slice(0,-1)}return r}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function Ib(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var r=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,r)}return e}function Nb(t,e){var r=(t.length-e)%3;return r===0?t.toString("base64",e):(this.lastNeed=3-r,this.lastTotal=3,r===1?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-r))}function $b(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function Db(t){return t.toString(this.encoding)}function Lb(t){return t&&t.length?this.write(t):""}});var Fi=_((CR,kf)=>{"use strict";var Ef=Pt().codes.ERR_STREAM_PREMATURE_CLOSE;function jb(t){var e=!1;return function(){if(!e){e=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];t.apply(this,n)}}}function qb(){}function Fb(t){return t.setHeader&&typeof t.abort=="function"}function xf(t,e,r){if(typeof e=="function")return xf(t,null,e);e||(e={}),r=jb(r||qb);var n=e.readable||e.readable!==!1&&t.readable,i=e.writable||e.writable!==!1&&t.writable,s=function(){t.writable||a()},o=t._writableState&&t._writableState.finished,a=function(){i=!1,o=!0,n||r.call(t)},l=t._readableState&&t._readableState.endEmitted,u=function(){n=!1,l=!0,i||r.call(t)},d=function(p){r.call(t,p)},c=function(){var p;if(n&&!l)return(!t._readableState||!t._readableState.ended)&&(p=new Ef),r.call(t,p);if(i&&!o)return(!t._writableState||!t._writableState.ended)&&(p=new Ef),r.call(t,p)},f=function(){t.req.on("finish",a)};return Fb(t)?(t.on("complete",a),t.on("abort",c),t.req?f():t.on("request",f)):i&&!t._writableState&&(t.on("end",s),t.on("close",s)),t.on("end",u),t.on("finish",a),e.error!==!1&&t.on("error",d),t.on("close",c),function(){t.removeListener("complete",a),t.removeListener("abort",c),t.removeListener("request",f),t.req&&t.req.removeListener("finish",a),t.removeListener("end",s),t.removeListener("close",s),t.removeListener("finish",a),t.removeListener("end",u),t.removeListener("error",d),t.removeListener("close",c)}}kf.exports=xf});var Of=_((AR,Rf)=>{"use strict";var Ui;function Ct(t,e,r){return e=Ub(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ub(t){var e=zb(t,"string");return typeof e=="symbol"?e:String(e)}function zb(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var Bb=Fi(),At=Symbol("lastResolve"),tr=Symbol("lastReject"),cn=Symbol("error"),zi=Symbol("ended"),rr=Symbol("lastPromise"),ba=Symbol("handlePromise"),nr=Symbol("stream");function It(t,e){return{value:t,done:e}}function Wb(t){var e=t[At];if(e!==null){var r=t[nr].read();r!==null&&(t[rr]=null,t[At]=null,t[tr]=null,e(It(r,!1)))}}function Yb(t){process.nextTick(Wb,t)}function Hb(t,e){return function(r,n){t.then(function(){if(e[zi]){r(It(void 0,!0));return}e[ba](r,n)},n)}}var Vb=Object.getPrototypeOf(function(){}),Gb=Object.setPrototypeOf((Ui={get stream(){return this[nr]},next:function(){var e=this,r=this[cn];if(r!==null)return Promise.reject(r);if(this[zi])return Promise.resolve(It(void 0,!0));if(this[nr].destroyed)return new Promise(function(o,a){process.nextTick(function(){e[cn]?a(e[cn]):o(It(void 0,!0))})});var n=this[rr],i;if(n)i=new Promise(Hb(n,this));else{var s=this[nr].read();if(s!==null)return Promise.resolve(It(s,!1));i=new Promise(this[ba])}return this[rr]=i,i}},Ct(Ui,Symbol.asyncIterator,function(){return this}),Ct(Ui,"return",function(){var e=this;return new Promise(function(r,n){e[nr].destroy(null,function(i){if(i){n(i);return}r(It(void 0,!0))})})}),Ui),Vb),Kb=function(e){var r,n=Object.create(Gb,(r={},Ct(r,nr,{value:e,writable:!0}),Ct(r,At,{value:null,writable:!0}),Ct(r,tr,{value:null,writable:!0}),Ct(r,cn,{value:null,writable:!0}),Ct(r,zi,{value:e._readableState.endEmitted,writable:!0}),Ct(r,ba,{value:function(s,o){var a=n[nr].read();a?(n[rr]=null,n[At]=null,n[tr]=null,s(It(a,!1))):(n[At]=s,n[tr]=o)},writable:!0}),r));return n[rr]=null,Bb(e,function(i){if(i&&i.code!=="ERR_STREAM_PREMATURE_CLOSE"){var s=n[tr];s!==null&&(n[rr]=null,n[At]=null,n[tr]=null,s(i)),n[cn]=i;return}var o=n[At];o!==null&&(n[rr]=null,n[At]=null,n[tr]=null,o(It(void 0,!0))),n[zi]=!0}),e.on("readable",Yb.bind(null,n)),n};Rf.exports=Kb});var Af=_((IR,Cf)=>{"use strict";function Mf(t,e,r,n,i,s,o){try{var a=t[s](o),l=a.value}catch(u){r(u);return}a.done?e(l):Promise.resolve(l).then(n,i)}function Zb(t){return function(){var e=this,r=arguments;return new Promise(function(n,i){var s=t.apply(e,r);function o(l){Mf(s,n,i,o,a,"next",l)}function a(l){Mf(s,n,i,o,a,"throw",l)}o(void 0)})}}function Pf(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter(function(i){return Object.getOwnPropertyDescriptor(t,i).enumerable})),r.push.apply(r,n)}return r}function Jb(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?Pf(Object(r),!0).forEach(function(n){Xb(t,n,r[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):Pf(Object(r)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(r,n))})}return t}function Xb(t,e,r){return e=Qb(e),e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Qb(t){var e=e_(t,"string");return typeof e=="symbol"?e:String(e)}function e_(t,e){if(typeof t!="object"||t===null)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var n=r.call(t,e||"default");if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var t_=Pt().codes.ERR_INVALID_ARG_TYPE;function r_(t,e,r){var n;if(e&&typeof e.next=="function")n=e;else if(e&&e[Symbol.asyncIterator])n=e[Symbol.asyncIterator]();else if(e&&e[Symbol.iterator])n=e[Symbol.iterator]();else throw new t_("iterable",["Iterable"],e);var i=new t(Jb({objectMode:!0},r)),s=!1;i._read=function(){s||(s=!0,o())};function o(){return a.apply(this,arguments)}function a(){return a=Zb(function*(){try{var l=yield n.next(),u=l.value,d=l.done;d?i.push(null):i.push(yield u)?o():s=!1}catch(c){i.destroy(c)}}),a.apply(this,arguments)}return i}Cf.exports=r_});var Oa=_(($R,zf)=>{"use strict";zf.exports=Q;var kr;Q.ReadableState=Df;var NR=require("events").EventEmitter,$f=function(e,r){return e.listeners(r).length},dn=oa(),Bi=require("buffer").Buffer,n_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function i_(t){return Bi.from(t)}function s_(t){return Bi.isBuffer(t)||t instanceof n_}var _a=require("util"),Y;_a&&_a.debuglog?Y=_a.debuglog("stream"):Y=function(){};var o_=bf(),ka=la(),a_=ua(),l_=a_.getHighWaterMark,Wi=Pt().codes,u_=Wi.ERR_INVALID_ARG_TYPE,c_=Wi.ERR_STREAM_PUSH_AFTER_EOF,f_=Wi.ERR_METHOD_NOT_IMPLEMENTED,d_=Wi.ERR_STREAM_UNSHIFT_AFTER_END_EVENT,Rr,wa,va;xr()(Q,dn);var fn=ka.errorOrDestroy,Ta=["error","close","destroy","pause","resume"];function h_(t,e,r){if(typeof t.prependListener=="function")return t.prependListener(e,r);!t._events||!t._events[e]?t.on(e,r):Array.isArray(t._events[e])?t._events[e].unshift(r):t._events[e]=[r,t._events[e]]}function Df(t,e,r){kr=kr||ir(),t=t||{},typeof r!="boolean"&&(r=e instanceof kr),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=l_(this,t,"readableHighWaterMark",r),this.buffer=new o_,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(Rr||(Rr=ya().StringDecoder),this.decoder=new Rr(t.encoding),this.encoding=t.encoding)}function Q(t){if(kr=kr||ir(),!(this instanceof Q))return new Q(t);var e=this instanceof kr;this._readableState=new Df(t,this,e),this.readable=!0,t&&(typeof t.read=="function"&&(this._read=t.read),typeof t.destroy=="function"&&(this._destroy=t.destroy)),dn.call(this)}Object.defineProperty(Q.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0?!1:this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}});Q.prototype.destroy=ka.destroy;Q.prototype._undestroy=ka.undestroy;Q.prototype._destroy=function(t,e){e(t)};Q.prototype.push=function(t,e){var r=this._readableState,n;return r.objectMode?n=!0:typeof t=="string"&&(e=e||r.defaultEncoding,e!==r.encoding&&(t=Bi.from(t,e),e=""),n=!0),Lf(this,t,e,!1,n)};Q.prototype.unshift=function(t){return Lf(this,t,null,!0,!1)};function Lf(t,e,r,n,i){Y("readableAddChunk",e);var s=t._readableState;if(e===null)s.reading=!1,g_(t,s);else{var o;if(i||(o=p_(s,e)),o)fn(t,o);else if(s.objectMode||e&&e.length>0)if(typeof e!="string"&&!s.objectMode&&Object.getPrototypeOf(e)!==Bi.prototype&&(e=i_(e)),n)s.endEmitted?fn(t,new d_):Sa(t,s,e,!0);else if(s.ended)fn(t,new c_);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(e=s.decoder.write(e),s.objectMode||e.length!==0?Sa(t,s,e,!1):xa(t,s)):Sa(t,s,e,!1)}else n||(s.reading=!1,xa(t,s))}return!s.ended&&(s.length<s.highWaterMark||s.length===0)}function Sa(t,e,r,n){e.flowing&&e.length===0&&!e.sync?(e.awaitDrain=0,t.emit("data",r)):(e.length+=e.objectMode?1:r.length,n?e.buffer.unshift(r):e.buffer.push(r),e.needReadable&&Yi(t)),xa(t,e)}function p_(t,e){var r;return!s_(e)&&typeof e!="string"&&e!==void 0&&!t.objectMode&&(r=new u_("chunk",["string","Buffer","Uint8Array"],e)),r}Q.prototype.isPaused=function(){return this._readableState.flowing===!1};Q.prototype.setEncoding=function(t){Rr||(Rr=ya().StringDecoder);var e=new Rr(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";r!==null;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),n!==""&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var If=1073741824;function m_(t){return t>=If?t=If:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}function Nf(t,e){return t<=0||e.length===0&&e.ended?0:e.objectMode?1:t!==t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=m_(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}Q.prototype.read=function(t){Y("read",t),t=parseInt(t,10);var e=this._readableState,r=t;if(t!==0&&(e.emittedReadable=!1),t===0&&e.needReadable&&((e.highWaterMark!==0?e.length>=e.highWaterMark:e.length>0)||e.ended))return Y("read: emitReadable",e.length,e.ended),e.length===0&&e.ended?Ea(this):Yi(this),null;if(t=Nf(t,e),t===0&&e.ended)return e.length===0&&Ea(this),null;var n=e.needReadable;Y("need readable",n),(e.length===0||e.length-t<e.highWaterMark)&&(n=!0,Y("length less than watermark",n)),e.ended||e.reading?(n=!1,Y("reading or ended",n)):n&&(Y("do read"),e.reading=!0,e.sync=!0,e.length===0&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=Nf(r,e)));var i;return t>0?i=Ff(t,e):i=null,i===null?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),e.length===0&&(e.ended||(e.needReadable=!0),r!==t&&e.ended&&Ea(this)),i!==null&&this.emit("data",i),i};function g_(t,e){if(Y("onEofChunk"),!e.ended){if(e.decoder){var r=e.decoder.end();r&&r.length&&(e.buffer.push(r),e.length+=e.objectMode?1:r.length)}e.ended=!0,e.sync?Yi(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,jf(t)))}}function Yi(t){var e=t._readableState;Y("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(Y("emitReadable",e.flowing),e.emittedReadable=!0,process.nextTick(jf,t))}function jf(t){var e=t._readableState;Y("emitReadable_",e.destroyed,e.length,e.ended),!e.destroyed&&(e.length||e.ended)&&(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,Ra(t)}function xa(t,e){e.readingMore||(e.readingMore=!0,process.nextTick(y_,t,e))}function y_(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&e.length===0);){var r=e.length;if(Y("maybeReadMore read 0"),t.read(0),r===e.length)break}e.readingMore=!1}Q.prototype._read=function(t){fn(this,new f_("_read()"))};Q.prototype.pipe=function(t,e){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=t;break;case 1:n.pipes=[n.pipes,t];break;default:n.pipes.push(t);break}n.pipesCount+=1,Y("pipe count=%d opts=%j",n.pipesCount,e);var i=(!e||e.end!==!1)&&t!==process.stdout&&t!==process.stderr,s=i?a:g;n.endEmitted?process.nextTick(s):r.once("end",s),t.on("unpipe",o);function o(m,x){Y("onunpipe"),m===r&&x&&x.hasUnpiped===!1&&(x.hasUnpiped=!0,d())}function a(){Y("onend"),t.end()}var l=b_(r);t.on("drain",l);var u=!1;function d(){Y("cleanup"),t.removeListener("close",h),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",f),t.removeListener("unpipe",o),r.removeListener("end",a),r.removeListener("end",g),r.removeListener("data",c),u=!0,n.awaitDrain&&(!t._writableState||t._writableState.needDrain)&&l()}r.on("data",c);function c(m){Y("ondata");var x=t.write(m);Y("dest.write",x),x===!1&&((n.pipesCount===1&&n.pipes===t||n.pipesCount>1&&Uf(n.pipes,t)!==-1)&&!u&&(Y("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(m){Y("onerror",m),g(),t.removeListener("error",f),$f(t,"error")===0&&fn(t,m)}h_(t,"error",f);function h(){t.removeListener("finish",p),g()}t.once("close",h);function p(){Y("onfinish"),t.removeListener("close",h),g()}t.once("finish",p);function g(){Y("unpipe"),r.unpipe(t)}return t.emit("pipe",r),n.flowing||(Y("pipe resume"),r.resume()),t};function b_(t){return function(){var r=t._readableState;Y("pipeOnDrain",r.awaitDrain),r.awaitDrain&&r.awaitDrain--,r.awaitDrain===0&&$f(t,"data")&&(r.flowing=!0,Ra(t))}}Q.prototype.unpipe=function(t){var e=this._readableState,r={hasUnpiped:!1};if(e.pipesCount===0)return this;if(e.pipesCount===1)return t&&t!==e.pipes?this:(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,r),this);if(!t){var n=e.pipes,i=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<i;s++)n[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=Uf(e.pipes,t);return o===-1?this:(e.pipes.splice(o,1),e.pipesCount-=1,e.pipesCount===1&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,r),this)};Q.prototype.on=function(t,e){var r=dn.prototype.on.call(this,t,e),n=this._readableState;return t==="data"?(n.readableListening=this.listenerCount("readable")>0,n.flowing!==!1&&this.resume()):t==="readable"&&!n.endEmitted&&!n.readableListening&&(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,Y("on readable",n.length,n.reading),n.length?Yi(this):n.reading||process.nextTick(__,this)),r};Q.prototype.addListener=Q.prototype.on;Q.prototype.removeListener=function(t,e){var r=dn.prototype.removeListener.call(this,t,e);return t==="readable"&&process.nextTick(qf,this),r};Q.prototype.removeAllListeners=function(t){var e=dn.prototype.removeAllListeners.apply(this,arguments);return(t==="readable"||t===void 0)&&process.nextTick(qf,this),e};function qf(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function __(t){Y("readable nexttick read 0"),t.read(0)}Q.prototype.resume=function(){var t=this._readableState;return t.flowing||(Y("resume"),t.flowing=!t.readableListening,w_(this,t)),t.paused=!1,this};function w_(t,e){e.resumeScheduled||(e.resumeScheduled=!0,process.nextTick(v_,t,e))}function v_(t,e){Y("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),Ra(t),e.flowing&&!e.reading&&t.read(0)}Q.prototype.pause=function(){return Y("call pause flowing=%j",this._readableState.flowing),this._readableState.flowing!==!1&&(Y("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this};function Ra(t){var e=t._readableState;for(Y("flow",e.flowing);e.flowing&&t.read()!==null;);}Q.prototype.wrap=function(t){var e=this,r=this._readableState,n=!1;t.on("end",function(){if(Y("wrapped end"),r.decoder&&!r.ended){var o=r.decoder.end();o&&o.length&&e.push(o)}e.push(null)}),t.on("data",function(o){if(Y("wrapped data"),r.decoder&&(o=r.decoder.write(o)),!(r.objectMode&&o==null)&&!(!r.objectMode&&(!o||!o.length))){var a=e.push(o);a||(n=!0,t.pause())}});for(var i in t)this[i]===void 0&&typeof t[i]=="function"&&(this[i]=function(a){return function(){return t[a].apply(t,arguments)}}(i));for(var s=0;s<Ta.length;s++)t.on(Ta[s],this.emit.bind(this,Ta[s]));return this._read=function(o){Y("wrapped _read",o),n&&(n=!1,t.resume())},this};typeof Symbol=="function"&&(Q.prototype[Symbol.asyncIterator]=function(){return wa===void 0&&(wa=Of()),wa(this)});Object.defineProperty(Q.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}});Object.defineProperty(Q.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}});Object.defineProperty(Q.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}});Q._fromList=Ff;Object.defineProperty(Q.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}});function Ff(t,e){if(e.length===0)return null;var r;return e.objectMode?r=e.buffer.shift():!t||t>=e.length?(e.decoder?r=e.buffer.join(""):e.buffer.length===1?r=e.buffer.first():r=e.buffer.concat(e.length),e.buffer.clear()):r=e.buffer.consume(t,e.decoder),r}function Ea(t){var e=t._readableState;Y("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,process.nextTick(T_,e,t))}function T_(t,e){if(Y("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&t.length===0&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var r=e._writableState;(!r||r.autoDestroy&&r.finished)&&e.destroy()}}typeof Symbol=="function"&&(Q.from=function(t,e){return va===void 0&&(va=Af()),va(Q,t,e)});function Uf(t,e){for(var r=0,n=t.length;r<n;r++)if(t[r]===e)return r;return-1}});var ir=_((DR,Wf)=>{"use strict";var S_=Object.keys||function(t){var e=[];for(var r in t)e.push(r);return e};Wf.exports=it;var Bf=Oa(),Pa=Gi();xr()(it,Bf);for(Ma=S_(Pa.prototype),Hi=0;Hi<Ma.length;Hi++)Vi=Ma[Hi],it.prototype[Vi]||(it.prototype[Vi]=Pa.prototype[Vi]);var Ma,Vi,Hi;function it(t){if(!(this instanceof it))return new it(t);Bf.call(this,t),Pa.call(this,t),this.allowHalfOpen=!0,t&&(t.readable===!1&&(this.readable=!1),t.writable===!1&&(this.writable=!1),t.allowHalfOpen===!1&&(this.allowHalfOpen=!1,this.once("end",E_)))}Object.defineProperty(it.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});Object.defineProperty(it.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});Object.defineProperty(it.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function E_(){this._writableState.ended||process.nextTick(x_,this)}function x_(t){t.end()}Object.defineProperty(it.prototype,"destroyed",{enumerable:!1,get:function(){return this._readableState===void 0||this._writableState===void 0?!1:this._readableState.destroyed&&this._writableState.destroyed},set:function(e){this._readableState===void 0||this._writableState===void 0||(this._readableState.destroyed=e,this._writableState.destroyed=e)}})});var Gi=_((LR,Zf)=>{"use strict";Zf.exports=ye;function Hf(t){var e=this;this.next=null,this.entry=null,this.finish=function(){X_(e,t)}}var Or;ye.WritableState=pn;var k_={deprecate:nf()},Vf=oa(),Zi=require("buffer").Buffer,R_=(typeof global<"u"?global:typeof window<"u"?window:typeof self<"u"?self:{}).Uint8Array||function(){};function O_(t){return Zi.from(t)}function M_(t){return Zi.isBuffer(t)||t instanceof R_}var Aa=la(),P_=ua(),C_=P_.getHighWaterMark,Nt=Pt().codes,A_=Nt.ERR_INVALID_ARG_TYPE,I_=Nt.ERR_METHOD_NOT_IMPLEMENTED,N_=Nt.ERR_MULTIPLE_CALLBACK,$_=Nt.ERR_STREAM_CANNOT_PIPE,D_=Nt.ERR_STREAM_DESTROYED,L_=Nt.ERR_STREAM_NULL_VALUES,j_=Nt.ERR_STREAM_WRITE_AFTER_END,q_=Nt.ERR_UNKNOWN_ENCODING,Mr=Aa.errorOrDestroy;xr()(ye,Vf);function F_(){}function pn(t,e,r){Or=Or||ir(),t=t||{},typeof r!="boolean"&&(r=e instanceof Or),this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=C_(this,t,"writableHighWaterMark",r),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var n=t.decodeStrings===!1;this.decodeStrings=!n,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(i){V_(e,i)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=t.emitClose!==!1,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new Hf(this)}pn.prototype.getBuffer=function(){for(var e=this.bufferedRequest,r=[];e;)r.push(e),e=e.next;return r};(function(){try{Object.defineProperty(pn.prototype,"buffer",{get:k_.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch{}})();var Ki;typeof Symbol=="function"&&Symbol.hasInstance&&typeof Function.prototype[Symbol.hasInstance]=="function"?(Ki=Function.prototype[Symbol.hasInstance],Object.defineProperty(ye,Symbol.hasInstance,{value:function(e){return Ki.call(this,e)?!0:this!==ye?!1:e&&e._writableState instanceof pn}})):Ki=function(e){return e instanceof this};function ye(t){Or=Or||ir();var e=this instanceof Or;if(!e&&!Ki.call(ye,this))return new ye(t);this._writableState=new pn(t,this,e),this.writable=!0,t&&(typeof t.write=="function"&&(this._write=t.write),typeof t.writev=="function"&&(this._writev=t.writev),typeof t.destroy=="function"&&(this._destroy=t.destroy),typeof t.final=="function"&&(this._final=t.final)),Vf.call(this)}ye.prototype.pipe=function(){Mr(this,new $_)};function U_(t,e){var r=new j_;Mr(t,r),process.nextTick(e,r)}function z_(t,e,r,n){var i;return r===null?i=new L_:typeof r!="string"&&!e.objectMode&&(i=new A_("chunk",["string","Buffer"],r)),i?(Mr(t,i),process.nextTick(n,i),!1):!0}ye.prototype.write=function(t,e,r){var n=this._writableState,i=!1,s=!n.objectMode&&M_(t);return s&&!Zi.isBuffer(t)&&(t=O_(t)),typeof e=="function"&&(r=e,e=null),s?e="buffer":e||(e=n.defaultEncoding),typeof r!="function"&&(r=F_),n.ending?U_(this,r):(s||z_(this,n,t,r))&&(n.pendingcb++,i=W_(this,n,s,t,e,r)),i};ye.prototype.cork=function(){this._writableState.corked++};ye.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,!t.writing&&!t.corked&&!t.bufferProcessing&&t.bufferedRequest&&Gf(this,t))};ye.prototype.setDefaultEncoding=function(e){if(typeof e=="string"&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new q_(e);return this._writableState.defaultEncoding=e,this};Object.defineProperty(ye.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}});function B_(t,e,r){return!t.objectMode&&t.decodeStrings!==!1&&typeof e=="string"&&(e=Zi.from(e,r)),e}Object.defineProperty(ye.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}});function W_(t,e,r,n,i,s){if(!r){var o=B_(e,n,i);n!==o&&(r=!0,i="buffer",n=o)}var a=e.objectMode?1:n.length;e.length+=a;var l=e.length<e.highWaterMark;if(l||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else Ca(t,e,!1,a,n,i,s);return l}function Ca(t,e,r,n,i,s,o){e.writelen=n,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new D_("write")):r?t._writev(i,e.onwrite):t._write(i,s,e.onwrite),e.sync=!1}function Y_(t,e,r,n,i){--e.pendingcb,r?(process.nextTick(i,n),process.nextTick(hn,t,e),t._writableState.errorEmitted=!0,Mr(t,n)):(i(n),t._writableState.errorEmitted=!0,Mr(t,n),hn(t,e))}function H_(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}function V_(t,e){var r=t._writableState,n=r.sync,i=r.writecb;if(typeof i!="function")throw new N_;if(H_(r),e)Y_(t,r,n,e,i);else{var s=Kf(r)||t.destroyed;!s&&!r.corked&&!r.bufferProcessing&&r.bufferedRequest&&Gf(t,r),n?process.nextTick(Yf,t,r,s,i):Yf(t,r,s,i)}}function Yf(t,e,r,n){r||G_(t,e),e.pendingcb--,n(),hn(t,e)}function G_(t,e){e.length===0&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}function Gf(t,e){e.bufferProcessing=!0;var r=e.bufferedRequest;if(t._writev&&r&&r.next){var n=e.bufferedRequestCount,i=new Array(n),s=e.corkedRequestsFree;s.entry=r;for(var o=0,a=!0;r;)i[o]=r,r.isBuf||(a=!1),r=r.next,o+=1;i.allBuffers=a,Ca(t,e,!0,e.length,i,"",s.finish),e.pendingcb++,e.lastBufferedRequest=null,s.next?(e.corkedRequestsFree=s.next,s.next=null):e.corkedRequestsFree=new Hf(e),e.bufferedRequestCount=0}else{for(;r;){var l=r.chunk,u=r.encoding,d=r.callback,c=e.objectMode?1:l.length;if(Ca(t,e,!1,c,l,u,d),r=r.next,e.bufferedRequestCount--,e.writing)break}r===null&&(e.lastBufferedRequest=null)}e.bufferedRequest=r,e.bufferProcessing=!1}ye.prototype._write=function(t,e,r){r(new I_("_write()"))};ye.prototype._writev=null;ye.prototype.end=function(t,e,r){var n=this._writableState;return typeof t=="function"?(r=t,t=null,e=null):typeof e=="function"&&(r=e,e=null),t!=null&&this.write(t,e),n.corked&&(n.corked=1,this.uncork()),n.ending||J_(this,n,r),this};Object.defineProperty(ye.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}});function Kf(t){return t.ending&&t.length===0&&t.bufferedRequest===null&&!t.finished&&!t.writing}function K_(t,e){t._final(function(r){e.pendingcb--,r&&Mr(t,r),e.prefinished=!0,t.emit("prefinish"),hn(t,e)})}function Z_(t,e){!e.prefinished&&!e.finalCalled&&(typeof t._final=="function"&&!e.destroyed?(e.pendingcb++,e.finalCalled=!0,process.nextTick(K_,t,e)):(e.prefinished=!0,t.emit("prefinish")))}function hn(t,e){var r=Kf(e);if(r&&(Z_(t,e),e.pendingcb===0&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var n=t._readableState;(!n||n.autoDestroy&&n.endEmitted)&&t.destroy()}return r}function J_(t,e,r){e.ending=!0,hn(t,e),r&&(e.finished?process.nextTick(r):t.once("finish",r)),e.ended=!0,t.writable=!1}function X_(t,e,r){var n=t.entry;for(t.entry=null;n;){var i=n.callback;e.pendingcb--,i(r),n=n.next}e.corkedRequestsFree.next=t}Object.defineProperty(ye.prototype,"destroyed",{enumerable:!1,get:function(){return this._writableState===void 0?!1:this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}});ye.prototype.destroy=Aa.destroy;ye.prototype._undestroy=Aa.undestroy;ye.prototype._destroy=function(t,e){e(t)}});var Na=_((jR,Xf)=>{"use strict";var Q_=require("util"),{LEVEL:Ia}=Te(),Jf=sr(),mn=Xf.exports=function(e={}){if(Jf.call(this,e),!e.transport||typeof e.transport.log!="function")throw new Error("Invalid transport, must be an object with a log method.");this.transport=e.transport,this.level=this.level||e.transport.level,this.handleExceptions=this.handleExceptions||e.transport.handleExceptions,this._deprecated();function r(n){this.emit("error",n,this.transport)}this.transport.__winstonError||(this.transport.__winstonError=r.bind(this),this.transport.on("error",this.transport.__winstonError))};Q_.inherits(mn,Jf);mn.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);(!this.level||this.levels[this.level]>=this.levels[e[Ia]])&&this.transport.log(e[Ia],e.message,e,this._nop),n(null)};mn.prototype._writev=function(e,r){for(let n=0;n<e.length;n++)this._accept(e[n])&&(this.transport.log(e[n].chunk[Ia],e[n].chunk.message,e[n].chunk,this._nop),e[n].callback());return r(null)};mn.prototype._deprecated=function(){console.error([`${this.transport.name} is a legacy winston transport. Consider upgrading: `,"- Upgrade docs: https://github.com/winstonjs/winston/blob/master/UPGRADE-3.0.md"].join(`
`))};mn.prototype.close=function(){this.transport.close&&this.transport.close(),this.transport.__winstonError&&(this.transport.removeListener("error",this.transport.__winstonError),this.transport.__winstonError=null)}});var sr=_((qR,$a)=>{"use strict";var e0=require("util"),Qf=Gi(),{LEVEL:ed}=Te(),gn=$a.exports=function(e={}){Qf.call(this,{objectMode:!0,highWaterMark:e.highWaterMark}),this.format=e.format,this.level=e.level,this.handleExceptions=e.handleExceptions,this.handleRejections=e.handleRejections,this.silent=e.silent,e.log&&(this.log=e.log),e.logv&&(this.logv=e.logv),e.close&&(this.close=e.close),this.once("pipe",r=>{this.levels=r.levels,this.parent=r}),this.once("unpipe",r=>{r===this.parent&&(this.parent=null,this.close&&this.close())})};e0.inherits(gn,Qf);gn.prototype._write=function(e,r,n){if(this.silent||e.exception===!0&&!this.handleExceptions)return n(null);let i=this.level||this.parent&&this.parent.level;if(!i||this.levels[i]>=this.levels[e[ed]]){if(e&&!this.format)return this.log(e,n);let s,o;try{o=this.format.transform(Object.assign({},e),this.format.options)}catch(a){s=a}if(s||!o){if(n(),s)throw s;return}return this.log(o,n)}return this._writableState.sync=!1,n(null)};gn.prototype._writev=function(e,r){if(this.logv){let n=e.filter(this._accept,this);return n.length?this.logv(n,r):r(null)}for(let n=0;n<e.length;n++){if(!this._accept(e[n]))continue;if(e[n].chunk&&!this.format){this.log(e[n].chunk,e[n].callback);continue}let i,s;try{s=this.format.transform(Object.assign({},e[n].chunk),this.format.options)}catch(o){i=o}if(i||!s){if(e[n].callback(),i)throw r(null),i}else this.log(s,e[n].callback)}return r(null)};gn.prototype._accept=function(e){let r=e.chunk;if(this.silent)return!1;let n=this.level||this.parent&&this.parent.level;return!!((r.exception===!0||!n||this.levels[n]>=this.levels[r[ed]])&&(this.handleExceptions||r.exception!==!0))};gn.prototype._nop=function(){};$a.exports.LegacyTransportStream=Na()});var nd=_((UR,rd)=>{"use strict";var t0=require("os"),{LEVEL:td,MESSAGE:Pr}=Te(),r0=sr();rd.exports=class extends r0{constructor(e={}){super(e),this.name=e.name||"console",this.stderrLevels=this._stringArrayToSet(e.stderrLevels),this.consoleWarnLevels=this._stringArrayToSet(e.consoleWarnLevels),this.eol=typeof e.eol=="string"?e.eol:t0.EOL,this.setMaxListeners(30)}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.stderrLevels[e[td]]){console._stderr?console._stderr.write(`${e[Pr]}${this.eol}`):console.error(e[Pr]),r&&r();return}else if(this.consoleWarnLevels[e[td]]){console._stderr?console._stderr.write(`${e[Pr]}${this.eol}`):console.warn(e[Pr]),r&&r();return}console._stdout?console._stdout.write(`${e[Pr]}${this.eol}`):console.log(e[Pr]),r&&r()}_stringArrayToSet(e,r){if(!e)return{};if(r=r||"Cannot make set from type other than Array of string elements",!Array.isArray(e))throw new Error(r);return e.reduce((n,i)=>{if(typeof i!="string")throw new Error(r);return n[i]=!0,n},{})}}});var Xi=_((Ji,id)=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.default=n0;function n0(t){return t&&typeof t.length=="number"&&t.length>=0&&t.length%1===0}id.exports=Ji.default});var od=_((Qi,sd)=>{"use strict";Object.defineProperty(Qi,"__esModule",{value:!0});Qi.default=function(t){return function(...e){var r=e.pop();return t.call(this,e,r)}};sd.exports=Qi.default});var ud=_($t=>{"use strict";Object.defineProperty($t,"__esModule",{value:!0});$t.fallback=ad;$t.wrap=ld;var i0=$t.hasQueueMicrotask=typeof queueMicrotask=="function"&&queueMicrotask,s0=$t.hasSetImmediate=typeof setImmediate=="function"&&setImmediate,o0=$t.hasNextTick=typeof process=="object"&&typeof process.nextTick=="function";function ad(t){setTimeout(t,0)}function ld(t){return(e,...r)=>t(()=>e(...r))}var yn;i0?yn=queueMicrotask:s0?yn=setImmediate:o0?yn=process.nextTick:yn=ad;$t.default=ld(yn)});var pd=_((es,hd)=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.default=d0;var a0=od(),l0=dd(a0),u0=ud(),c0=dd(u0),f0=or();function dd(t){return t&&t.__esModule?t:{default:t}}function d0(t){return(0,f0.isAsync)(t)?function(...e){let r=e.pop(),n=t.apply(this,e);return cd(n,r)}:(0,l0.default)(function(e,r){var n;try{n=t.apply(this,e)}catch(i){return r(i)}if(n&&typeof n.then=="function")return cd(n,r);r(null,n)})}function cd(t,e){return t.then(r=>{fd(e,null,r)},r=>{fd(e,r&&r.message?r:new Error(r))})}function fd(t,e,r){try{t(e,r)}catch(n){(0,c0.default)(i=>{throw i},n)}}hd.exports=es.default});var or=_(gt=>{"use strict";Object.defineProperty(gt,"__esModule",{value:!0});gt.isAsyncIterable=gt.isAsyncGenerator=gt.isAsync=void 0;var h0=pd(),p0=m0(h0);function m0(t){return t&&t.__esModule?t:{default:t}}function md(t){return t[Symbol.toStringTag]==="AsyncFunction"}function g0(t){return t[Symbol.toStringTag]==="AsyncGenerator"}function y0(t){return typeof t[Symbol.asyncIterator]=="function"}function b0(t){if(typeof t!="function")throw new Error("expected a function");return md(t)?(0,p0.default)(t):t}gt.default=b0;gt.isAsync=md;gt.isAsyncGenerator=g0;gt.isAsyncIterable=y0});var Cr=_((ts,gd)=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.default=_0;function _0(t,e=t.length){if(!e)throw new Error("arity is undefined");function r(...n){return typeof n[e-1]=="function"?t.apply(this,n):new Promise((i,s)=>{n[e-1]=(o,...a)=>{if(o)return s(o);i(a.length>1?a:a[0])},t.apply(this,n)})}return r}gd.exports=ts.default});var bd=_((rs,yd)=>{"use strict";Object.defineProperty(rs,"__esModule",{value:!0});var w0=Xi(),v0=Da(w0),T0=or(),S0=Da(T0),E0=Cr(),x0=Da(E0);function Da(t){return t&&t.__esModule?t:{default:t}}rs.default=(0,x0.default)((t,e,r)=>{var n=(0,v0.default)(e)?[]:{};t(e,(i,s,o)=>{(0,S0.default)(i)((a,...l)=>{l.length<2&&([l]=l),n[s]=l,o(a)})},i=>r(i,n))},3);yd.exports=rs.default});var La=_((ns,_d)=>{"use strict";Object.defineProperty(ns,"__esModule",{value:!0});ns.default=k0;function k0(t){function e(...r){if(t!==null){var n=t;t=null,n.apply(this,r)}}return Object.assign(e,t),e}_d.exports=ns.default});var vd=_((is,wd)=>{"use strict";Object.defineProperty(is,"__esModule",{value:!0});is.default=function(t){return t[Symbol.iterator]&&t[Symbol.iterator]()};wd.exports=is.default});var Ed=_((ss,Sd)=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.default=N0;var R0=Xi(),O0=Td(R0),M0=vd(),P0=Td(M0);function Td(t){return t&&t.__esModule?t:{default:t}}function C0(t){var e=-1,r=t.length;return function(){return++e<r?{value:t[e],key:e}:null}}function A0(t){var e=-1;return function(){var n=t.next();return n.done?null:(e++,{value:n.value,key:e})}}function I0(t){var e=t?Object.keys(t):[],r=-1,n=e.length;return function i(){var s=e[++r];return s==="__proto__"?i():r<n?{value:t[s],key:s}:null}}function N0(t){if((0,O0.default)(t))return C0(t);var e=(0,P0.default)(t);return e?A0(e):I0(t)}Sd.exports=ss.default});var ja=_((os,xd)=>{"use strict";Object.defineProperty(os,"__esModule",{value:!0});os.default=$0;function $0(t){return function(...e){if(t===null)throw new Error("Callback was already called.");var r=t;t=null,r.apply(this,e)}}xd.exports=os.default});var ls=_((as,kd)=>{"use strict";Object.defineProperty(as,"__esModule",{value:!0});var D0={};as.default=D0;kd.exports=as.default});var Od=_((us,Rd)=>{"use strict";Object.defineProperty(us,"__esModule",{value:!0});us.default=F0;var L0=ls(),j0=q0(L0);function q0(t){return t&&t.__esModule?t:{default:t}}function F0(t,e,r,n){let i=!1,s=!1,o=!1,a=0,l=0;function u(){a>=e||o||i||(o=!0,t.next().then(({value:f,done:h})=>{if(!(s||i)){if(o=!1,h){i=!0,a<=0&&n(null);return}a++,r(f,l,d),l++,u()}}).catch(c))}function d(f,h){if(a-=1,!s){if(f)return c(f);if(f===!1){i=!0,s=!0;return}if(h===j0.default||i&&a<=0)return i=!0,n(null);u()}}function c(f){s||(o=!1,i=!0,n(f))}u()}Rd.exports=us.default});var Ad=_((cs,Cd)=>{"use strict";Object.defineProperty(cs,"__esModule",{value:!0});var U0=La(),z0=bn(U0),B0=Ed(),W0=bn(B0),Y0=ja(),H0=bn(Y0),Md=or(),V0=Od(),Pd=bn(V0),G0=ls(),K0=bn(G0);function bn(t){return t&&t.__esModule?t:{default:t}}cs.default=t=>(e,r,n)=>{if(n=(0,z0.default)(n),t<=0)throw new RangeError("concurrency limit cannot be less than 1");if(!e)return n(null);if((0,Md.isAsyncGenerator)(e))return(0,Pd.default)(e,t,r,n);if((0,Md.isAsyncIterable)(e))return(0,Pd.default)(e[Symbol.asyncIterator](),t,r,n);var i=(0,W0.default)(e),s=!1,o=!1,a=0,l=!1;function u(c,f){if(!o)if(a-=1,c)s=!0,n(c);else if(c===!1)s=!0,o=!0;else{if(f===K0.default||s&&a<=0)return s=!0,n(null);l||d()}}function d(){for(l=!0;a<t&&!s;){var c=i();if(c===null){s=!0,a<=0&&n(null);return}a+=1,r(c.value,c.key,(0,H0.default)(u))}l=!1}d()};Cd.exports=cs.default});var Fa=_((fs,Id)=>{"use strict";Object.defineProperty(fs,"__esModule",{value:!0});var Z0=Ad(),J0=qa(Z0),X0=or(),Q0=qa(X0),ew=Cr(),tw=qa(ew);function qa(t){return t&&t.__esModule?t:{default:t}}function rw(t,e,r,n){return(0,J0.default)(e)(t,(0,Q0.default)(r),n)}fs.default=(0,tw.default)(rw,4);Id.exports=fs.default});var Dd=_((ds,$d)=>{"use strict";Object.defineProperty(ds,"__esModule",{value:!0});var nw=Fa(),iw=Nd(nw),sw=Cr(),ow=Nd(sw);function Nd(t){return t&&t.__esModule?t:{default:t}}function aw(t,e,r){return(0,iw.default)(t,1,e,r)}ds.default=(0,ow.default)(aw,3);$d.exports=ds.default});var qd=_((hs,jd)=>{"use strict";Object.defineProperty(hs,"__esModule",{value:!0});hs.default=dw;var lw=bd(),uw=Ld(lw),cw=Dd(),fw=Ld(cw);function Ld(t){return t&&t.__esModule?t:{default:t}}function dw(t,e){return(0,uw.default)(fw.default,t,e)}jd.exports=hs.default});var Ua=_((WR,Ud)=>{"use strict";Ud.exports=yt;var ps=Pt().codes,hw=ps.ERR_METHOD_NOT_IMPLEMENTED,pw=ps.ERR_MULTIPLE_CALLBACK,mw=ps.ERR_TRANSFORM_ALREADY_TRANSFORMING,gw=ps.ERR_TRANSFORM_WITH_LENGTH_0,ms=ir();xr()(yt,ms);function yw(t,e){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(n===null)return this.emit("error",new pw);r.writechunk=null,r.writecb=null,e!=null&&this.push(e),n(t);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function yt(t){if(!(this instanceof yt))return new yt(t);ms.call(this,t),this._transformState={afterTransform:yw.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&(typeof t.transform=="function"&&(this._transform=t.transform),typeof t.flush=="function"&&(this._flush=t.flush)),this.on("prefinish",bw)}function bw(){var t=this;typeof this._flush=="function"&&!this._readableState.destroyed?this._flush(function(e,r){Fd(t,e,r)}):Fd(this,null,null)}yt.prototype.push=function(t,e){return this._transformState.needTransform=!1,ms.prototype.push.call(this,t,e)};yt.prototype._transform=function(t,e,r){r(new hw("_transform()"))};yt.prototype._write=function(t,e,r){var n=this._transformState;if(n.writecb=r,n.writechunk=t,n.writeencoding=e,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}};yt.prototype._read=function(t){var e=this._transformState;e.writechunk!==null&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0};yt.prototype._destroy=function(t,e){ms.prototype._destroy.call(this,t,function(r){e(r)})};function Fd(t,e,r){if(e)return t.emit("error",e);if(r!=null&&t.push(r),t._writableState.length)throw new gw;if(t._transformState.transforming)throw new mw;return t.push(null)}});var Wd=_((YR,Bd)=>{"use strict";Bd.exports=_n;var zd=Ua();xr()(_n,zd);function _n(t){if(!(this instanceof _n))return new _n(t);zd.call(this,t)}_n.prototype._transform=function(t,e,r){r(null,t)}});var Kd=_((HR,Gd)=>{"use strict";var za;function _w(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}var Vd=Pt().codes,ww=Vd.ERR_MISSING_ARGS,vw=Vd.ERR_STREAM_DESTROYED;function Yd(t){if(t)throw t}function Tw(t){return t.setHeader&&typeof t.abort=="function"}function Sw(t,e,r,n){n=_w(n);var i=!1;t.on("close",function(){i=!0}),za===void 0&&(za=Fi()),za(t,{readable:e,writable:r},function(o){if(o)return n(o);i=!0,n()});var s=!1;return function(o){if(!i&&!s){if(s=!0,Tw(t))return t.abort();if(typeof t.destroy=="function")return t.destroy();n(o||new vw("pipe"))}}}function Hd(t){t()}function Ew(t,e){return t.pipe(e)}function xw(t){return!t.length||typeof t[t.length-1]!="function"?Yd:t.pop()}function kw(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];var n=xw(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new ww("streams");var i,s=e.map(function(o,a){var l=a<e.length-1,u=a>0;return Sw(o,l,u,function(d){i||(i=d),d&&s.forEach(Hd),!l&&(s.forEach(Hd),n(i))})});return e.reduce(Ew)}Gd.exports=kw});var Ar=_((He,vn)=>{var wn=require("stream");process.env.READABLE_STREAM==="disable"&&wn?(vn.exports=wn.Readable,Object.assign(vn.exports,wn),vn.exports.Stream=wn):(He=vn.exports=Oa(),He.Stream=wn||He,He.Readable=He,He.Writable=Gi(),He.Duplex=ir(),He.Transform=Ua(),He.PassThrough=Wd(),He.finished=Fi(),He.pipeline=Kd())});var Xd=_((VR,Jd)=>{var Ir=[],Tn=[],Ba=function(){};function Ya(t){return~Ir.indexOf(t)?!1:(Ir.push(t),!0)}function Ha(t){Ba=t}function Rw(t){for(var e=[],r=0;r<Ir.length;r++){if(Ir[r].async){e.push(Ir[r]);continue}if(Ir[r](t))return!0}return e.length?new Promise(function(i){Promise.all(e.map(function(o){return o(t)})).then(function(o){i(o.some(Boolean))})}):!1}function Va(t){return~Tn.indexOf(t)?!1:(Tn.push(t),!0)}function Wa(){Ba.apply(Ba,arguments)}function Zd(t){for(var e=0;e<Tn.length;e++)t=Tn[e].apply(Tn[e],arguments);return t}function Ga(t,e){var r=Object.prototype.hasOwnProperty;for(var n in e)r.call(e,n)&&(t[n]=e[n]);return t}function Ow(t){return t.enabled=!1,t.modify=Va,t.set=Ha,t.use=Ya,Ga(function(){return!1},t)}function Mw(t){function e(){var r=Array.prototype.slice.call(arguments,0);return Wa.call(Wa,t,Zd(r,t)),!0}return t.enabled=!0,t.modify=Va,t.set=Ha,t.use=Ya,Ga(e,t)}Jd.exports=function(e){return e.introduce=Ga,e.enabled=Rw,e.process=Zd,e.modify=Va,e.write=Wa,e.nope=Ow,e.yep=Mw,e.set=Ha,e.use=Ya,e}});var eh=_((GR,Qd)=>{var Pw=Xd(),Cw=Pw(function t(e,r){return r=r||{},r.namespace=e,r.prod=!0,r.dev=!1,r.force||t.force?t.yep(r):t.nope(r)});Qd.exports=Cw});var Sn=_((KR,th)=>{th.exports=eh()});var nh=_((ZR,rh)=>{"use strict";var Ka=require("fs"),{StringDecoder:Aw}=require("string_decoder"),{Stream:Iw}=Ar();function Nw(){}rh.exports=(t,e)=>{let r=Buffer.alloc(65536),n=new Aw("utf8"),i=new Iw,s="",o=0,a=0;return t.start===-1&&delete t.start,i.readable=!0,i.destroy=()=>{i.destroyed=!0,i.emit("end"),i.emit("close")},Ka.open(t.file,"a+","0644",(l,u)=>{if(l){e?e(l):i.emit("error",l),i.destroy();return}(function d(){if(i.destroyed){Ka.close(u,Nw);return}return Ka.read(u,r,0,r.length,o,(c,f)=>{if(c){e?e(c):i.emit("error",c),i.destroy();return}if(!f)return s&&((t.start==null||a>t.start)&&(e?e(null,s):i.emit("line",s)),a++,s=""),setTimeout(d,1e3);let h=n.write(r.slice(0,f));e||i.emit("data",h),h=(s+h).split(/\n+/);let p=h.length-1,g=0;for(;g<p;g++)(t.start==null||a>t.start)&&(e?e(null,h[g]):i.emit("line",h[g])),a++;return s=h[p],o+=f,d()})})()}),e?i.destroy:i}});var oh=_((XR,sh)=>{"use strict";var bt=require("fs"),Me=require("path"),$w=qd(),Dw=require("zlib"),{MESSAGE:Lw}=Te(),{Stream:jw,PassThrough:ih}=Ar(),qw=sr(),Xe=Sn()("winston:file"),Fw=require("os"),Uw=nh();sh.exports=class extends qw{constructor(e={}){super(e),this.name=e.name||"file";function r(n,...i){i.slice(1).forEach(s=>{if(e[s])throw new Error(`Cannot set ${s} and ${n} together`)})}if(this._stream=new ih,this._stream.setMaxListeners(30),this._onError=this._onError.bind(this),e.filename||e.dirname)r("filename or dirname","stream"),this._basename=this.filename=e.filename?Me.basename(e.filename):"winston.log",this.dirname=e.dirname||Me.dirname(e.filename),this.options=e.options||{flags:"a"};else if(e.stream)console.warn("options.stream will be removed in winston@4. Use winston.transports.Stream"),r("stream","filename","maxsize"),this._dest=this._stream.pipe(this._setupStream(e.stream)),this.dirname=Me.dirname(this._dest.path);else throw new Error("Cannot log to file without filename or stream.");this.maxsize=e.maxsize||null,this.rotationFormat=e.rotationFormat||!1,this.zippedArchive=e.zippedArchive||!1,this.maxFiles=e.maxFiles||null,this.eol=typeof e.eol=="string"?e.eol:Fw.EOL,this.tailable=e.tailable||!1,this.lazy=e.lazy||!1,this._size=0,this._pendingSize=0,this._created=0,this._drain=!1,this._opening=!1,this._ending=!1,this._fileExist=!1,this.dirname&&this._createLogDirIfNotExist(this.dirname),this.lazy||this.open()}finishIfEnding(){this._ending&&(this._opening?this.once("open",()=>{this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())}):(this._stream.once("finish",()=>this.emit("finish")),setImmediate(()=>this._stream.end())))}log(e,r=()=>{}){if(this.silent)return r(),!0;if(this._drain){this._stream.once("drain",()=>{this._drain=!1,this.log(e,r)});return}if(this._rotate){this._stream.once("rotate",()=>{this._rotate=!1,this.log(e,r)});return}if(this.lazy){if(!this._fileExist){this._opening||this.open(),this.once("open",()=>{this._fileExist=!0,this.log(e,r)});return}if(this._needsNewFile(this._pendingSize)){this._dest.once("close",()=>{this._opening||this.open(),this.once("open",()=>{this.log(e,r)})});return}}let n=`${e[Lw]}${this.eol}`,i=Buffer.byteLength(n);function s(){if(this._size+=i,this._pendingSize-=i,Xe("logged %s %s",this._size,n),this.emit("logged",e),!this._rotate&&!this._opening&&this._needsNewFile()){if(this.lazy){this._endStream(()=>{this.emit("fileclosed")});return}this._rotate=!0,this._endStream(()=>this._rotateFile())}}this._pendingSize+=i,this._opening&&!this.rotatedWhileOpening&&this._needsNewFile(this._size+this._pendingSize)&&(this.rotatedWhileOpening=!0);let o=this._stream.write(n,s.bind(this));return o?r():(this._drain=!0,this._stream.once("drain",()=>{this._drain=!1,r()})),Xe("written",o,this._drain),this.finishIfEnding(),o}query(e,r){typeof e=="function"&&(r=e,e={}),e=c(e);let n=Me.join(this.dirname,this.filename),i="",s=[],o=0,a=bt.createReadStream(n,{encoding:"utf8"});a.on("error",f=>{if(a.readable&&a.destroy(),!!r)return f.code!=="ENOENT"?r(f):r(null,s)}),a.on("data",f=>{f=(i+f).split(/\n+/);let h=f.length-1,p=0;for(;p<h;p++)(!e.start||o>=e.start)&&l(f[p]),o++;i=f[h]}),a.on("close",()=>{i&&l(i,!0),e.order==="desc"&&(s=s.reverse()),r&&r(null,s)});function l(f,h){try{let p=JSON.parse(f);d(p)&&u(p)}catch(p){h||a.emit("error",p)}}function u(f){if(e.rows&&s.length>=e.rows&&e.order!=="desc"){a.readable&&a.destroy();return}e.fields&&(f=e.fields.reduce((h,p)=>(h[p]=f[p],h),{})),e.order==="desc"&&s.length>=e.rows&&s.shift(),s.push(f)}function d(f){if(!f||typeof f!="object")return;let h=new Date(f.timestamp);if(!(e.from&&h<e.from||e.until&&h>e.until||e.level&&e.level!==f.level))return!0}function c(f){return f=f||{},f.rows=f.rows||f.limit||10,f.start=f.start||0,f.until=f.until||new Date,typeof f.until!="object"&&(f.until=new Date(f.until)),f.from=f.from||f.until-24*60*60*1e3,typeof f.from!="object"&&(f.from=new Date(f.from)),f.order=f.order||"desc",f}}stream(e={}){let r=Me.join(this.dirname,this.filename),n=new jw,i={file:r,start:e.start};return n.destroy=Uw(i,(s,o)=>{if(s)return n.emit("error",s);try{n.emit("data",o),o=JSON.parse(o),n.emit("log",o)}catch(a){n.emit("error",a)}}),n}open(){this.filename&&(this._opening||(this._opening=!0,this.stat((e,r)=>{if(e)return this.emit("error",e);Xe("stat done: %s { size: %s }",this.filename,r),this._size=r,this._dest=this._createStream(this._stream),this._opening=!1,this.once("open",()=>{this._stream.eventNames().includes("rotate")?this._stream.emit("rotate"):this._rotate=!1})})))}stat(e){let r=this._getFile(),n=Me.join(this.dirname,r);bt.stat(n,(i,s)=>{if(i&&i.code==="ENOENT")return Xe("ENOENT\xA0ok",n),this.filename=r,e(null,0);if(i)return Xe(`err ${i.code} ${n}`),e(i);if(!s||this._needsNewFile(s.size))return this._incFile(()=>this.stat(e));this.filename=r,e(null,s.size)})}close(e){this._stream&&this._stream.end(()=>{e&&e(),this.emit("flush"),this.emit("closed")})}_needsNewFile(e){return e=e||this._size,this.maxsize&&e>=this.maxsize}_onError(e){this.emit("error",e)}_setupStream(e){return e.on("error",this._onError),e}_cleanupStream(e){return e.removeListener("error",this._onError),e.destroy(),e}_rotateFile(){this._incFile(()=>this.open())}_endStream(e=()=>{}){this._dest?(this._stream.unpipe(this._dest),this._dest.end(()=>{this._cleanupStream(this._dest),e()})):e()}_createStream(e){let r=Me.join(this.dirname,this.filename);Xe("create stream start",r,this.options);let n=bt.createWriteStream(r,this.options).on("error",i=>Xe(i)).on("close",()=>Xe("close",n.path,n.bytesWritten)).on("open",()=>{Xe("file open ok",r),this.emit("open",r),e.pipe(n),this.rotatedWhileOpening&&(this._stream=new ih,this._stream.setMaxListeners(30),this._rotateFile(),this.rotatedWhileOpening=!1,this._cleanupStream(n),e.end())});if(Xe("create stream ok",r),this.zippedArchive){let i=Dw.createGzip();return i.pipe(n),i}return n}_incFile(e){Xe("_incFile",this.filename);let r=Me.extname(this._basename),n=Me.basename(this._basename,r);this.tailable?this._checkMaxFilesTailable(r,n,e):(this._created+=1,this._checkMaxFilesIncrementing(r,n,e))}_getFile(){let e=Me.extname(this._basename),r=Me.basename(this._basename,e),n=this.rotationFormat?this.rotationFormat():this._created,i=!this.tailable&&this._created?`${r}${n}${e}`:`${r}${e}`;return this.zippedArchive&&!this.tailable?`${i}.gz`:i}_checkMaxFilesIncrementing(e,r,n){if(!this.maxFiles||this._created<this.maxFiles)return setImmediate(n);let i=this._created-this.maxFiles,s=i!==0?i:"",o=this.zippedArchive?".gz":"",a=`${r}${s}${e}${o}`,l=Me.join(this.dirname,a);bt.unlink(l,n)}_checkMaxFilesTailable(e,r,n){let i=[];if(!this.maxFiles)return;let s=this.zippedArchive?".gz":"";for(let o=this.maxFiles-1;o>1;o--)i.push(function(a,l){let u=`${r}${a-1}${e}${s}`,d=Me.join(this.dirname,u);bt.exists(d,c=>{if(!c)return l(null);u=`${r}${a}${e}${s}`,bt.rename(d,Me.join(this.dirname,u),l)})}.bind(this,o));$w(i,()=>{bt.rename(Me.join(this.dirname,`${r}${e}`),Me.join(this.dirname,`${r}1${e}${s}`),n)})}_createLogDirIfNotExist(e){bt.existsSync(e)||bt.mkdirSync(e,{recursive:!0})}}});var lh=_((eO,ah)=>{"use strict";var zw=require("http"),Bw=require("https"),{Stream:Ww}=Ar(),Yw=sr(),Hw=an();ah.exports=class extends Yw{constructor(e={}){super(e),this.options=e,this.name=e.name||"http",this.ssl=!!e.ssl,this.host=e.host||"localhost",this.port=e.port,this.auth=e.auth,this.path=e.path||"",this.agent=e.agent,this.headers=e.headers||{},this.headers["content-type"]="application/json",this.batch=e.batch||!1,this.batchInterval=e.batchInterval||5e3,this.batchCount=e.batchCount||10,this.batchOptions=[],this.batchTimeoutID=-1,this.batchCallback={},this.port||(this.port=this.ssl?443:80)}log(e,r){this._request(e,null,null,(n,i)=>{i&&i.statusCode!==200&&(n=new Error(`Invalid HTTP Status Code: ${i.statusCode}`)),n?this.emit("warn",n):this.emit("logged",e)}),r&&setImmediate(r)}query(e,r){typeof e=="function"&&(r=e,e={}),e={method:"query",params:this.normalizeQuery(e)};let n=e.params.auth||null;delete e.params.auth;let i=e.params.path||null;delete e.params.path,this._request(e,n,i,(s,o,a)=>{if(o&&o.statusCode!==200&&(s=new Error(`Invalid HTTP Status Code: ${o.statusCode}`)),s)return r(s);if(typeof a=="string")try{a=JSON.parse(a)}catch(l){return r(l)}r(null,a)})}stream(e={}){let r=new Ww;e={method:"stream",params:e};let n=e.params.path||null;delete e.params.path;let i=e.params.auth||null;delete e.params.auth;let s="",o=this._request(e,i,n);return r.destroy=()=>o.destroy(),o.on("data",a=>{a=(s+a).split(/\n+/);let l=a.length-1,u=0;for(;u<l;u++)try{r.emit("log",JSON.parse(a[u]))}catch(d){r.emit("error",d)}s=a[l]}),o.on("error",a=>r.emit("error",a)),r}_request(e,r,n,i){e=e||{},r=r||this.auth,n=n||this.path||"",this.batch?this._doBatch(e,i,r,n):this._doRequest(e,i,r,n)}_doBatch(e,r,n,i){if(this.batchOptions.push(e),this.batchOptions.length===1){let s=this;this.batchCallback=r,this.batchTimeoutID=setTimeout(function(){s.batchTimeoutID=-1,s._doBatchRequest(s.batchCallback,n,i)},this.batchInterval)}this.batchOptions.length===this.batchCount&&this._doBatchRequest(this.batchCallback,n,i)}_doBatchRequest(e,r,n){this.batchTimeoutID>0&&(clearTimeout(this.batchTimeoutID),this.batchTimeoutID=-1);let i=this.batchOptions.slice();this.batchOptions=[],this._doRequest(i,e,r,n)}_doRequest(e,r,n,i){let s=Object.assign({},this.headers);n&&n.bearer&&(s.Authorization=`Bearer ${n.bearer}`);let o=(this.ssl?Bw:zw).request({...this.options,method:"POST",host:this.host,port:this.port,path:`/${i.replace(/^\//,"")}`,headers:s,auth:n&&n.username&&n.password?`${n.username}:${n.password}`:"",agent:this.agent});o.on("error",r),o.on("response",a=>a.on("end",()=>r(null,a)).resume()),o.end(Buffer.from(Hw(e,this.options.replacer),"utf8"))}}});var Za=_((tO,uh)=>{"use strict";var st=t=>t!==null&&typeof t=="object"&&typeof t.pipe=="function";st.writable=t=>st(t)&&t.writable!==!1&&typeof t._write=="function"&&typeof t._writableState=="object";st.readable=t=>st(t)&&t.readable!==!1&&typeof t._read=="function"&&typeof t._readableState=="object";st.duplex=t=>st.writable(t)&&st.readable(t);st.transform=t=>st.duplex(t)&&typeof t._transform=="function";uh.exports=st});var fh=_((nO,ch)=>{"use strict";var Vw=Za(),{MESSAGE:Gw}=Te(),Kw=require("os"),Zw=sr();ch.exports=class extends Zw{constructor(e={}){if(super(e),!e.stream||!Vw(e.stream))throw new Error("options.stream is required.");this._stream=e.stream,this._stream.setMaxListeners(1/0),this.isObjectMode=e.stream._writableState.objectMode,this.eol=typeof e.eol=="string"?e.eol:Kw.EOL}log(e,r){if(setImmediate(()=>this.emit("logged",e)),this.isObjectMode){this._stream.write(e),r&&r();return}this._stream.write(`${e[Gw]}${this.eol}`),r&&r()}}});var dh=_(En=>{"use strict";Object.defineProperty(En,"Console",{configurable:!0,enumerable:!0,get(){return nd()}});Object.defineProperty(En,"File",{configurable:!0,enumerable:!0,get(){return oh()}});Object.defineProperty(En,"Http",{configurable:!0,enumerable:!0,get(){return lh()}});Object.defineProperty(En,"Stream",{configurable:!0,enumerable:!0,get(){return fh()}})});var ys=_(xn=>{"use strict";var gs=ia(),{configs:Ja}=Te();xn.cli=gs.levels(Ja.cli);xn.npm=gs.levels(Ja.npm);xn.syslog=gs.levels(Ja.syslog);xn.addColors=gs.levels});var ph=_((bs,hh)=>{"use strict";Object.defineProperty(bs,"__esModule",{value:!0});var Jw=Xi(),Xw=ar(Jw),Qw=ls(),ev=ar(Qw),tv=Fa(),rv=ar(tv),nv=La(),iv=ar(nv),sv=ja(),ov=ar(sv),av=or(),lv=ar(av),uv=Cr(),cv=ar(uv);function ar(t){return t&&t.__esModule?t:{default:t}}function fv(t,e,r){r=(0,iv.default)(r);var n=0,i=0,{length:s}=t,o=!1;s===0&&r(null);function a(l,u){l===!1&&(o=!0),o!==!0&&(l?r(l):(++i===s||u===ev.default)&&r(null))}for(;n<s;n++)e(t[n],n,(0,ov.default)(a))}function dv(t,e,r){return(0,rv.default)(t,1/0,e,r)}function hv(t,e,r){var n=(0,Xw.default)(t)?fv:dv;return n(t,(0,lv.default)(e),r)}bs.default=(0,cv.default)(hv,3);hh.exports=bs.default});var gh=_((_s,mh)=>{"use strict";Object.defineProperty(_s,"__esModule",{value:!0});_s.default=pv;function pv(t){return(e,r,n)=>t(e,n)}mh.exports=_s.default});var Ts=_((vs,yh)=>{"use strict";Object.defineProperty(vs,"__esModule",{value:!0});var mv=ph(),gv=ws(mv),yv=gh(),bv=ws(yv),_v=or(),wv=ws(_v),vv=Cr(),Tv=ws(vv);function ws(t){return t&&t.__esModule?t:{default:t}}function Sv(t,e,r){return(0,gv.default)(t,(0,bv.default)((0,wv.default)(e)),r)}vs.default=(0,Tv.default)(Sv,3);yh.exports=vs.default});var _h=_((oO,bh)=>{"use strict";var Ev=Object.prototype.toString;bh.exports=function(e){if(typeof e.displayName=="string"&&e.constructor.name)return e.displayName;if(typeof e.name=="string"&&e.name)return e.name;if(typeof e=="object"&&e.constructor&&typeof e.constructor.name=="string")return e.constructor.name;var r=e.toString(),n=Ev.call(e).slice(8,-1);return n==="Function"?r=r.substring(r.indexOf("(")+1,r.indexOf(")")):r=n,r||"anonymous"}});var Xa=_((aO,wh)=>{"use strict";var xv=_h();wh.exports=function(e){var r=0,n;function i(){return r||(r=1,n=e.apply(this,arguments),e=null),n}return i.displayName=xv(e),i}});var Qa=_(Rn=>{Rn.get=function(t){var e=Error.stackTraceLimit;Error.stackTraceLimit=1/0;var r={},n=Error.prepareStackTrace;Error.prepareStackTrace=function(s,o){return o},Error.captureStackTrace(r,t||Rn.get);var i=r.stack;return Error.prepareStackTrace=n,Error.stackTraceLimit=e,i};Rn.parse=function(t){if(!t.stack)return[];var e=this,r=t.stack.split(`
`).slice(1);return r.map(function(n){if(n.match(/^\s*[-]{4,}$/))return e._createParsedCallSite({fileName:n,lineNumber:null,functionName:null,typeName:null,methodName:null,columnNumber:null,native:null});var i=n.match(/at (?:(.+)\s+\()?(?:(.+?):(\d+)(?::(\d+))?|([^)]+))\)?/);if(i){var s=null,o=null,a=null,l=null,u=null,d=i[5]==="native";if(i[1]){a=i[1];var c=a.lastIndexOf(".");if(a[c-1]=="."&&c--,c>0){s=a.substr(0,c),o=a.substr(c+1);var f=s.indexOf(".Module");f>0&&(a=a.substr(f+1),s=s.substr(0,f))}l=null}o&&(l=s,u=o),o==="<anonymous>"&&(u=null,a=null);var h={fileName:i[2]||null,lineNumber:parseInt(i[3],10)||null,functionName:a,typeName:l,methodName:u,columnNumber:parseInt(i[4],10)||null,native:d};return e._createParsedCallSite(h)}}).filter(function(n){return!!n})};function kn(t){for(var e in t)this[e]=t[e]}var kv=["this","typeName","functionName","methodName","fileName","lineNumber","columnNumber","function","evalOrigin"],Rv=["topLevel","eval","native","constructor"];kv.forEach(function(t){kn.prototype[t]=null,kn.prototype["get"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});Rv.forEach(function(t){kn.prototype[t]=!1,kn.prototype["is"+t[0].toUpperCase()+t.substr(1)]=function(){return this[t]}});Rn._createParsedCallSite=function(t){return new kn(t)}});var el=_((cO,vh)=>{"use strict";var{Writable:Ov}=Ar();vh.exports=class extends Ov{constructor(e){if(super({objectMode:!0}),!e)throw new Error("ExceptionStream requires a TransportStream instance.");this.handleExceptions=!0,this.transport=e}_write(e,r,n){return e.exception?this.transport.log(e,n):(n(),!0)}}});var rl=_((dO,Eh)=>{"use strict";var Th=require("os"),Mv=Ts(),tl=Sn()("winston:exception"),Pv=Xa(),Sh=Qa(),Cv=el();Eh.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle exceptions");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._uncaughtException.bind(this),process.on("uncaughtException",this.catcher))}unhandle(){this.catcher&&(process.removeListener("uncaughtException",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`uncaughtException: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:Th.loadavg(),uptime:Th.uptime()}}getTrace(e){return(e?Sh.parse(e):Sh.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleExceptions=!0;let r=new Cv(e);this.handlers.set(e,r),this.logger.pipe(r)}}_uncaughtException(e){let r=this.getAllInfo(e),n=this._getExceptionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no exception handlers."),console.warn("winston: not exiting process."),i=!1);function o(){tl("doExit",i),tl("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);Mv(n,(a,l)=>{let u=Pv(l),d=a.transport||a;function c(f){return()=>{tl(f),u()}}d._ending=!0,d.once("finish",c("finished")),d.once("error",c("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getExceptionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleExceptions)}}});var il=_((pO,Rh)=>{"use strict";var xh=require("os"),Av=Ts(),nl=Sn()("winston:rejection"),Iv=Xa(),kh=Qa(),Nv=el();Rh.exports=class{constructor(e){if(!e)throw new Error("Logger is required to handle rejections");this.logger=e,this.handlers=new Map}handle(...e){e.forEach(r=>{if(Array.isArray(r))return r.forEach(n=>this._addHandler(n));this._addHandler(r)}),this.catcher||(this.catcher=this._unhandledRejection.bind(this),process.on("unhandledRejection",this.catcher))}unhandle(){this.catcher&&(process.removeListener("unhandledRejection",this.catcher),this.catcher=!1,Array.from(this.handlers.values()).forEach(e=>this.logger.unpipe(e)))}getAllInfo(e){let r=null;return e&&(r=typeof e=="string"?e:e.message),{error:e,level:"error",message:[`unhandledRejection: ${r||"(no error message)"}`,e&&e.stack||"  No stack trace"].join(`
`),stack:e&&e.stack,exception:!0,date:new Date().toString(),process:this.getProcessInfo(),os:this.getOsInfo(),trace:this.getTrace(e)}}getProcessInfo(){return{pid:process.pid,uid:process.getuid?process.getuid():null,gid:process.getgid?process.getgid():null,cwd:process.cwd(),execPath:process.execPath,version:process.version,argv:process.argv,memoryUsage:process.memoryUsage()}}getOsInfo(){return{loadavg:xh.loadavg(),uptime:xh.uptime()}}getTrace(e){return(e?kh.parse(e):kh.get()).map(n=>({column:n.getColumnNumber(),file:n.getFileName(),function:n.getFunctionName(),line:n.getLineNumber(),method:n.getMethodName(),native:n.isNative()}))}_addHandler(e){if(!this.handlers.has(e)){e.handleRejections=!0;let r=new Nv(e);this.handlers.set(e,r),this.logger.pipe(r)}}_unhandledRejection(e){let r=this.getAllInfo(e),n=this._getRejectionHandlers(),i=typeof this.logger.exitOnError=="function"?this.logger.exitOnError(e):this.logger.exitOnError,s;!n.length&&i&&(console.warn("winston: exitOnError cannot be true with no rejection handlers."),console.warn("winston: not exiting process."),i=!1);function o(){nl("doExit",i),nl("process._exiting",process._exiting),i&&!process._exiting&&(s&&clearTimeout(s),process.exit(1))}if(!n||n.length===0)return process.nextTick(o);Av(n,(a,l)=>{let u=Iv(l),d=a.transport||a;function c(f){return()=>{nl(f),u()}}d._ending=!0,d.once("finish",c("finished")),d.once("error",c("error"))},()=>i&&o()),this.logger.log(r),i&&(s=setTimeout(o,3e3))}_getRejectionHandlers(){return this.logger.transports.filter(e=>(e.transport||e).handleRejections)}}});var Mh=_((gO,Oh)=>{"use strict";Oh.exports=class{constructor(e){if(!e)throw new Error("Logger is required for profiling.");this.logger=e,this.start=Date.now()}done(...e){typeof e[e.length-1]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),e.pop());let r=typeof e[e.length-1]=="object"?e.pop():{};return r.level=r.level||"info",r.durationMs=Date.now()-this.start,this.logger.write(r)}}});var ol=_((yO,Ih)=>{"use strict";var{Stream:$v,Transform:Dv}=Ar(),Ph=Ts(),{LEVEL:ot,SPLAT:Ch}=Te(),Ah=Za(),Lv=rl(),jv=il(),qv=Na(),Fv=Mh(),{warn:Uv}=sa(),zv=ys(),Bv=/%[scdjifoO%]/g,Ss=class extends Dv{constructor(e){super({objectMode:!0}),this.configure(e)}child(e){let r=this;return Object.create(r,{write:{value:function(n){let i=Object.assign({},e,n);n instanceof Error&&(i.stack=n.stack,i.message=n.message),r.write(i)}}})}configure({silent:e,format:r,defaultMeta:n,levels:i,level:s="info",exitOnError:o=!0,transports:a,colors:l,emitErrs:u,formatters:d,padLevels:c,rewriters:f,stripColors:h,exceptionHandlers:p,rejectionHandlers:g}={}){if(this.transports.length&&this.clear(),this.silent=e,this.format=r||this.format||Qo()(),this.defaultMeta=n||null,this.levels=i||this.levels||zv.npm.levels,this.level=s,this.exceptions&&this.exceptions.unhandle(),this.rejections&&this.rejections.unhandle(),this.exceptions=new Lv(this),this.rejections=new jv(this),this.profilers={},this.exitOnError=o,a&&(a=Array.isArray(a)?a:[a],a.forEach(m=>this.add(m))),l||u||d||c||f||h)throw new Error(["{ colors, emitErrs, formatters, padLevels, rewriters, stripColors } were removed in winston@3.0.0.","Use a custom winston.format(function) instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`));p&&this.exceptions.handle(p),g&&this.rejections.handle(g)}isLevelEnabled(e){let r=sl(this.levels,e);if(r===null)return!1;let n=sl(this.levels,this.level);return n===null?!1:!this.transports||this.transports.length===0?n>=r:this.transports.findIndex(s=>{let o=sl(this.levels,s.level);return o===null&&(o=n),o>=r})!==-1}log(e,r,...n){if(arguments.length===1)return e[ot]=e.level,this._addDefaultMeta(e),this.write(e),this;if(arguments.length===2)return r&&typeof r=="object"?(r[ot]=r.level=e,this._addDefaultMeta(r),this.write(r),this):(r={[ot]:e,level:e,message:r},this._addDefaultMeta(r),this.write(r),this);let[i]=n;if(typeof i=="object"&&i!==null&&!(r&&r.match&&r.match(Bv))){let o=Object.assign({},this.defaultMeta,i,{[ot]:e,[Ch]:n,level:e,message:r});return i.message&&(o.message=`${o.message} ${i.message}`),i.stack&&(o.stack=i.stack),this.write(o),this}return this.write(Object.assign({},this.defaultMeta,{[ot]:e,[Ch]:n,level:e,message:r})),this}_transform(e,r,n){if(this.silent)return n();e[ot]||(e[ot]=e.level),!this.levels[e[ot]]&&this.levels[e[ot]]!==0&&console.error("[winston] Unknown logger level: %s",e[ot]),this._readableState.pipes||console.error("[winston] Attempt to write logs with no transports, which can increase memory usage: %j",e);try{this.push(this.format.transform(e,this.format.options))}finally{this._writableState.sync=!1,n()}}_final(e){let r=this.transports.slice();Ph(r,(n,i)=>{if(!n||n.finished)return setImmediate(i);n.once("finish",i),n.end()},e)}add(e){let r=!Ah(e)||e.log.length>2?new qv({transport:e}):e;if(!r._writableState||!r._writableState.objectMode)throw new Error("Transports must WritableStreams in objectMode. Set { objectMode: true }.");return this._onEvent("error",r),this._onEvent("warn",r),this.pipe(r),e.handleExceptions&&this.exceptions.handle(),e.handleRejections&&this.rejections.handle(),this}remove(e){if(!e)return this;let r=e;return(!Ah(e)||e.log.length>2)&&(r=this.transports.filter(n=>n.transport===e)[0]),r&&this.unpipe(r),this}clear(){return this.unpipe(),this}close(){return this.exceptions.unhandle(),this.rejections.unhandle(),this.clear(),this.emit("close"),this}setLevels(){Uv.deprecated("setLevels")}query(e,r){typeof e=="function"&&(r=e,e={}),e=e||{};let n={},i=Object.assign({},e.query||{});function s(a,l){e.query&&typeof a.formatQuery=="function"&&(e.query=a.formatQuery(i)),a.query(e,(u,d)=>{if(u)return l(u);typeof a.formatResults=="function"&&(d=a.formatResults(d,e.format)),l(null,d)})}function o(a,l){s(a,(u,d)=>{l&&(d=u||d,d&&(n[a.name]=d),l()),l=null})}Ph(this.transports.filter(a=>!!a.query),o,()=>r(null,n))}stream(e={}){let r=new $v,n=[];return r._streams=n,r.destroy=()=>{let i=n.length;for(;i--;)n[i].destroy()},this.transports.filter(i=>!!i.stream).forEach(i=>{let s=i.stream(e);s&&(n.push(s),s.on("log",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("log",o)}),s.on("error",o=>{o.transport=o.transport||[],o.transport.push(i.name),r.emit("error",o)}))}),r}startTimer(){return new Fv(this)}profile(e,...r){let n=Date.now();if(this.profilers[e]){let i=this.profilers[e];delete this.profilers[e],typeof r[r.length-2]=="function"&&(console.warn("Callback function no longer supported as of winston@3.0.0"),r.pop());let s=typeof r[r.length-1]=="object"?r.pop():{};return s.level=s.level||"info",s.durationMs=n-i,s.message=s.message||e,this.write(s)}return this.profilers[e]=n,this}handleExceptions(...e){console.warn("Deprecated: .handleExceptions() will be removed in winston@4. Use .exceptions.handle()"),this.exceptions.handle(...e)}unhandleExceptions(...e){console.warn("Deprecated: .unhandleExceptions() will be removed in winston@4. Use .exceptions.unhandle()"),this.exceptions.unhandle(...e)}cli(){throw new Error(["Logger.cli() was removed in winston@3.0.0","Use a custom winston.formats.cli() instead.","See: https://github.com/winstonjs/winston/tree/master/UPGRADE-3.0.md"].join(`
`))}_onEvent(e,r){function n(i){e==="error"&&!this.transports.includes(r)&&this.add(r),this.emit(e,i,r)}r["__winston"+e]||(r["__winston"+e]=n.bind(this),r.on(e,r["__winston"+e]))}_addDefaultMeta(e){this.defaultMeta&&Object.assign(e,this.defaultMeta)}};function sl(t,e){let r=t[e];return!r&&r!==0?null:r}Object.defineProperty(Ss.prototype,"transports",{configurable:!1,enumerable:!0,get(){let{pipes:t}=this._readableState;return Array.isArray(t)?t:[t].filter(Boolean)}});Ih.exports=Ss});var al=_((bO,Nh)=>{"use strict";var{LEVEL:Wv}=Te(),Yv=ys(),Hv=ol(),Vv=Sn()("winston:create-logger");function Gv(t){return"is"+t.charAt(0).toUpperCase()+t.slice(1)+"Enabled"}Nh.exports=function(t={}){t.levels=t.levels||Yv.npm.levels;class e extends Hv{constructor(i){super(i)}}let r=new e(t);return Object.keys(t.levels).forEach(function(n){if(Vv('Define prototype method for "%s"',n),n==="log"){console.warn('Level "log" not defined: conflicts with the method "log". Use a different level name.');return}e.prototype[n]=function(...i){let s=this||r;if(i.length===1){let[o]=i,a=o&&o.message&&o||{message:o};return a.level=a[Wv]=n,s._addDefaultMeta(a),s.write(a),this||r}return i.length===0?(s.log(n,""),s):s.log(n,...i)},e.prototype[Gv(n)]=function(){return(this||r).isLevelEnabled(n)}}),r}});var Dh=_((wO,$h)=>{"use strict";var Kv=al();$h.exports=class{constructor(e={}){this.loggers=new Map,this.options=e}add(e,r){if(!this.loggers.has(e)){r=Object.assign({},r||this.options);let n=r.transports||this.options.transports;n?r.transports=Array.isArray(n)?n.slice():[n]:r.transports=[];let i=Kv(r);i.on("close",()=>this._delete(e)),this.loggers.set(e,i)}return this.loggers.get(e)}get(e,r){return this.add(e,r)}has(e){return!!this.loggers.has(e)}close(e){if(e)return this._removeLogger(e);this.loggers.forEach((r,n)=>this._removeLogger(n))}_removeLogger(e){if(!this.loggers.has(e))return;this.loggers.get(e).close(),this._delete(e)}_delete(e){this.loggers.delete(e)}}});var jh=_(ue=>{"use strict";var Lh=ia(),{warn:On}=sa();ue.version=tf().version;ue.transports=dh();ue.config=ys();ue.addColors=Lh.levels;ue.format=Lh.format;ue.createLogger=al();ue.Logger=ol();ue.ExceptionHandler=rl();ue.RejectionHandler=il();ue.Container=Dh();ue.Transport=sr();ue.loggers=new ue.Container;var _t=ue.createLogger();Object.keys(ue.config.npm.levels).concat(["log","query","stream","add","remove","clear","profile","startTimer","handleExceptions","unhandleExceptions","handleRejections","unhandleRejections","configure","child"]).forEach(t=>ue[t]=(...e)=>_t[t](...e));Object.defineProperty(ue,"level",{get(){return _t.level},set(t){_t.level=t}});Object.defineProperty(ue,"exceptions",{get(){return _t.exceptions}});["exitOnError"].forEach(t=>{Object.defineProperty(ue,t,{get(){return _t[t]},set(e){_t[t]=e}})});Object.defineProperty(ue,"default",{get(){return{exceptionHandlers:_t.exceptionHandlers,rejectionHandlers:_t.rejectionHandlers,transports:_t.transports}}});On.deprecated(ue,"setLevels");On.forFunctions(ue,"useFormat",["cli"]);On.forProperties(ue,"useFormat",["padLevels","stripColors"]);On.forFunctions(ue,"deprecated",["addRewriter","addFilter","clone","extend"]);On.forProperties(ue,"deprecated",["emitErrs","levelLength"])});var Fh=_(qh=>{"use strict";Object.defineProperty(qh,"__esModule",{value:!0})});var ul=_(Es=>{"use strict";Object.defineProperty(Es,"__esModule",{value:!0});Es.Failcode=void 0;Es.Failcode={TYPE_INCORRECT:"TYPE_INCORRECT",VALUE_INCORRECT:"VALUE_INCORRECT",KEY_INCORRECT:"KEY_INCORRECT",CONTENT_INCORRECT:"CONTENT_INCORRECT",ARGUMENT_INCORRECT:"ARGUMENT_INCORRECT",RETURN_INCORRECT:"RETURN_INCORRECT",CONSTRAINT_FAILED:"CONSTRAINT_FAILED",PROPERTY_MISSING:"PROPERTY_MISSING",PROPERTY_PRESENT:"PROPERTY_PRESENT",NOTHING_EXPECTED:"NOTHING_EXPECTED"}});var Dr=_($r=>{"use strict";var Jv=$r&&$r.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(n[s]=i[s])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty($r,"__esModule",{value:!0});$r.ValidationError=void 0;var Xv=function(t){Jv(e,t);function e(r){var n=t.call(this,r.message)||this;return n.name="ValidationError",n.code=r.code,r.details!==void 0&&(n.details=r.details),Object.setPrototypeOf(n,e.prototype),n}return e}(Error);$r.ValidationError=Xv});var Mn=_(cl=>{"use strict";Object.defineProperty(cl,"__esModule",{value:!0});var xs=function(t){return function(e){switch(e.tag){case"literal":return'"'.concat(String(e.value),'"');case"string":return"string";case"brand":return e.brand;case"constraint":return e.name||xs(t)(e.underlying);case"union":return e.alternatives.map(xs(t)).join(" | ");case"intersect":return e.intersectees.map(xs(t)).join(" & ");default:break}return"`${".concat(qe(!1,t)(e),"}`")}},ks=function(t){return function(e){switch(e.tag){case"literal":return String(e.value);case"brand":return"${".concat(e.brand,"}");case"constraint":return e.name?"${".concat(e.name,"}"):ks(t)(e.underlying);case"union":if(e.alternatives.length===1){var r=e.alternatives[0];return ks(t)(r.reflect)}break;case"intersect":if(e.intersectees.length===1){var r=e.intersectees[0];return ks(t)(r.reflect)}break;default:break}return"${".concat(qe(!1,t)(e),"}")}},qe=function(t,e){return function(r){var n=function(u){return t?"(".concat(u,")"):u};if(e.has(r))return n("CIRCULAR ".concat(r.tag));e.add(r);try{switch(r.tag){case"unknown":case"never":case"void":case"boolean":case"number":case"bigint":case"string":case"symbol":case"function":return r.tag;case"literal":{var i=r.value;return typeof i=="string"?'"'.concat(i,'"'):String(i)}case"template":{if(r.strings.length===0)return'""';if(r.strings.length===1)return'"'.concat(r.strings[0],'"');if(r.strings.length===2&&r.strings.every(function(u){return u===""})){var s=r.runtypes[0];return xs(e)(s.reflect)}var o=!1,a=r.strings.reduce(function(u,d,c){var f=u+d,h=r.runtypes[c];if(h){var p=ks(e)(h.reflect);return!o&&p.startsWith("$")&&(o=!0),f+p}else return f},"");return o?"`".concat(a,"`"):'"'.concat(a,'"')}case"array":return"".concat(Uh(r)).concat(qe(!0,e)(r.element),"[]");case"dictionary":return"{ [_: ".concat(r.key,"]: ").concat(qe(!1,e)(r.value)," }");case"record":{var l=Object.keys(r.fields);return l.length?"{ ".concat(l.map(function(u){return"".concat(Uh(r)).concat(u).concat(Qv(r,u),": ").concat(r.fields[u].tag==="optional"?qe(!1,e)(r.fields[u].underlying):qe(!1,e)(r.fields[u]),";")}).join(" ")," }"):"{}"}case"tuple":return"[".concat(r.components.map(qe(!1,e)).join(", "),"]");case"union":return n("".concat(r.alternatives.map(qe(!0,e)).join(" | ")));case"intersect":return n("".concat(r.intersectees.map(qe(!0,e)).join(" & ")));case"optional":return qe(t,e)(r.underlying)+" | undefined";case"constraint":return r.name||qe(t,e)(r.underlying);case"instanceof":return r.ctor.name;case"brand":return qe(t,e)(r.entity)}}finally{e.delete(r)}throw Error("impossible")}};cl.default=qe(!1,new Set);function Qv(t,e){var r=t.isPartial,n=t.fields;return r||e!==void 0&&n[e].tag==="optional"?"?":""}function Uh(t){var e=t.isReadonly;return e?"readonly ":""}});var de=_(oe=>{"use strict";var fl=oe&&oe.__assign||function(){return fl=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},fl.apply(this,arguments)};Object.defineProperty(oe,"__esModule",{value:!0});oe.FAILURE=oe.SUCCESS=oe.enumerableKeysOf=oe.typeOf=oe.hasKey=void 0;var at=ul(),lr=Mn();function eT(t,e){return typeof e=="object"&&e!==null&&t in e}oe.hasKey=eT;var tT=function(t){var e,r,n;return typeof t=="object"?t===null?"null":Array.isArray(t)?"array":((e=t.constructor)===null||e===void 0?void 0:e.name)==="Object"?"object":(n=(r=t.constructor)===null||r===void 0?void 0:r.name)!==null&&n!==void 0?n:typeof t:typeof t};oe.typeOf=tT;var rT=function(t){return typeof t=="object"&&t!==null?Reflect.ownKeys(t).filter(function(e){var r,n;return(n=(r=t.propertyIsEnumerable)===null||r===void 0?void 0:r.call(t,e))!==null&&n!==void 0?n:!0}):[]};oe.enumerableKeysOf=rT;function nT(t){return{success:!0,value:t}}oe.SUCCESS=nT;oe.FAILURE=Object.assign(function(t,e,r){return fl({success:!1,code:t,message:e},r?{details:r}:{})},{TYPE_INCORRECT:function(t,e){var r="Expected ".concat(t.tag==="template"?"string ".concat((0,lr.default)(t)):(0,lr.default)(t),", but was ").concat((0,oe.typeOf)(e));return(0,oe.FAILURE)(at.Failcode.TYPE_INCORRECT,r)},VALUE_INCORRECT:function(t,e,r){return(0,oe.FAILURE)(at.Failcode.VALUE_INCORRECT,"Expected ".concat(t," ").concat(String(e),", but was ").concat(String(r)))},KEY_INCORRECT:function(t,e,r){return(0,oe.FAILURE)(at.Failcode.KEY_INCORRECT,"Expected ".concat((0,lr.default)(t)," key to be ").concat((0,lr.default)(e),", but was ").concat((0,oe.typeOf)(r)))},CONTENT_INCORRECT:function(t,e){var r=JSON.stringify(e,null,2).replace(/^ *null,\n/gm,""),n=`Validation failed:
`.concat(r,`.
Object should match `).concat((0,lr.default)(t));return(0,oe.FAILURE)(at.Failcode.CONTENT_INCORRECT,n,e)},ARGUMENT_INCORRECT:function(t){return(0,oe.FAILURE)(at.Failcode.ARGUMENT_INCORRECT,t)},RETURN_INCORRECT:function(t){return(0,oe.FAILURE)(at.Failcode.RETURN_INCORRECT,t)},CONSTRAINT_FAILED:function(t,e){var r=e?": ".concat(e):"";return(0,oe.FAILURE)(at.Failcode.CONSTRAINT_FAILED,"Failed constraint check for ".concat((0,lr.default)(t)).concat(r))},PROPERTY_MISSING:function(t){var e="Expected ".concat((0,lr.default)(t),", but was missing");return(0,oe.FAILURE)(at.Failcode.PROPERTY_MISSING,e)},PROPERTY_PRESENT:function(t){var e="Expected nothing, but was ".concat((0,oe.typeOf)(t));return(0,oe.FAILURE)(at.Failcode.PROPERTY_PRESENT,e)},NOTHING_EXPECTED:function(t){var e="Expected nothing, but was ".concat((0,oe.typeOf)(t));return(0,oe.FAILURE)(at.Failcode.NOTHING_EXPECTED,e)}})});var zh=_(Dt=>{"use strict";var iT=Dt&&Dt.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},sT=Dt&&Dt.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Dt,"__esModule",{value:!0});Dt.Contract=void 0;var oT=Dr(),aT=de();function lT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length-1,n=t.slice(0,r),i=t[r];return{enforce:function(s){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(o.length<n.length){var l="Expected ".concat(n.length," arguments but only received ").concat(o.length),u=aT.FAILURE.ARGUMENT_INCORRECT(l);throw new oT.ValidationError(u)}for(var d=0;d<n.length;d++)n[d].check(o[d]);return i.check(s.apply(void 0,sT([],iT(o),!1)))}}}}Dt.Contract=lT});var Yh=_(Lt=>{"use strict";var uT=Lt&&Lt.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},cT=Lt&&Lt.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Lt,"__esModule",{value:!0});Lt.AsyncContract=void 0;var Bh=Dr(),Wh=de();function fT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.length-1,n=t.slice(0,r),i=t[r];return{enforce:function(s){return function(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];if(o.length<n.length){var l="Expected ".concat(n.length," arguments but only received ").concat(o.length),u=Wh.FAILURE.ARGUMENT_INCORRECT(l);throw new Bh.ValidationError(u)}for(var d=0;d<n.length;d++)n[d].check(o[d]);var c=s.apply(void 0,cT([],uT(o),!1));if(!(c instanceof Promise)){var l="Expected function to return a promise, but instead got ".concat(c),u=Wh.FAILURE.RETURN_INCORRECT(l);throw new Bh.ValidationError(u)}return c.then(i.check)}}}}Lt.AsyncContract=fT});var Hh=_(lt=>{"use strict";var dT=lt&&lt.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},hT=lt&&lt.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s};Object.defineProperty(lt,"__esModule",{value:!0});lt.when=lt.match=void 0;function pT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return function(r){var n,i;try{for(var s=dT(t),o=s.next();!o.done;o=s.next()){var a=hT(o.value,2),l=a[0],u=a[1];if(l.guard(r))return u(r)}}catch(d){n={error:d}}finally{try{o&&!o.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}throw new Error("No alternatives were matched")}}lt.match=pT;function mT(t,e){return[t,e]}lt.when=mT});var be=_(qt=>{"use strict";Object.defineProperty(qt,"__esModule",{value:!0});qt.innerValidate=qt.create=qt.isRuntype=void 0;var jt=dl(),gT=Mn(),yT=Dr(),Vh=de(),Gh=Symbol(),bT=function(t){return(0,Vh.hasKey)(Gh,t)};qt.isRuntype=bT;function _T(t,e){return e[Gh]=!0,e.check=r,e.assert=r,e._innerValidate=function(c,f){return f.has(c,e)?(0,Vh.SUCCESS)(c):t(c,f)},e.validate=function(c){return e._innerValidate(c,vT())},e.guard=n,e.Or=i,e.And=s,e.optional=o,e.nullable=a,e.withConstraint=l,e.withGuard=u,e.withBrand=d,e.reflect=e,e.toString=function(){return"Runtype<".concat((0,gT.default)(e),">")},e;function r(c){var f=e.validate(c);if(f.success)return f.value;throw new yT.ValidationError(f)}function n(c){return e.validate(c).success}function i(c){return(0,jt.Union)(e,c)}function s(c){return(0,jt.Intersect)(e,c)}function o(){return(0,jt.Optional)(e)}function a(){return(0,jt.Union)(e,jt.Null)}function l(c,f){return(0,jt.Constraint)(e,c,f)}function u(c,f){return(0,jt.Constraint)(e,c,f)}function d(c){return(0,jt.Brand)(c,e)}}qt.create=_T;function wT(t,e,r){return t._innerValidate(e,r)}qt.innerValidate=wT;function vT(){var t=new WeakMap,e=function(n,i){if(!(n===null||typeof n!="object")){var s=t.get(n);t.set(n,s?s.set(i,!0):new WeakMap().set(i,!0))}},r=function(n,i){var s=t.get(n),o=s&&s.get(i)||!1;return e(n,i),o};return{has:r}}});var Os=_(Rs=>{"use strict";Object.defineProperty(Rs,"__esModule",{value:!0});Rs.Unknown=void 0;var TT=be(),ST=de(),ET={tag:"unknown"};Rs.Unknown=(0,TT.create)(function(t){return(0,ST.SUCCESS)(t)},ET)});var Kh=_(Ms=>{"use strict";Object.defineProperty(Ms,"__esModule",{value:!0});Ms.Never=void 0;var xT=be(),kT=de(),RT={tag:"never"};Ms.Never=(0,xT.create)(kT.FAILURE.NOTHING_EXPECTED,RT)});var Zh=_(Ps=>{"use strict";Object.defineProperty(Ps,"__esModule",{value:!0});Ps.Void=void 0;var OT=Os();Ps.Void=OT.Unknown});var hl=_(Lr=>{"use strict";var Cs=Lr&&Lr.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Lr,"__esModule",{value:!0});Lr.Union=void 0;var As=be(),Pn=de();function MT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=function(){for(var i=[],s=0;s<arguments.length;s++)i[s]=arguments[s];return function(o){for(var a=0;a<t.length;a++)if(t[a].guard(o))return i[a](o)}},n={tag:"union",alternatives:t,match:r};return(0,As.create)(function(i,s){var o,a,l,u,d,c,f,h;if(typeof i!="object"||i===null){try{for(var p=Cs(t),g=p.next();!g.done;g=p.next()){var m=g.value;if((0,As.innerValidate)(m,i,s).success)return(0,Pn.SUCCESS)(i)}}catch(R){o={error:R}}finally{try{g&&!g.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}return Pn.FAILURE.TYPE_INCORRECT(n,i)}var x={};try{for(var k=Cs(t),T=k.next();!T.done;T=k.next()){var m=T.value;if(m.reflect.tag==="record"){var b=function(v){var E=m.reflect.fields[v];E.tag==="literal"&&(x[v]?x[v].every(function(O){return O!==E.value})&&x[v].push(E.value):x[v]=[E.value])};for(var M in m.reflect.fields)b(M)}}}catch(R){l={error:R}}finally{try{T&&!T.done&&(u=k.return)&&u.call(k)}finally{if(l)throw l.error}}for(var M in x)if(x[M].length===t.length)try{for(var $=(d=void 0,Cs(t)),N=$.next();!N.done;N=$.next()){var m=N.value;if(m.reflect.tag==="record"){var C=m.reflect.fields[M];if(C.tag==="literal"&&(0,Pn.hasKey)(M,i)&&i[M]===C.value)return(0,As.innerValidate)(m,i,s)}}}catch(v){d={error:v}}finally{try{N&&!N.done&&(c=$.return)&&c.call($)}finally{if(d)throw d.error}}try{for(var G=Cs(t),se=G.next();!se.done;se=G.next()){var A=se.value;if((0,As.innerValidate)(A,i,s).success)return(0,Pn.SUCCESS)(i)}}catch(R){f={error:R}}finally{try{se&&!se.done&&(h=G.return)&&h.call(G)}finally{if(f)throw f.error}}return Pn.FAILURE.TYPE_INCORRECT(n,i)},n)}Lr.Union=MT});var gl=_(Le=>{"use strict";Object.defineProperty(Le,"__esModule",{value:!0});Le.Nullish=Le.Null=Le.Undefined=Le.Literal=Le.literal=void 0;var PT=be(),Jh=de(),CT=hl();function pl(t){return Array.isArray(t)?String(t.map(String)):typeof t=="bigint"?String(t)+"n":String(t)}Le.literal=pl;function ml(t){var e={tag:"literal",value:t};return(0,PT.create)(function(r){return r===t?(0,Jh.SUCCESS)(r):Jh.FAILURE.VALUE_INCORRECT("literal","`".concat(pl(t),"`"),"`".concat(pl(r),"`"))},e)}Le.Literal=ml;Le.Undefined=ml(void 0);Le.Null=ml(null);Le.Nullish=(0,CT.Union)(Le.Null,Le.Undefined)});var rp=_(ut=>{"use strict";var Ft=ut&&ut.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},yl=ut&&ut.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))},Xh=ut&&ut.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(ut,"__esModule",{value:!0});ut.Template=void 0;var Is=be(),Qh=Mn(),wt=de(),tp=gl(),bl=function(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")},AT=function(t){if(0<t.length&&Array.isArray(t[0])){var e=Ft(t),r=e[0],n=e.slice(1);return[Array.from(r),n]}else{var i=t,r=i.reduce(function(a,l){return(0,Is.isRuntype)(l)?a.push(""):a.push(a.pop()+String(l)),a},[""]),n=i.filter(Is.isRuntype);return[r,n]}},IT=function(t,e){for(var r=0;r<e.length;)switch(e[r].reflect.tag){case"literal":{var n=e[r];e.splice(r,1);var i=String(n.value);t.splice(r,2,t[r]+i+t[r+1]);break}case"template":{var s=e[r];e.splice.apply(e,yl([r,1],Ft(s.runtypes),!1));var o=s.strings;if(o.length===1)t.splice(r,2,t[r]+o[0]+t[r+1]);else{var a=o[0],l=o.slice(1,-1),u=o[o.length-1];t.splice.apply(t,yl(yl([r,2,t[r]+a],Ft(l),!1),[u+t[r+1]],!1))}break}case"union":{var d=e[r];if(d.alternatives.length===1)try{var c=In(d);e.splice(r,1);var i=String(c.value);t.splice(r,2,t[r]+i+t[r+1]);break}catch{r++;break}else{r++;break}}case"intersect":{var f=e[r];if(f.intersectees.length===1)try{var h=In(f);e.splice(r,1);var i=String(h.value);t.splice(r,2,t[r]+i+t[r+1]);break}catch{r++;break}else{r++;break}}default:r++;break}},NT=function(t){var e=Ft(AT(t),2),r=e[0],n=e[1];return IT(r,n),[r,n]},In=function(t){switch(t.reflect.tag){case"literal":return t;case"brand":return In(t.reflect.entity);case"union":if(t.reflect.alternatives.length===1)return In(t.reflect.alternatives[0]);break;case"intersect":if(t.reflect.intersectees.length===1)return In(t.reflect.intersectees[0]);break;default:break}throw void 0},ep=function(t){return t},_l={string:[function(t){return globalThis.String(t)},".*"],number:[function(t){return globalThis.Number(t)},"[+-]?(?:\\d*\\.\\d+|\\d+\\.\\d*|\\d+)(?:[Ee][+-]?\\d+)?","0[Bb][01]+","0[Oo][0-7]+","0[Xx][0-9A-Fa-f]+"],bigint:[function(t){return globalThis.BigInt(t)},"-?[1-9]d*"],boolean:[function(t){return t!=="false"},"true","false"],null:[function(){return null},"null"],undefined:[function(){},"undefined"]},Cn=function(t){switch(t.tag){case"literal":{var e=Ft(_l[(0,wt.typeOf)(t.value)]||[ep],1),r=e[0];return r}case"brand":return Cn(t.entity);case"constraint":return Cn(t.underlying);case"union":return t.alternatives.map(Cn);case"intersect":return t.intersectees.map(Cn);default:var n=Ft(_l[t.tag]||[ep],1),i=n[0];return i}},wl=function(t,e){return function(r){var n,i,s,o,a=Cn(t);if(Array.isArray(a))switch(t.tag){case"union":try{for(var l=Xh(t.alternatives),u=l.next();!u.done;u=l.next()){var d=u.value,c=wl(d.reflect,e)(r);if(c.success)return c}}catch(m){n={error:m}}finally{try{u&&!u.done&&(i=l.return)&&i.call(l)}finally{if(n)throw n.error}}return wt.FAILURE.TYPE_INCORRECT(t,r);case"intersect":try{for(var f=Xh(t.intersectees),h=f.next();!h.done;h=f.next()){var p=h.value,c=wl(p.reflect,e)(r);if(!c.success)return c}}catch(m){s={error:m}}finally{try{h&&!h.done&&(o=f.return)&&o.call(f)}finally{if(s)throw s.error}}return(0,wt.SUCCESS)(r);default:throw Error("impossible")}else{var g=a,c=(0,Is.innerValidate)(t,g(r),e);return!c.success&&c.code==="VALUE_INCORRECT"&&t.tag==="literal"?wt.FAILURE.VALUE_INCORRECT("literal",'"'.concat((0,tp.literal)(t.value),'"'),'"'.concat(r,'"')):c}}},An=function(t){switch(t.tag){case"literal":return bl(String(t.value));case"brand":return An(t.entity);case"constraint":return An(t.underlying);case"union":return t.alternatives.map(An).join("|");case"template":return t.strings.map(bl).reduce(function(n,i,s){var o=n+i,a=t.runtypes[s];return a?o+"(?:".concat(An(a.reflect),")"):o},"");default:var e=Ft(_l[t.tag]||[void 0,".*"]),r=e.slice(1);return r.join("|")}},$T=function(t){var e=t.strings.map(bl).reduce(function(r,n,i){var s=r+n,o=t.runtypes[i];return o?s+"(".concat(An(o.reflect),")"):s},"");return new RegExp("^".concat(e,"$"),"su")};function DT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Ft(NT(t),2),n=r[0],i=r[1],s={tag:"template",strings:n,runtypes:i},o=$T(s),a=function(l,u){var d=l.match(o);if(d){for(var c=d.slice(1),f=0;f<i.length;f++){var h=i[f],p=c[f],g=wl(h.reflect,u)(p);if(!g.success)return g}return(0,wt.SUCCESS)(l)}else return wt.FAILURE.VALUE_INCORRECT("string","".concat((0,Qh.default)(s)),'"'.concat((0,tp.literal)(l),'"'))};return(0,Is.create)(function(l,u){if(typeof l!="string")return wt.FAILURE.TYPE_INCORRECT(s,l);var d=a(l,u);if(d.success)return(0,wt.SUCCESS)(l);var c=wt.FAILURE.VALUE_INCORRECT("string","".concat((0,Qh.default)(s)),'"'.concat(l,'"'));return c.message!==d.message&&(c.message+=" (inner: ".concat(d.message,")")),c},s)}ut.Template=DT});var sp=_(Ns=>{"use strict";Object.defineProperty(Ns,"__esModule",{value:!0});Ns.Boolean=void 0;var LT=be(),np=de(),ip={tag:"boolean"};Ns.Boolean=(0,LT.create)(function(t){return typeof t=="boolean"?(0,np.SUCCESS)(t):np.FAILURE.TYPE_INCORRECT(ip,t)},ip)});var lp=_($s=>{"use strict";Object.defineProperty($s,"__esModule",{value:!0});$s.Number=void 0;var jT=be(),op=de(),ap={tag:"number"};$s.Number=(0,jT.create)(function(t){return typeof t=="number"?(0,op.SUCCESS)(t):op.FAILURE.TYPE_INCORRECT(ap,t)},ap)});var fp=_(Ds=>{"use strict";Object.defineProperty(Ds,"__esModule",{value:!0});Ds.BigInt=void 0;var qT=be(),up=de(),cp={tag:"bigint"};Ds.BigInt=(0,qT.create)(function(t){return typeof t=="bigint"?(0,up.SUCCESS)(t):up.FAILURE.TYPE_INCORRECT(cp,t)},cp)});var vl=_(Ls=>{"use strict";Object.defineProperty(Ls,"__esModule",{value:!0});Ls.String=void 0;var FT=be(),dp=de(),hp={tag:"string"};Ls.String=(0,FT.create)(function(t){return typeof t=="string"?(0,dp.SUCCESS)(t):dp.FAILURE.TYPE_INCORRECT(hp,t)},hp)});var yp=_(js=>{"use strict";Object.defineProperty(js,"__esModule",{value:!0});js.Symbol=void 0;var gp=be(),Nn=de(),UT=function(t){var e={tag:"symbol",key:t};return(0,gp.create)(function(r){if(typeof r!="symbol")return Nn.FAILURE.TYPE_INCORRECT(e,r);var n=globalThis.Symbol.keyFor(r);return n!==t?Nn.FAILURE.VALUE_INCORRECT("symbol key",mp(t),mp(n)):(0,Nn.SUCCESS)(r)},e)},pp={tag:"symbol"};js.Symbol=(0,gp.create)(function(t){return typeof t=="symbol"?(0,Nn.SUCCESS)(t):Nn.FAILURE.TYPE_INCORRECT(pp,t)},Object.assign(UT,pp));var mp=function(t){return t===void 0?"undefined":'"'.concat(t,'"')}});var wp=_(qs=>{"use strict";Object.defineProperty(qs,"__esModule",{value:!0});qs.Array=void 0;var bp=be(),$n=de();function _p(t,e){var r={tag:"array",isReadonly:e,element:t};return BT((0,bp.create)(function(n,i){if(!Array.isArray(n))return $n.FAILURE.TYPE_INCORRECT(r,n);var s=(0,$n.enumerableKeysOf)(n),o=s.map(function(l){return(0,bp.innerValidate)(t,n[l],i)}),a=s.reduce(function(l,u){var d=o[u];return d.success||(l[u]=d.details||d.message),l},[]);return(0,$n.enumerableKeysOf)(a).length!==0?$n.FAILURE.CONTENT_INCORRECT(r,a):(0,$n.SUCCESS)(n)},r))}function zT(t){return _p(t,!1)}qs.Array=zT;function BT(t){return t.asReadonly=e,t;function e(){return _p(t.element,!0)}}});var Tp=_(Fs=>{"use strict";Object.defineProperty(Fs,"__esModule",{value:!0});Fs.Tuple=void 0;var vp=be(),jr=de();function WT(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r={tag:"tuple",components:t};return(0,vp.create)(function(n,i){if(!Array.isArray(n))return jr.FAILURE.TYPE_INCORRECT(r,n);if(n.length!==t.length)return jr.FAILURE.CONSTRAINT_FAILED(r,"Expected length ".concat(t.length,", but was ").concat(n.length));var s=(0,jr.enumerableKeysOf)(n),o=s.map(function(l){return(0,vp.innerValidate)(t[l],n[l],i)}),a=s.reduce(function(l,u){var d=o[u];return d.success||(l[u]=d.details||d.message),l},[]);return(0,jr.enumerableKeysOf)(a).length!==0?jr.FAILURE.CONTENT_INCORRECT(r,a):(0,jr.SUCCESS)(n)},r)}Fs.Tuple=WT});var Ep=_(Ve=>{"use strict";var Tl=Ve&&Ve.__read||function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)s.push(i.value)}catch(a){o={error:a}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(o)throw o.error}}return s},Sl=Ve&&Ve.__spreadArray||function(t,e,r){if(r||arguments.length===2)for(var n=0,i=e.length,s;n<i;n++)(s||!(n in e))&&(s||(s=Array.prototype.slice.call(e,0,n)),s[n]=e[n]);return t.concat(s||Array.prototype.slice.call(e))};Object.defineProperty(Ve,"__esModule",{value:!0});Ve.Partial=Ve.Record=Ve.InternalRecord=void 0;var Sp=be(),je=de();function Ut(t,e,r){var n={tag:"record",isPartial:e,isReadonly:r,fields:t};return VT((0,Sp.create)(function(i,s){if(i==null)return je.FAILURE.TYPE_INCORRECT(n,i);var o=(0,je.enumerableKeysOf)(t);if(o.length!==0&&typeof i!="object")return je.FAILURE.TYPE_INCORRECT(n,i);var a=Sl([],Tl(new Set(Sl(Sl([],Tl(o),!1),Tl((0,je.enumerableKeysOf)(i)),!1))),!1),l=a.reduce(function(d,c){var f=(0,je.hasKey)(c,t),h=(0,je.hasKey)(c,i);if(f){var p=t[c],g=e||p.reflect.tag==="optional";if(h){var m=i[c];g&&m===void 0?d[c]=(0,je.SUCCESS)(m):d[c]=(0,Sp.innerValidate)(p,m,s)}else g?d[c]=(0,je.SUCCESS)(void 0):d[c]=je.FAILURE.PROPERTY_MISSING(p.reflect)}else if(h){var m=i[c];d[c]=(0,je.SUCCESS)(m)}else throw new Error("impossible");return d},{}),u=a.reduce(function(d,c){var f=l[c];return f.success||(d[c]=f.details||f.message),d},{});return(0,je.enumerableKeysOf)(u).length!==0?je.FAILURE.CONTENT_INCORRECT(n,u):(0,je.SUCCESS)(i)},n))}Ve.InternalRecord=Ut;function YT(t){return Ut(t,!1,!1)}Ve.Record=YT;function HT(t){return Ut(t,!0,!1)}Ve.Partial=HT;function VT(t){return t.asPartial=e,t.asReadonly=r,t.pick=n,t.omit=i,t.extend=s,t;function e(){return Ut(t.fields,!0,t.isReadonly)}function r(){return Ut(t.fields,t.isPartial,!0)}function n(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var l={};return o.forEach(function(u){l[u]=t.fields[u]}),Ut(l,t.isPartial,t.isReadonly)}function i(){for(var o=[],a=0;a<arguments.length;a++)o[a]=arguments[a];var l={},u=(0,je.enumerableKeysOf)(t.fields);return u.forEach(function(d){o.includes(d)||(l[d]=t.fields[d])}),Ut(l,t.isPartial,t.isReadonly)}function s(o){return Ut(Object.assign({},t.fields,o),t.isPartial,t.isReadonly)}}});var xl=_(qr=>{"use strict";Object.defineProperty(qr,"__esModule",{value:!0});qr.Guard=qr.Constraint=void 0;var GT=be(),El=de(),KT=Os();function ZT(t,e,r){var n=r&&r.name,i=r&&r.args,s={tag:"constraint",underlying:t,constraint:e,name:n,args:i};return(0,GT.create)(function(o){var a=t.validate(o);if(!a.success)return a;var l=e(a.value);return typeof l=="string"?El.FAILURE.CONSTRAINT_FAILED(s,l):l?(0,El.SUCCESS)(a.value):El.FAILURE.CONSTRAINT_FAILED(s)},s)}qr.Constraint=ZT;var JT=function(t,e){return KT.Unknown.withGuard(t,e)};qr.Guard=JT});var kp=_(Us=>{"use strict";Object.defineProperty(Us,"__esModule",{value:!0});Us.Dictionary=void 0;var xp=be(),kl=vl(),XT=xl(),QT=Mn(),ur=de(),eS=(0,XT.Constraint)(kl.String,function(t){return!isNaN(+t)},{name:"number"});function tS(t,e){var r=e===void 0||e==="string"?kl.String:e==="number"?eS:e,n=(0,QT.default)(r),i={tag:"dictionary",key:n,value:t};return(0,xp.create)(function(s,o){if(s==null||typeof s!="object"||Object.getPrototypeOf(s)!==Object.prototype&&(!Array.isArray(s)||n==="string"))return ur.FAILURE.TYPE_INCORRECT(i,s);var a=/^(?:NaN|-?\d+(?:\.\d+)?)$/,l=(0,ur.enumerableKeysOf)(s),u=l.reduce(function(c,f){var h=typeof f=="string"&&a.test(f),p=h?globalThis.Number(f):f;return(h?!r.guard(p)&&!r.guard(f):!r.guard(p))?c[f]=ur.FAILURE.KEY_INCORRECT(i,r.reflect,p):c[f]=(0,xp.innerValidate)(t,s[f],o),c},{}),d=l.reduce(function(c,f){var h=u[f];return h.success||(c[f]=h.details||h.message),c},{});return(0,ur.enumerableKeysOf)(d).length!==0?ur.FAILURE.CONTENT_INCORRECT(i,d):(0,ur.SUCCESS)(s)},i)}Us.Dictionary=tS});var Op=_(Fr=>{"use strict";var rS=Fr&&Fr.__values||function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};Object.defineProperty(Fr,"__esModule",{value:!0});Fr.Intersect=void 0;var Rp=be(),nS=de();function iS(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r={tag:"intersect",intersectees:t};return(0,Rp.create)(function(n,i){var s,o;try{for(var a=rS(t),l=a.next();!l.done;l=a.next()){var u=l.value,d=(0,Rp.innerValidate)(u,n,i);if(!d.success)return d}}catch(c){s={error:c}}finally{try{l&&!l.done&&(o=a.return)&&o.call(a)}finally{if(s)throw s.error}}return(0,nS.SUCCESS)(n)},r)}Fr.Intersect=iS});var Mp=_(zs=>{"use strict";Object.defineProperty(zs,"__esModule",{value:!0});zs.Optional=void 0;var sS=be(),oS=de();function aS(t){var e={tag:"optional",underlying:t};return(0,sS.create)(function(r){return r===void 0?(0,oS.SUCCESS)(r):t.validate(r)},e)}zs.Optional=aS});var Ap=_(Bs=>{"use strict";Object.defineProperty(Bs,"__esModule",{value:!0});Bs.Function=void 0;var lS=be(),Pp=de(),Cp={tag:"function"};Bs.Function=(0,lS.create)(function(t){return typeof t=="function"?(0,Pp.SUCCESS)(t):Pp.FAILURE.TYPE_INCORRECT(Cp,t)},Cp)});var Np=_(Ws=>{"use strict";Object.defineProperty(Ws,"__esModule",{value:!0});Ws.InstanceOf=void 0;var uS=be(),Ip=de();function cS(t){var e={tag:"instanceof",ctor:t};return(0,uS.create)(function(r){return r instanceof t?(0,Ip.SUCCESS)(r):Ip.FAILURE.TYPE_INCORRECT(e,r)},e)}Ws.InstanceOf=cS});var $p=_(Ys=>{"use strict";Object.defineProperty(Ys,"__esModule",{value:!0});Ys.Lazy=void 0;var fS=be();function dS(t){var e={get tag(){return n().tag}},r;function n(){if(!r){r=t();for(var i in r)i!=="tag"&&(e[i]=r[i])}return r}return(0,fS.create)(function(i){return n().validate(i)},e)}Ys.Lazy=dS});var Dp=_(Hs=>{"use strict";Object.defineProperty(Hs,"__esModule",{value:!0});Hs.Brand=void 0;var hS=be();function pS(t,e){var r={tag:"brand",brand:t,entity:e};return(0,hS.create)(function(n){return e.validate(n)},r)}Hs.Brand=pS});var Lp=_(Ur=>{"use strict";Object.defineProperty(Ur,"__esModule",{value:!0});Ur.checked=Ur.check=void 0;var mS=Dr(),gS=de(),Rl=new WeakMap;function yS(t,e,r){var n=Rl.get(t)||new Map;Rl.set(t,n);var i=n.get(e)||[];n.set(e,i),i.push(r)}Ur.check=yS;function bS(t,e,r){var n=Rl.get(t),i=n&&n.get(e);if(i)return i;for(var s=[],o=0;o<r;o++)s.push(o);return s}function _S(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(t.length===0)throw new Error("No runtype provided to `@checked`. Please remove the decorator.");return function(r,n,i){var s=i.value,o=(r.name||r.constructor.name+".prototype")+(typeof n=="string"?'["'.concat(n,'"]'):"[".concat(String(n),"]")),a=bS(r,n,t.length);if(a.length!==t.length)throw new Error("Number of `@checked` runtypes and @check parameters not matched.");if(a.length>s.length)throw new Error("Number of `@checked` runtypes exceeds actual parameter length.");i.value=function(){for(var l=[],u=0;u<arguments.length;u++)l[u]=arguments[u];return t.forEach(function(d,c){var f=a[c],h=d.validate(l[f]);if(!h.success){var p="".concat(o,", argument #").concat(f,": ").concat(h.message),g=gS.FAILURE.ARGUMENT_INCORRECT(p);throw new mS.ValidationError(g)}}),s.apply(this,l)}}}Ur.checked=_S});var dl=_(B=>{"use strict";var wS=B&&B.__createBinding||(Object.create?function(t,e,r,n){n===void 0&&(n=r),Object.defineProperty(t,n,{enumerable:!0,get:function(){return e[r]}})}:function(t,e,r,n){n===void 0&&(n=r),t[n]=e[r]}),le=B&&B.__exportStar||function(t,e){for(var r in t)r!=="default"&&!Object.prototype.hasOwnProperty.call(e,r)&&wS(e,t,r)};Object.defineProperty(B,"__esModule",{value:!0});B.InstanceOf=B.Nullish=B.Null=B.Undefined=B.Literal=void 0;le(Fh(),B);le(ul(),B);le(zh(),B);le(Yh(),B);le(Hh(),B);le(Dr(),B);le(Os(),B);le(Kh(),B);le(Zh(),B);var Vs=gl();Object.defineProperty(B,"Literal",{enumerable:!0,get:function(){return Vs.Literal}});Object.defineProperty(B,"Undefined",{enumerable:!0,get:function(){return Vs.Undefined}});Object.defineProperty(B,"Null",{enumerable:!0,get:function(){return Vs.Null}});Object.defineProperty(B,"Nullish",{enumerable:!0,get:function(){return Vs.Nullish}});le(rp(),B);le(sp(),B);le(lp(),B);le(fp(),B);le(vl(),B);le(yp(),B);le(wp(),B);le(Tp(),B);le(Ep(),B);le(kp(),B);le(hl(),B);le(Op(),B);le(Mp(),B);le(Ap(),B);var vS=Np();Object.defineProperty(B,"InstanceOf",{enumerable:!0,get:function(){return vS.InstanceOf}});le($p(),B);le(xl(),B);le(Dp(),B);le(Lp(),B)});var tm=_((Cl,Al)=>{(function(t,e){typeof Cl=="object"&&typeof Al<"u"?Al.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).dayjs_plugin_quarterOfYear=e()})(Cl,function(){"use strict";var t="month",e="quarter";return function(r,n){var i=n.prototype;i.quarter=function(a){return this.$utils().u(a)?Math.ceil((this.month()+1)/3):this.month(this.month()%3+3*(a-1))};var s=i.add;i.add=function(a,l){return a=Number(a),this.$utils().p(l)===e?this.add(3*a,t):s.bind(this)(a,l)};var o=i.startOf;i.startOf=function(a,l){var u=this.$utils(),d=!!u.u(l)||l;if(u.p(a)===e){var c=this.quarter()-1;return d?this.month(3*c).startOf(t).startOf("day"):this.month(3*c+2).endOf(t).endOf("day")}return o.bind(this)(a,l)}}})});var Bt=_((Il,Nl)=>{(function(t,e){typeof Il=="object"&&typeof Nl<"u"?Nl.exports=e():typeof define=="function"&&define.amd?define(e):(t=typeof globalThis<"u"?globalThis:t||self).dayjs=e()})(Il,function(){"use strict";var t=1e3,e=6e4,r=36e5,n="millisecond",i="second",s="minute",o="hour",a="day",l="week",u="month",d="quarter",c="year",f="date",h="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,g=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,m={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(A){var R=["th","st","nd","rd"],v=A%100;return"["+A+(R[(v-20)%10]||R[v]||R[0])+"]"}},x=function(A,R,v){var E=String(A);return!E||E.length>=R?A:""+Array(R+1-E.length).join(v)+A},k={s:x,z:function(A){var R=-A.utcOffset(),v=Math.abs(R),E=Math.floor(v/60),O=v%60;return(R<=0?"+":"-")+x(E,2,"0")+":"+x(O,2,"0")},m:function A(R,v){if(R.date()<v.date())return-A(v,R);var E=12*(v.year()-R.year())+(v.month()-R.month()),O=R.clone().add(E,u),y=v-O<0,S=R.clone().add(E+(y?-1:1),u);return+(-(E+(v-O)/(y?O-S:S-O))||0)},a:function(A){return A<0?Math.ceil(A)||0:Math.floor(A)},p:function(A){return{M:u,y:c,w:l,d:a,D:f,h:o,m:s,s:i,ms:n,Q:d}[A]||String(A||"").toLowerCase().replace(/s$/,"")},u:function(A){return A===void 0}},T="en",b={};b[T]=m;var M=function(A){return A instanceof G},$=function A(R,v,E){var O;if(!R)return T;if(typeof R=="string"){var y=R.toLowerCase();b[y]&&(O=y),v&&(b[y]=v,O=y);var S=R.split("-");if(!O&&S.length>1)return A(S[0])}else{var D=R.name;b[D]=R,O=D}return!E&&O&&(T=O),O||!E&&T},N=function(A,R){if(M(A))return A.clone();var v=typeof R=="object"?R:{};return v.date=A,v.args=arguments,new G(v)},C=k;C.l=$,C.i=M,C.w=function(A,R){return N(A,{locale:R.$L,utc:R.$u,x:R.$x,$offset:R.$offset})};var G=function(){function A(v){this.$L=$(v.locale,null,!0),this.parse(v)}var R=A.prototype;return R.parse=function(v){this.$d=function(E){var O=E.date,y=E.utc;if(O===null)return new Date(NaN);if(C.u(O))return new Date;if(O instanceof Date)return new Date(O);if(typeof O=="string"&&!/Z$/i.test(O)){var S=O.match(p);if(S){var D=S[2]-1||0,W=(S[7]||"0").substring(0,3);return y?new Date(Date.UTC(S[1],D,S[3]||1,S[4]||0,S[5]||0,S[6]||0,W)):new Date(S[1],D,S[3]||1,S[4]||0,S[5]||0,S[6]||0,W)}}return new Date(O)}(v),this.$x=v.x||{},this.init()},R.init=function(){var v=this.$d;this.$y=v.getFullYear(),this.$M=v.getMonth(),this.$D=v.getDate(),this.$W=v.getDay(),this.$H=v.getHours(),this.$m=v.getMinutes(),this.$s=v.getSeconds(),this.$ms=v.getMilliseconds()},R.$utils=function(){return C},R.isValid=function(){return this.$d.toString()!==h},R.isSame=function(v,E){var O=N(v);return this.startOf(E)<=O&&O<=this.endOf(E)},R.isAfter=function(v,E){return N(v)<this.startOf(E)},R.isBefore=function(v,E){return this.endOf(E)<N(v)},R.$g=function(v,E,O){return C.u(v)?this[E]:this.set(O,v)},R.unix=function(){return Math.floor(this.valueOf()/1e3)},R.valueOf=function(){return this.$d.getTime()},R.startOf=function(v,E){var O=this,y=!!C.u(E)||E,S=C.p(v),D=function(Be,Re){var ve=C.w(O.$u?Date.UTC(O.$y,Re,Be):new Date(O.$y,Re,Be),O);return y?ve:ve.endOf(a)},W=function(Be,Re){return C.w(O.toDate()[Be].apply(O.toDate("s"),(y?[0,0,0,0]:[23,59,59,999]).slice(Re)),O)},I=this.$W,ae=this.$M,we=this.$D,Ue="set"+(this.$u?"UTC":"");switch(S){case c:return y?D(1,0):D(31,11);case u:return y?D(1,ae):D(0,ae+1);case l:var ze=this.$locale().weekStart||0,Et=(I<ze?I+7:I)-ze;return D(y?we-Et:we+(6-Et),ae);case a:case f:return W(Ue+"Hours",0);case o:return W(Ue+"Minutes",1);case s:return W(Ue+"Seconds",2);case i:return W(Ue+"Milliseconds",3);default:return this.clone()}},R.endOf=function(v){return this.startOf(v,!1)},R.$set=function(v,E){var O,y=C.p(v),S="set"+(this.$u?"UTC":""),D=(O={},O[a]=S+"Date",O[f]=S+"Date",O[u]=S+"Month",O[c]=S+"FullYear",O[o]=S+"Hours",O[s]=S+"Minutes",O[i]=S+"Seconds",O[n]=S+"Milliseconds",O)[y],W=y===a?this.$D+(E-this.$W):E;if(y===u||y===c){var I=this.clone().set(f,1);I.$d[D](W),I.init(),this.$d=I.set(f,Math.min(this.$D,I.daysInMonth())).$d}else D&&this.$d[D](W);return this.init(),this},R.set=function(v,E){return this.clone().$set(v,E)},R.get=function(v){return this[C.p(v)]()},R.add=function(v,E){var O,y=this;v=Number(v);var S=C.p(E),D=function(ae){var we=N(y);return C.w(we.date(we.date()+Math.round(ae*v)),y)};if(S===u)return this.set(u,this.$M+v);if(S===c)return this.set(c,this.$y+v);if(S===a)return D(1);if(S===l)return D(7);var W=(O={},O[s]=e,O[o]=r,O[i]=t,O)[S]||1,I=this.$d.getTime()+v*W;return C.w(I,this)},R.subtract=function(v,E){return this.add(-1*v,E)},R.format=function(v){var E=this,O=this.$locale();if(!this.isValid())return O.invalidDate||h;var y=v||"YYYY-MM-DDTHH:mm:ssZ",S=C.z(this),D=this.$H,W=this.$m,I=this.$M,ae=O.weekdays,we=O.months,Ue=O.meridiem,ze=function(Re,ve,xt,mr){return Re&&(Re[ve]||Re(E,y))||xt[ve].slice(0,mr)},Et=function(Re){return C.s(D%12||12,Re,"0")},Be=Ue||function(Re,ve,xt){var mr=Re<12?"AM":"PM";return xt?mr.toLowerCase():mr};return y.replace(g,function(Re,ve){return ve||function(xt){switch(xt){case"YY":return String(E.$y).slice(-2);case"YYYY":return C.s(E.$y,4,"0");case"M":return I+1;case"MM":return C.s(I+1,2,"0");case"MMM":return ze(O.monthsShort,I,we,3);case"MMMM":return ze(we,I);case"D":return E.$D;case"DD":return C.s(E.$D,2,"0");case"d":return String(E.$W);case"dd":return ze(O.weekdaysMin,E.$W,ae,2);case"ddd":return ze(O.weekdaysShort,E.$W,ae,3);case"dddd":return ae[E.$W];case"H":return String(D);case"HH":return C.s(D,2,"0");case"h":return Et(1);case"hh":return Et(2);case"a":return Be(D,W,!0);case"A":return Be(D,W,!1);case"m":return String(W);case"mm":return C.s(W,2,"0");case"s":return String(E.$s);case"ss":return C.s(E.$s,2,"0");case"SSS":return C.s(E.$ms,3,"0");case"Z":return S}return null}(Re)||S.replace(":","")})},R.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},R.diff=function(v,E,O){var y,S=this,D=C.p(E),W=N(v),I=(W.utcOffset()-this.utcOffset())*e,ae=this-W,we=function(){return C.m(S,W)};switch(D){case c:y=we()/12;break;case u:y=we();break;case d:y=we()/3;break;case l:y=(ae-I)/6048e5;break;case a:y=(ae-I)/864e5;break;case o:y=ae/r;break;case s:y=ae/e;break;case i:y=ae/t;break;default:y=ae}return O?y:C.a(y)},R.daysInMonth=function(){return this.endOf(u).$D},R.$locale=function(){return b[this.$L]},R.locale=function(v,E){if(!v)return this.$L;var O=this.clone(),y=$(v,E,!0);return y&&(O.$L=y),O},R.clone=function(){return C.w(this.$d,this)},R.toDate=function(){return new Date(this.valueOf())},R.toJSON=function(){return this.isValid()?this.toISOString():null},R.toISOString=function(){return this.$d.toISOString()},R.toString=function(){return this.$d.toUTCString()},A}(),se=G.prototype;return N.prototype=se,[["$ms",n],["$s",i],["$m",s],["$H",o],["$W",a],["$M",u],["$y",c],["$D",f]].forEach(function(A){se[A[1]]=function(R){return this.$g(R,A[0],A[1])}}),N.extend=function(A,R){return A.$i||(A(R,G,N),A.$i=!0),N},N.locale=$,N.isDayjs=M,N.unix=function(A){return N(1e3*A)},N.en=b[T],N.Ls=b,N.p={},N})});var Qx={};Fg(Qx,{default:()=>So});module.exports=Ug(Qx);var Ag=require("obsidian");var Kt=require("obsidian");function re(){}function xo(t,e){for(let r in e)t[r]=e[r];return t}function ko(t){return t()}function yi(){return Object.create(null)}function J(t){t.forEach(ko)}function rn(t){return typeof t=="function"}function fe(t,e){return t!=t?e==e:t!==e||t&&typeof t=="object"||typeof t=="function"}function yu(t){return Object.keys(t).length===0}function bu(t,...e){if(t==null){for(let n of e)n(void 0);return re}let r=t.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function Ro(t){let e;return bu(t,r=>e=r)(),e}function Oo(t){let e={};for(let r in t)r[0]!=="$"&&(e[r]=t[r]);return e}function nn(t){return t??""}var Mo=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;var bi=class t{_listeners="WeakMap"in Mo?new WeakMap:void 0;_observer=void 0;options;constructor(e){this.options=e}observe(e,r){return this._listeners.set(e,r),this._getObserver().observe(e,this.options),()=>{this._listeners.delete(e),this._observer.unobserve(e)}}_getObserver(){return this._observer??(this._observer=new ResizeObserver(e=>{for(let r of e)t.entries.set(r.target,r),this._listeners.get(r.target)?.(r)}))}};bi.entries="WeakMap"in Mo?new WeakMap:void 0;var _u=!1;function wu(){_u=!0}function vu(){_u=!1}function U(t,e){t.appendChild(e)}function kt(t,e,r){let n=Tu(t);if(!n.getElementById(e)){let i=L("style");i.id=e,i.textContent=r,Wg(n,i)}}function Tu(t){if(!t)return document;let e=t.getRootNode?t.getRootNode():t.ownerDocument;return e&&e.host?e:t.ownerDocument}function Wg(t,e){return U(t.head||t,e),e.sheet}function F(t,e,r){t.insertBefore(e,r||null)}function q(t){t.parentNode&&t.parentNode.removeChild(t)}function _i(t,e){for(let r=0;r<t.length;r+=1)t[r]&&t[r].d(e)}function L(t){return document.createElement(t)}function Su(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function Ce(t){return document.createTextNode(t)}function he(){return Ce(" ")}function Oe(){return Ce("")}function z(t,e,r,n){return t.addEventListener(e,r,n),()=>t.removeEventListener(e,r,n)}function Po(t){return function(e){return e.stopPropagation(),t.call(this,e)}}function w(t,e,r){r==null?t.removeAttribute(e):t.getAttribute(e)!==r&&t.setAttribute(e,r)}function Eu(t){return Array.from(t.childNodes)}function tt(t,e){e=""+e,t.data!==e&&(t.data=e)}function Ne(t,e){t.value=e??""}function dt(t,e,r,n){r==null?t.style.removeProperty(e):t.style.setProperty(e,r,n?"important":"")}function wi(t,e,{bubbles:r=!1,cancelable:n=!1}={}){return new CustomEvent(t,{detail:e,bubbles:r,cancelable:n})}function xu(t){let e={};return t.childNodes.forEach(r=>{e[r.slot||"default"]=!0}),e}var Rt;function ht(t){Rt=t}function ku(){if(!Rt)throw new Error("Function called outside component initialization");return Rt}function yr(){let t=ku();return(e,r,{cancelable:n=!1}={})=>{let i=t.$$.callbacks[e];if(i){let s=wi(e,r,{cancelable:n});return i.slice().forEach(o=>{o.call(t,s)}),!s.defaultPrevented}return!0}}function rt(t,e){let r=t.$$.callbacks[e.type];r&&r.slice().forEach(n=>n.call(this,e))}var Vt=[];var Ze=[],_r=[],Ru=[],Ou=Promise.resolve(),Ao=!1;function Io(){Ao||(Ao=!0,Ou.then(vi))}function We(){return Io(),Ou}function sn(t){_r.push(t)}var Co=new Set,br=0;function vi(){if(br!==0)return;let t=Rt;do{try{for(;br<Vt.length;){let e=Vt[br];br++,ht(e),Zg(e.$$)}}catch(e){throw Vt.length=0,br=0,e}for(ht(null),Vt.length=0,br=0;Ze.length;)Ze.pop()();for(let e=0;e<_r.length;e+=1){let r=_r[e];Co.has(r)||(Co.add(r),r())}_r.length=0}while(Vt.length);for(;Ru.length;)Ru.pop()();Ao=!1,Co.clear(),ht(t)}function Zg(t){if(t.fragment!==null){t.update(),J(t.before_update);let e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(sn)}}function Mu(t){let e=[],r=[];_r.forEach(n=>t.indexOf(n)===-1?e.push(n):r.push(n)),r.forEach(n=>n()),_r=e}var Ti=new Set,Gt;function pt(){Gt={r:0,c:[],p:Gt}}function mt(){Gt.r||J(Gt.c),Gt=Gt.p}function H(t,e){t&&t.i&&(Ti.delete(t),t.i(e))}function X(t,e,r,n){if(t&&t.o){if(Ti.has(t))return;Ti.add(t),Gt.c.push(()=>{Ti.delete(t),n&&(r&&t.d(1),n())}),t.o(e)}else n&&n()}function Ot(t){return t?.length!==void 0?t:Array.from(t)}var Jg=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"],Xg=new Set([...Jg]);function _e(t){t&&t.c()}function pe(t,e,r){let{fragment:n,after_update:i}=t.$$;n&&n.m(e,r),sn(()=>{let s=t.$$.on_mount.map(ko).filter(rn);t.$$.on_destroy?t.$$.on_destroy.push(...s):J(s),t.$$.on_mount=[]}),i.forEach(sn)}function me(t,e){let r=t.$$;r.fragment!==null&&(Mu(r.after_update),J(r.on_destroy),r.fragment&&r.fragment.d(e),r.on_destroy=r.fragment=null,r.ctx=[])}function ey(t,e){t.$$.dirty[0]===-1&&(Vt.push(t),Io(),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ge(t,e,r,n,i,s,o,a=[-1]){let l=Rt;ht(t);let u=t.$$={fragment:null,ctx:[],props:s,update:re,not_equal:i,bound:yi(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(l?l.$$.context:[])),callbacks:yi(),dirty:a,skip_bound:!1,root:e.target||l.$$.root};o&&o(u.root);let d=!1;if(u.ctx=r?r(t,e.props||{},(c,f,...h)=>{let p=h.length?h[0]:f;return u.ctx&&i(u.ctx[c],u.ctx[c]=p)&&(!u.skip_bound&&u.bound[c]&&u.bound[c](p),d&&ey(t,c)),f}):[],u.update(),d=!0,J(u.before_update),u.fragment=n?n(u.ctx):!1,e.target){if(e.hydrate){wu();let c=Eu(e.target);u.fragment&&u.fragment.l(c),c.forEach(q)}else u.fragment&&u.fragment.c();e.intro&&H(t.$$.fragment),pe(t,e.target,e.anchor),vu(),vi()}ht(l)}var ty;typeof HTMLElement=="function"&&(ty=class extends HTMLElement{$$ctor;$$s;$$c;$$cn=!1;$$d={};$$r=!1;$$p_d={};$$l={};$$l_u=new Map;constructor(t,e,r){super(),this.$$ctor=t,this.$$s=e,r&&this.attachShadow({mode:"open"})}addEventListener(t,e,r){if(this.$$l[t]=this.$$l[t]||[],this.$$l[t].push(e),this.$$c){let n=this.$$c.$on(t,e);this.$$l_u.set(e,n)}super.addEventListener(t,e,r)}removeEventListener(t,e,r){if(super.removeEventListener(t,e,r),this.$$c){let n=this.$$l_u.get(e);n&&(n(),this.$$l_u.delete(e))}}async connectedCallback(){if(this.$$cn=!0,!this.$$c){let t=function(i){return()=>{let s;return{c:function(){s=L("slot"),i!=="default"&&w(s,"name",i)},m:function(l,u){F(l,s,u)},d:function(l){l&&q(s)}}}};if(await Promise.resolve(),!this.$$cn)return;let e={},r=xu(this);for(let i of this.$$s)i in r&&(e[i]=[t(i)]);for(let i of this.attributes){let s=this.$$g_p(i.name);s in this.$$d||(this.$$d[s]=No(s,i.value,this.$$p_d,"toProp"))}this.$$c=new this.$$ctor({target:this.shadowRoot||this,props:{...this.$$d,$$slots:e,$$scope:{ctx:[]}}});let n=()=>{this.$$r=!0;for(let i in this.$$p_d)if(this.$$d[i]=this.$$c.$$.ctx[this.$$c.$$.props[i]],this.$$p_d[i].reflect){let s=No(i,this.$$d[i],this.$$p_d,"toAttribute");s==null?this.removeAttribute(i):this.setAttribute(this.$$p_d[i].attribute||i,s)}this.$$r=!1};this.$$c.$$.after_update.push(n),n();for(let i in this.$$l)for(let s of this.$$l[i]){let o=this.$$c.$on(i,s);this.$$l_u.set(s,o)}this.$$l={}}}attributeChangedCallback(t,e,r){this.$$r||(t=this.$$g_p(t),this.$$d[t]=No(t,r,this.$$p_d,"toProp"),this.$$c?.$set({[t]:this.$$d[t]}))}disconnectedCallback(){this.$$cn=!1,Promise.resolve().then(()=>{this.$$cn||(this.$$c.$destroy(),this.$$c=void 0)})}$$g_p(t){return Object.keys(this.$$p_d).find(e=>this.$$p_d[e].attribute===t||!this.$$p_d[e].attribute&&e.toLowerCase()===t)||t}});function No(t,e,r,n){let i=r[t]?.type;if(e=i==="Boolean"&&typeof e!="boolean"?e!=null:e,!n||!r[t])return e;if(n==="toAttribute")switch(i){case"Object":case"Array":return e==null?null:JSON.stringify(e);case"Boolean":return e?"":null;case"Number":return e??null;default:return e}else switch(i){case"Object":case"Array":return e&&JSON.parse(e);case"Boolean":return e;case"Number":return e!=null?+e:e;default:return e}}var ce=class{$$=void 0;$$set=void 0;$destroy(){me(this,1),this.$destroy=re}$on(e,r){if(!rn(r))return re;let n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(r),()=>{let i=n.indexOf(r);i!==-1&&n.splice(i,1)}}$set(e){this.$$set&&!yu(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}};var Pu="4";var wr=[];function Cu(t,e=re){let r,n=new Set;function i(a){if(fe(t,a)&&(t=a,r)){let l=!wr.length;for(let u of n)u[1](),wr.push(u,t);if(l){for(let u=0;u<wr.length;u+=2)wr[u][0](wr[u+1]);wr.length=0}}}function s(a){i(a(t))}function o(a,l=re){let u=[a,l];return n.add(u),n.size===1&&(r=e(i,s)||re),a(t),()=>{n.delete(u),n.size===0&&r&&(r(),r=null)}}return{set:i,update:s,subscribe:o}}var Au={parsingSettings:{markdownStartingNotation:"%%*",markdownEndingNotation:"*%%",indicatorTag:"TaskCard"},displaySettings:{defaultMode:"single-line"},userMetadata:{projects:{}},syncSettings:{}},$e=Cu(Au),Si=class extends Kt.PluginSettingTab{constructor(r,n){super(r,n);this.plugin=n}display(){this.containerEl.empty(),this.containerEl.createEl("h2",{text:"Task Card"}),this.projectSettings(),this.containerEl.createEl("h3",{text:"Parsing Settings"}),this.cardParsingSettings(),this.containerEl.createEl("h3",{text:"Display Settings"}),this.cardDisplaySettings()}projectSettings(){this.containerEl.createEl("h3",{text:"Project Adding"}),this.newProjectSetting();let r=this.plugin.projectModule.getProjectsData();if(this.containerEl.createEl("h3",{text:"Project Editing"}),r.length>0){let n=r[0],i=r.slice(1);this.projectEditSetting(n);for(let s of i){let o=this.containerEl.createEl("div",{cls:"project-container"});this.projectEditSetting(s,o)}}}updateProjectsToSettings(){let r=this.plugin.projectModule.getProjectsData();this.plugin.writeSettings(n=>n.userMetadata.projects=r)}newProjectSetting(){let r="",n="",i=(s=!1)=>{let o=new Kt.Setting(this.containerEl).setName("Add A Project");o.setDesc("Project names must be unique. Color picking is optional."),o.addText(a=>{a.setPlaceholder("Enter project name").setValue(r).onChange(l=>{r=l})}),s?o.addColorPicker(a=>{a.onChange(l=>{n=l})}):o.addButton(a=>{a.setTooltip("Pick a color").setIcon("palette").onClick(()=>{i(!0)})}),o.addButton(a=>{a.setTooltip("Finish").setIcon("check-square").onClick(()=>{if(r){let l={name:r,color:n};this.plugin.projectModule.addProject(l),this.updateProjectsToSettings(),this.display()}})})};i()}projectEditSetting(r,n){n||(n=this.containerEl);let i=new Kt.Setting(n);i.setName(r.name);let s=i.addText(l=>{l.setValue(r.name).onChange(u=>{r.name=u}).setDisabled(!0)}),o=i.addColorPicker(l=>{l.setValue(r.color).onChange(u=>{r.color=u}).setDisabled(!0)}),a=!1;i.addButton(l=>{l.setTooltip("Edit").setIcon("pencil").onClick(()=>{a?(s.setDisabled(!0),o.setDisabled(!0),l.setTooltip("Edit").setIcon("pencil"),this.plugin.projectModule.updateProject(r),this.updateProjectsToSettings(),this.display(),a=!1):(s.setDisabled(!1),o.setDisabled(!1),l.setTooltip("Save").setIcon("save"),a=!0)})}),i.addButton(l=>{l.setIcon("trash-2").setTooltip("Delete project").onClick(()=>{this.plugin.projectModule.deleteProjectById(r.id),this.updateProjectsToSettings(),this.display()})})}cardParsingSettings(){let r;new Kt.Setting(this.containerEl).setName("Indicator Tag").setDesc("The tag used to identify task cards.").addText(n=>(r=n,n.setPlaceholder("YourTagHere").setValue(this.plugin.settings.parsingSettings.indicatorTag).onChange(async i=>{let s=i.replace(/^#/,"");this.plugin.writeSettings(o=>o.parsingSettings.indicatorTag=s)}))).addButton(n=>{n.setButtonText("Reset").setWarning().onClick(async()=>{this.plugin.writeSettings(i=>i.parsingSettings.indicatorTag=Au.parsingSettings.indicatorTag)})})}cardDisplaySettings(){new Kt.Setting(this.containerEl).setName("Default Display Mode").setDesc("The default display mode when creating a new task card.").addDropdown(r=>{r.addOptions({"single-line":"Single Line","multi-line":"Multi Line"}).setValue(this.plugin.settings.displaySettings.defaultMode).onChange(async n=>{await this.plugin.writeSettings(i=>i.displaySettings.defaultMode=n)})})}};var ll=jh(),{format:Nr,transports:TO}=ll,SO=require("path"),Zv={transports:[new ll.transports.Console],level:"info",format:Nr.combine(Nr.label({label:"Obsidian Task Card"}),Nr.timestamp({format:"YYYY-MM-DD HH:mm:ss"}),Nr.splat(),Nr.simple(),Nr.printf(t=>{let{timestamp:e,label:r,level:n,message:i,...s}=t,o=`${e} [${r}] ${n}: ${i} `;return Object.keys(s).length>0&&(o+=JSON.stringify(s)),o}))},ee=ll.createLogger(Zv);var Js=require("obsidian");var Pl=Ke(dl());var jp=Ke(require("crypto")),Ks=new Uint8Array(256),Gs=Ks.length;function Ol(){return Gs>Ks.length-16&&(jp.default.randomFillSync(Ks),Gs=0),Ks.slice(Gs,Gs+=16)}var xe=[];for(let t=0;t<256;++t)xe.push((t+256).toString(16).slice(1));function qp(t,e=0){return(xe[t[e+0]]+xe[t[e+1]]+xe[t[e+2]]+xe[t[e+3]]+"-"+xe[t[e+4]]+xe[t[e+5]]+"-"+xe[t[e+6]]+xe[t[e+7]]+"-"+xe[t[e+8]]+xe[t[e+9]]+"-"+xe[t[e+10]]+xe[t[e+11]]+xe[t[e+12]]+xe[t[e+13]]+xe[t[e+14]]+xe[t[e+15]]).toLowerCase()}var Fp=Ke(require("crypto")),Ml={randomUUID:Fp.default.randomUUID};function TS(t,e,r){if(Ml.randomUUID&&!e&&!t)return Ml.randomUUID();t=t||{};let n=t.random||(t.rng||Ol)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,e){r=r||0;for(let i=0;i<16;++i)e[r+i]=n[i];return e}return qp(n)}var zt=TS;var Up=Pl.String.withConstraint(t=>/^\d{4}-\d{2}-\d{2}$/.test(t)),zp=Pl.String.withConstraint(t=>/^\d{2}:\d{2}$/.test(t)),Qe=class{constructor(e){this.id=e?.id||zt(),this.content=e?.content||"",this.priority=e?.priority||4,this.description=e?.description||"",this.order=e?.order||0,this.project=e?.project||{id:"",name:""},this.sectionID=e?.sectionID||"",this.labels=e?.labels||[],this.completed=e?.completed||!1,this.parent=e?.parent||null,this.children=e?.children||[],this.due=e?.due||null,this.metadata=e?.metadata||{}}hasDescription(){return this.description.length>0}hasProject(){return this.project!==null&&this.project.name.length>0}hasAnyLabels(){return this.labels.length>0}isCompleted(){return this.completed}hasParent(){return this.parent!==null}hasChildren(){return this.children.length>0}hasDue(){return this.due?!!this.due.string:!1}};function Ie(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function Bp(t){let e=/#([a-zA-Z_/-]+[a-zA-Z0-9_/-]*|[a-zA-Z_/-][a-zA-Z0-9_/-]+)/g,n=(t.match(e)||[]).map(s=>s.substring(1)),i=t.replace(/(\s?)#([a-zA-Z_/-]+[a-zA-Z0-9_/-]*|[a-zA-Z_/-][a-zA-Z0-9_/-]+)(\s?)/g," ").trim();return[n,i]}function Wp(t,e,r){let n=e.exec(t);return n&&n[r]?n.index+n[0].indexOf(n[r]):null}var Zs=class{constructor(e){e.subscribe(r=>{this.startingNotation=r.parsingSettings.markdownStartingNotation,this.endingNotation=r.parsingSettings.markdownEndingNotation,this.projects=r.userMetadata.projects})}buildSuggestions(e,r){let n=[];return n=n.concat(this.getAttributeSuggestions(e,r)),n=n.concat(this.getPrioritySuggestions(e,r)),n=n.concat(this.getDueSuggestions(e,r)),n=n.concat(this.getProjectSuggestions(e,r)),n}getAttributeSuggestions(e,r){let n=[],i=new RegExp(`${Ie(this.startingNotation)}(\\s*[a-zA-Z]*)(?=:)?`,"g"),s=Yp(e,i,r);if(!s)return n;let o=s[1].trim()||"",a=["id","content","children","parent","order","sectionID","completed","labels"],u=Object.keys(new Qe).filter(c=>!a.includes(c)).filter(c=>c.startsWith(o)),d=SS(e.substring(r),this.endingNotation);return n=u.map(c=>({displayText:c,replaceText:`${this.startingNotation}${c}: ${this.endingNotation}`,replaceFrom:s.index,replaceTo:r+d,cursorPosition:s.index+this.startingNotation.length+c.length+2})),n}getPrioritySuggestions(e,r){let n=[],i=new RegExp(`${Ie(this.startingNotation)}\\s?priority:\\s*${Ie(this.endingNotation)}`,"g"),s=Yp(e,i,r);return s&&(n=["1","2","3","4"].map(a=>{let l=`${this.startingNotation}priority: ${a}${this.endingNotation}`;return{displayText:a,replaceText:l,replaceFrom:s.index,replaceTo:s.index+s[0].length,cursorPosition:s.index+l.length}})),n}getDueSuggestions(e,r){let n=[],i=new RegExp(`${Ie(this.startingNotation)}\\s?due:(\\s*[0-9a-zA-Zs-]*\\s*)${Ie(this.endingNotation)}`,"g"),s=Hp(e,i,r,1);if(!s)return n;let o=(s[1]||"").trim();return n=["today","tomorrow","Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","next week","next month","next year"].filter(u=>u.toLowerCase().startsWith(o.toLowerCase())).map(u=>{let d=`${this.startingNotation}due: ${u}${this.endingNotation}`;return{displayText:u,replaceText:d,replaceFrom:s.index,replaceTo:s.index+s[0].length,cursorPosition:s.index+d.length}}),n}getProjectSuggestions(e,r){let n=[],i=new RegExp(`${Ie(this.startingNotation)}\\s?project:(\\s*[0-9a-zA-Zs-]*\\s*)${Ie(this.endingNotation)}`,"g"),s=Hp(e,i,r,1);if(!s)return n;let o=(s[1]||"").trim();return n=this.projects.filter(l=>l.name.toLowerCase().startsWith(o.toLowerCase())).map(l=>{let u=`${this.startingNotation}project: ${l.name}${this.endingNotation}`;return{displayText:l.name,replaceText:u,replaceFrom:s.index,replaceTo:s.index+s[0].length,cursorPosition:s.index+u.length,innerHTML:`${l.name}<span style="
                    display: inline-block;
                    width: 10px;
                    height: 10px;
                    border-radius: 50%;
                    background-color: ${l.color};
                    margin-left: 10px;
                    vertical-align: baseline;
                    float: right;
                    "></span>`}}),n}};function Yp(t,e,r){let n=[...t.matchAll(e)];for(let i of n)if(i.index!==void 0&&i.index<=r&&r<=i.index+i[0].length)return i}function Hp(t,e,r,n){let i=[...t.matchAll(e)];for(let s of i)if(s.index!==void 0&&s[n]){let o=Wp(s[0],e,n)+s.index,a=o+s[n].length;if(r>=o&&r<=a)return s}}function SS(t,e){if(!t)return 0;for(let r=1;r<=e.length;r++){let n=t.substring(0,r);if(e.startsWith(n)){let i=t.substring(r,r+1);if(i===" "||i===`
`||i==="")return r}}return 0}var Vp=["ID","API"];function Dn(t){let e=t;for(let r of Vp){let n=new RegExp(r,"g");e=e.replace(n,`-${r.toLowerCase()}`)}return e=e.replace(/([A-Z])/g,r=>`-${r.toLowerCase()}`),e=e.replace(/^-/,""),e}function Gp(t){let e=t;for(let r of Vp){let n=new RegExp(`-${r.toLowerCase()}`,"g");e=e.replace(n,r)}return e=e.replace(/-([a-z])/g,(r,n)=>n.toUpperCase()),e}function Kp(t){return t.trim().split(/\s+/).map((e,r)=>r===0?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join("")}var zr=class t{constructor(e){this.spanElementPattern=/<span class="[^"]+" style="display:none;">(.*?)<\/span>/g;e.subscribe(r=>{this.indicatorTag=Ie(r.parsingSettings.indicatorTag),this.startingNotation=Ie(r.parsingSettings.markdownStartingNotation),this.endingNotation=Ie(r.parsingSettings.markdownEndingNotation)}),this.unformattedMarkdownPattern=new RegExp(`^\\s*- \\[[\\s*+-x=]\\](.*)(${this.startingNotation}.*?${this.endingNotation})?`)}static{this.formattedMarkdownPattern=/^\s*- \[[^\]]\](.*?)(<span class="[^"]+" style="display:none;">.*?<\/span>)+$/}hasIndicatorTag(e){return new RegExp(`#${this.indicatorTag}`).test(e)}getAttributePattern(){return new RegExp(`${this.startingNotation}.*?${this.endingNotation}`,"g")}hasSpanElement(e){return this.spanElementPattern.test(e)}isValidFormattedTaskMarkdown(e){if(!this.hasSpanElement(e))return!1;let r=t.formattedMarkdownPattern.exec(e);if(r&&r[1]){let n=r[1].replace(this.getAttributePattern(),"").trim();return this.hasIndicatorTag(n)}return!1}isValidUnformattedTaskMarkdown(e){let r=this.unformattedMarkdownPattern.exec(e);if(r&&r[1]){if(!r[2]&&this.hasSpanElement(e))return!1;let n=r[1].replace(this.getAttributePattern(),"").trim();return this.hasIndicatorTag(n)}return!1}getTaskElAttributeNames(){let e=["content","completed"];return Object.keys(new Qe).filter(n=>!e.includes(n))}getTaskElementSpans(e){return this.getTaskElAttributeNames().map(n=>Dn(n)).reduce((n,i)=>{let s=e.querySelector(`span.${i}`);return s&&(n[i]=s),n},{})}checkTaskElementClass(e){return!(!e.querySelector(".task-list-item-checkbox")||!e.querySelector(".list-bullet")||!this.checkTaskElementIndicatorTag(e))}checkTaskElementIndicatorTag(e){let r=e.querySelector(".tag");return!(!r||!r.textContent?.includes(`#${this.indicatorTag}`))}isValidTaskElement(e){if(!this.checkTaskElementClass(e))return!1;let r=this.getTaskElementSpans(e);return Object.values(r).length>0&&Object.values(r).some(n=>n!==null)}isCompleteTaskElement(e){if(!this.checkTaskElementClass(e))return!1;let r=this.getTaskElementSpans(e);return this.getTaskElAttributeNames().map(i=>Dn(i)).every(i=>r[i]!==void 0&&r[i]!==null)}};var Ln=class extends Js.EditorSuggest{constructor(r){super(r);this.app=r,this.attributeSuggester=new Zs($e),this.taskValidator=new zr($e),this.scope.register([],"Tab",n=>(this.suggestions.useSelectedItem(n),!1))}onTrigger(r,n,i){let s=n.getLine(r.line);return this.taskValidator.isValidUnformattedTaskMarkdown(s)?{start:{line:r.line,ch:0},end:{line:r.line,ch:s.length},query:s}:null}getSuggestions(r){let n=r.query,s=r.editor.getCursor().ch;return this.attributeSuggester.buildSuggestions(n,s).map(a=>({...a,context:r}))}renderSuggestion(r,n){if(!r.innerHTML)n.setText(r.displayText);else{let i={display:"flex",alignItems:"center",justifyContent:"space-between"};n.innerHTML=r.innerHTML,n.setCssStyles(i)}}selectSuggestion(r,n){if(!this.app.workspace.getActiveViewOfType(Js.MarkdownView)){ee.error("No active MarkdownView found.");return}let s=r.context.editor.getCursor(),o={line:s.line,ch:r.replaceFrom??s.ch},a={line:s.line,ch:r.replaceTo??s.ch};r.context.editor.replaceRange(r.replaceText,o,a),r.context.editor.setCursor({line:s.line,ch:r.cursorPosition})}};function Zp(t){if(!ES(t))return null;let e=t.r.toString(16).padStart(2,"0"),r=t.g.toString(16).padStart(2,"0"),n=t.b.toString(16).padStart(2,"0");return`#${e}${r}${n}`}function ES(t){try{return t.r>=0&&t.g>=0&&t.b>=0}catch{return!1}}function Jp(t,e=50,r=50){let n=0;for(let s=0;s<t.length;s++)n=t.charCodeAt(s)+((n<<5)-n);return{h:n%360,s:e,l:r}}function Xp(t){let e=t.h/360,r=t.s/100,n=t.l/100,i,s,o;if(r===0)i=s=o=n;else{let a=(d,c,f)=>(f<0&&(f+=1),f>1&&(f-=1),f<.16666666666666666?d+(c-d)*6*f:f<.5?c:f<.6666666666666666?d+(c-d)*(.6666666666666666-f)*6:d),l=n<.5?n*(1+r):n+r-n*r,u=2*n-l;i=a(u,l,e+1/3),s=a(u,l,e),o=a(u,l,e-1/3)}return{r:Math.round(i*255),g:Math.round(s*255),b:Math.round(o*255)}}var Xs=class{constructor(){this.projects=new Map,this.nameToIdMap=new Map}getProjectsData(){return[...this.projects.values()]}updateProjects(e){if(!(!e||!e.length))for(let r of e)this.updateProject(r)}updateProject(e){if(!e.name&&!e.id)return;let r;if(e.id)r=this.projects.get(e.id);else if(e.name){let n=this.nameToIdMap.get(e.name);n&&(r=this.projects.get(n))}if(r){let n={...r,...e};this.ensureProjectData(n),this.projects.set(n.id,n)}else{let n={id:e.id||zt(),name:e.name,color:e.color||this.assignColor(e.name)};this.ensureProjectData(n),this.projects.set(n.id,n),this.nameToIdMap.set(n.name,n.id)}}ensureProjectData(e){e.id||(e.id=zt()),e.color||(e.color=this.assignColor(e.name))}getProjectById(e){return this.projects.get(e)}getProjectByName(e){let r=this.nameToIdMap.get(e);if(r)return this.projects.get(r)}addProjectByName(e){if(this.nameToIdMap.has(e))return null;let r=zt(),n=this.assignColor(e),i={id:r,name:e,color:n};return this.projects.set(r,i),this.nameToIdMap.set(e,r),i}addProject(e){if(!e.name&&!e.id)return;let r;if(e.id)r=this.projects.get(e.id);else if(e.name){let n=this.nameToIdMap.get(e.name);n&&(r=this.projects.get(n))}if(!r){let n={id:e.id||zt(),name:e.name,color:e.color||this.assignColor(e.name)};this.ensureProjectData(n),this.projects.set(n.id,n),this.nameToIdMap.set(n.name,n.id)}}deleteProjectById(e){let r=this.projects.get(e);r&&(this.nameToIdMap.delete(r.name),this.projects.delete(e))}deleteProjectByName(e){let r=this.nameToIdMap.get(e);r&&this.deleteProjectById(r)}assignColor(e){return Zp(Xp(Jp(e)))}};function Qp(t){if(!t)return[];try{let e=t.replace(/'/g,'"');return JSON.parse(e)}catch{throw new Error(`Failed to convert string to array: ${t}`)}}function em(t){return t.toLowerCase()==="true"}var im=Ke(tm(),1),jn=Ke(Bt(),1);var K;(function(t){t[t.AM=0]="AM",t[t.PM=1]="PM"})(K||(K={}));var Se;(function(t){t[t.SUNDAY=0]="SUNDAY",t[t.MONDAY=1]="MONDAY",t[t.TUESDAY=2]="TUESDAY",t[t.WEDNESDAY=3]="WEDNESDAY",t[t.THURSDAY=4]="THURSDAY",t[t.FRIDAY=5]="FRIDAY",t[t.SATURDAY=6]="SATURDAY"})(Se||(Se={}));var Fe;(function(t){t[t.JANUARY=1]="JANUARY",t[t.FEBRUARY=2]="FEBRUARY",t[t.MARCH=3]="MARCH",t[t.APRIL=4]="APRIL",t[t.MAY=5]="MAY",t[t.JUNE=6]="JUNE",t[t.JULY=7]="JULY",t[t.AUGUST=8]="AUGUST",t[t.SEPTEMBER=9]="SEPTEMBER",t[t.OCTOBER=10]="OCTOBER",t[t.NOVEMBER=11]="NOVEMBER",t[t.DECEMBER=12]="DECEMBER"})(Fe||(Fe={}));function rm(t,e){e=e.add(1,"day"),cr(t,e),Br(t,e)}function et(t,e){t.assign("day",e.date()),t.assign("month",e.month()+1),t.assign("year",e.year())}function Qs(t,e){t.assign("hour",e.hour()),t.assign("minute",e.minute()),t.assign("second",e.second()),t.assign("millisecond",e.millisecond()),t.get("hour")<12?t.assign("meridiem",K.AM):t.assign("meridiem",K.PM)}function cr(t,e){t.imply("day",e.date()),t.imply("month",e.month()+1),t.imply("year",e.year())}function Br(t,e){t.imply("hour",e.hour()),t.imply("minute",e.minute()),t.imply("second",e.second()),t.imply("millisecond",e.millisecond())}var $l=Ke(Bt(),1);var xS={ACDT:630,ACST:570,ADT:-180,AEDT:660,AEST:600,AFT:270,AKDT:-480,AKST:-540,ALMT:360,AMST:-180,AMT:-240,ANAST:720,ANAT:720,AQTT:300,ART:-180,AST:-240,AWDT:540,AWST:480,AZOST:0,AZOT:-60,AZST:300,AZT:240,BNT:480,BOT:-240,BRST:-120,BRT:-180,BST:60,BTT:360,CAST:480,CAT:120,CCT:390,CDT:-300,CEST:120,CET:{timezoneOffsetDuringDst:2*60,timezoneOffsetNonDst:60,dstStart:t=>nm(t,Fe.MARCH,Se.SUNDAY,2),dstEnd:t=>nm(t,Fe.OCTOBER,Se.SUNDAY,3)},CHADT:825,CHAST:765,CKT:-600,CLST:-180,CLT:-240,COT:-300,CST:-360,CT:{timezoneOffsetDuringDst:-5*60,timezoneOffsetNonDst:-6*60,dstStart:t=>Wt(t,Fe.MARCH,Se.SUNDAY,2,2),dstEnd:t=>Wt(t,Fe.NOVEMBER,Se.SUNDAY,1,2)},CVT:-60,CXT:420,ChST:600,DAVT:420,EASST:-300,EAST:-360,EAT:180,ECT:-300,EDT:-240,EEST:180,EET:120,EGST:0,EGT:-60,EST:-300,ET:{timezoneOffsetDuringDst:-4*60,timezoneOffsetNonDst:-5*60,dstStart:t=>Wt(t,Fe.MARCH,Se.SUNDAY,2,2),dstEnd:t=>Wt(t,Fe.NOVEMBER,Se.SUNDAY,1,2)},FJST:780,FJT:720,FKST:-180,FKT:-240,FNT:-120,GALT:-360,GAMT:-540,GET:240,GFT:-180,GILT:720,GMT:0,GST:240,GYT:-240,HAA:-180,HAC:-300,HADT:-540,HAE:-240,HAP:-420,HAR:-360,HAST:-600,HAT:-90,HAY:-480,HKT:480,HLV:-210,HNA:-240,HNC:-360,HNE:-300,HNP:-480,HNR:-420,HNT:-150,HNY:-540,HOVT:420,ICT:420,IDT:180,IOT:360,IRDT:270,IRKST:540,IRKT:540,IRST:210,IST:330,JST:540,KGT:360,KRAST:480,KRAT:480,KST:540,KUYT:240,LHDT:660,LHST:630,LINT:840,MAGST:720,MAGT:720,MART:-510,MAWT:300,MDT:-360,MESZ:120,MEZ:60,MHT:720,MMT:390,MSD:240,MSK:180,MST:-420,MT:{timezoneOffsetDuringDst:-6*60,timezoneOffsetNonDst:-7*60,dstStart:t=>Wt(t,Fe.MARCH,Se.SUNDAY,2,2),dstEnd:t=>Wt(t,Fe.NOVEMBER,Se.SUNDAY,1,2)},MUT:240,MVT:300,MYT:480,NCT:660,NDT:-90,NFT:690,NOVST:420,NOVT:360,NPT:345,NST:-150,NUT:-660,NZDT:780,NZST:720,OMSST:420,OMST:420,PDT:-420,PET:-300,PETST:720,PETT:720,PGT:600,PHOT:780,PHT:480,PKT:300,PMDT:-120,PMST:-180,PONT:660,PST:-480,PT:{timezoneOffsetDuringDst:-7*60,timezoneOffsetNonDst:-8*60,dstStart:t=>Wt(t,Fe.MARCH,Se.SUNDAY,2,2),dstEnd:t=>Wt(t,Fe.NOVEMBER,Se.SUNDAY,1,2)},PWT:540,PYST:-180,PYT:-240,RET:240,SAMT:240,SAST:120,SBT:660,SCT:240,SGT:480,SRT:-180,SST:-660,TAHT:-600,TFT:300,TJT:300,TKT:780,TLT:540,TMT:300,TVT:720,ULAT:480,UTC:0,UYST:-120,UYT:-180,UZT:300,VET:-210,VLAST:660,VLAT:660,VUT:660,WAST:120,WAT:60,WEST:60,WESZ:60,WET:0,WEZ:0,WFT:720,WGST:-120,WGT:-180,WIB:420,WIT:540,WITA:480,WST:780,WT:0,YAKST:600,YAKT:600,YAPT:600,YEKST:360,YEKT:360};function Wt(t,e,r,n,i=0){let s=0,o=0;for(;o<n;)s++,new Date(t,e-1,s).getDay()===r&&o++;return new Date(t,e-1,s,i)}function nm(t,e,r,n=0){let i=r===0?7:r,s=new Date(t,e-1+1,1,12),o=s.getDay()===0?7:s.getDay(),a;return o===i?a=7:o<i?a=7+o-i:a=o-i,s.setDate(s.getDate()-a),new Date(t,e-1,s.getDate(),n)}function eo(t,e,r={}){if(t==null)return null;if(typeof t=="number")return t;let n=r[t]??xS[t];return n==null?null:typeof n=="number"?n:e==null?null:(0,$l.default)(e).isAfter(n.dstStart(e.getFullYear()))&&!(0,$l.default)(e).isAfter(n.dstEnd(e.getFullYear()))?n.timezoneOffsetDuringDst:n.timezoneOffsetNonDst}jn.default.extend(im.default);var Wr=class{constructor(e){e=e??new Date,e instanceof Date?this.instant=e:(this.instant=e.instant??new Date,this.timezoneOffset=eo(e.timezone,this.instant))}getDateWithAdjustedTimezone(){return new Date(this.instant.getTime()+this.getSystemTimezoneAdjustmentMinute(this.instant)*6e4)}getSystemTimezoneAdjustmentMinute(e,r){(!e||e.getTime()<0)&&(e=new Date);let n=-e.getTimezoneOffset(),i=r??this.timezoneOffset??n;return n-i}},te=class t{constructor(e,r){if(this.reference=e,this.knownValues={},this.impliedValues={},r)for(let i in r)this.knownValues[i]=r[i];let n=(0,jn.default)(e.instant);this.imply("day",n.date()),this.imply("month",n.month()+1),this.imply("year",n.year()),this.imply("hour",12),this.imply("minute",0),this.imply("second",0),this.imply("millisecond",0)}get(e){return e in this.knownValues?this.knownValues[e]:e in this.impliedValues?this.impliedValues[e]:null}isCertain(e){return e in this.knownValues}getCertainComponents(){return Object.keys(this.knownValues)}imply(e,r){return e in this.knownValues?this:(this.impliedValues[e]=r,this)}assign(e,r){return this.knownValues[e]=r,delete this.impliedValues[e],this}delete(e){delete this.knownValues[e],delete this.impliedValues[e]}clone(){let e=new t(this.reference);e.knownValues={},e.impliedValues={};for(let r in this.knownValues)e.knownValues[r]=this.knownValues[r];for(let r in this.impliedValues)e.impliedValues[r]=this.impliedValues[r];return e}isOnlyDate(){return!this.isCertain("hour")&&!this.isCertain("minute")&&!this.isCertain("second")}isOnlyTime(){return!this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isOnlyWeekdayComponent(){return this.isCertain("weekday")&&!this.isCertain("day")&&!this.isCertain("month")}isDateWithUnknownYear(){return this.isCertain("month")&&!this.isCertain("year")}isValidDate(){let e=this.dateWithoutTimezoneAdjustment();return!(e.getFullYear()!==this.get("year")||e.getMonth()!==this.get("month")-1||e.getDate()!==this.get("day")||this.get("hour")!=null&&e.getHours()!=this.get("hour")||this.get("minute")!=null&&e.getMinutes()!=this.get("minute"))}toString(){return`[ParsingComponents {knownValues: ${JSON.stringify(this.knownValues)}, impliedValues: ${JSON.stringify(this.impliedValues)}}, reference: ${JSON.stringify(this.reference)}]`}dayjs(){return(0,jn.default)(this.date())}date(){let e=this.dateWithoutTimezoneAdjustment(),r=this.reference.getSystemTimezoneAdjustmentMinute(e,this.get("timezoneOffset"));return new Date(e.getTime()+r*6e4)}dateWithoutTimezoneAdjustment(){let e=new Date(this.get("year"),this.get("month")-1,this.get("day"),this.get("hour"),this.get("minute"),this.get("second"),this.get("millisecond"));return e.setFullYear(this.get("year")),e}static createRelativeFromReference(e,r){let n=(0,jn.default)(e.instant);for(let s in r)n=n.add(r[s],s);let i=new t(e);return r.hour||r.minute||r.second?(Qs(i,n),et(i,n),e.timezoneOffset!==null&&i.assign("timezoneOffset",-e.instant.getTimezoneOffset())):(Br(i,n),e.timezoneOffset!==null&&i.imply("timezoneOffset",-e.instant.getTimezoneOffset()),r.d?(i.assign("day",n.date()),i.assign("month",n.month()+1),i.assign("year",n.year())):(r.week&&i.imply("weekday",n.day()),i.imply("day",n.date()),r.month?(i.assign("month",n.month()+1),i.assign("year",n.year())):(i.imply("month",n.month()+1),r.year?i.assign("year",n.year()):i.imply("year",n.year())))),i}},fr=class t{constructor(e,r,n,i,s){this.reference=e,this.refDate=e.instant,this.index=r,this.text=n,this.start=i||new te(e),this.end=s}clone(){let e=new t(this.reference,this.index,this.text);return e.start=this.start?this.start.clone():null,e.end=this.end?this.end.clone():null,e}date(){return this.start.date()}toString(){return`[ParsingResult {index: ${this.index}, text: '${this.text}', ...}]`}};function Dl(t,e){let r=e.replace(/\((?!\?)/g,"(?:");return`${t}${r}\\s{0,5}(?:,?\\s{0,5}${r}){0,10}`}function kS(t){let e;return t instanceof Array?e=[...t]:t instanceof Map?e=Array.from(t.keys()):e=Object.keys(t),e}function ke(t){return`(?:${kS(t).sort((r,n)=>n.length-r.length).join("|").replace(/\./g,"\\.")})`}var sm=Ke(Bt(),1);function to(t){return t<100&&(t>50?t=t+1900:t=t+2e3),t}function Yt(t,e,r){let n=(0,sm.default)(t),i=n;i=i.month(r-1),i=i.date(e),i=i.year(n.year());let s=i.add(1,"y"),o=i.add(-1,"y");return Math.abs(s.diff(n))<Math.abs(i.diff(n))?i=s:Math.abs(o.diff(n))<Math.abs(i.diff(n))&&(i=o),i.year()}var ql={sunday:0,sun:0,"sun.":0,monday:1,mon:1,"mon.":1,tuesday:2,tue:2,"tue.":2,wednesday:3,wed:3,"wed.":3,thursday:4,thurs:4,"thurs.":4,thur:4,"thur.":4,thu:4,"thu.":4,friday:5,fri:5,"fri.":5,saturday:6,sat:6,"sat.":6},Fl={january:1,february:2,march:3,april:4,may:5,june:6,july:7,august:8,september:9,october:10,november:11,december:12},Ge={...Fl,jan:1,"jan.":1,feb:2,"feb.":2,mar:3,"mar.":3,apr:4,"apr.":4,jun:6,"jun.":6,jul:7,"jul.":7,aug:8,"aug.":8,sep:9,"sep.":9,sept:9,"sept.":9,oct:10,"oct.":10,nov:11,"nov.":11,dec:12,"dec.":12},Ll={one:1,two:2,three:3,four:4,five:5,six:6,seven:7,eight:8,nine:9,ten:10,eleven:11,twelve:12},jl={first:1,second:2,third:3,fourth:4,fifth:5,sixth:6,seventh:7,eighth:8,ninth:9,tenth:10,eleventh:11,twelfth:12,thirteenth:13,fourteenth:14,fifteenth:15,sixteenth:16,seventeenth:17,eighteenth:18,nineteenth:19,twentieth:20,"twenty first":21,"twenty-first":21,"twenty second":22,"twenty-second":22,"twenty third":23,"twenty-third":23,"twenty fourth":24,"twenty-fourth":24,"twenty fifth":25,"twenty-fifth":25,"twenty sixth":26,"twenty-sixth":26,"twenty seventh":27,"twenty-seventh":27,"twenty eighth":28,"twenty-eighth":28,"twenty ninth":29,"twenty-ninth":29,thirtieth:30,"thirty first":31,"thirty-first":31},am={second:"second",seconds:"second",minute:"minute",minutes:"minute",hour:"hour",hours:"hour",day:"d",days:"d",week:"week",weeks:"week",month:"month",months:"month",quarter:"quarter",quarters:"quarter",year:"year",years:"year"},qn={s:"second",sec:"second",second:"second",seconds:"second",m:"minute",min:"minute",mins:"minute",minute:"minute",minutes:"minute",h:"hour",hr:"hour",hrs:"hour",hour:"hour",hours:"hour",d:"d",day:"d",days:"d",w:"w",week:"week",weeks:"week",mo:"month",mon:"month",mos:"month",month:"month",months:"month",qtr:"quarter",quarter:"quarter",quarters:"quarter",y:"year",yr:"year",year:"year",years:"year",...am},lm=`(?:${ke(Ll)}|[0-9]+|[0-9]+\\.[0-9]+|half(?:\\s{0,2}an?)?|an?\\b(?:\\s{0,2}few)?|few|several|the|a?\\s{0,2}couple\\s{0,2}(?:of)?)`;function RS(t){let e=t.toLowerCase();return Ll[e]!==void 0?Ll[e]:e==="a"||e==="an"||e=="the"?1:e.match(/few/)?3:e.match(/half/)?.5:e.match(/couple/)?2:e.match(/several/)?7:parseFloat(e)}var Yr=`(?:${ke(jl)}|[0-9]{1,2}(?:st|nd|rd|th)?)`;function Hr(t){let e=t.toLowerCase();return jl[e]!==void 0?jl[e]:(e=e.replace(/(?:st|nd|rd|th)$/i,""),parseInt(e))}var Vr="(?:[1-9][0-9]{0,3}\\s{0,2}(?:BE|AD|BC|BCE|CE)|[1-2][0-9]{3}|[5-9][0-9])";function Gr(t){if(/BE/i.test(t))return t=t.replace(/BE/i,""),parseInt(t)-543;if(/BCE?/i.test(t))return t=t.replace(/BCE?/i,""),-parseInt(t);if(/(AD|CE)/i.test(t))return t=t.replace(/(AD|CE)/i,""),parseInt(t);let e=parseInt(t);return to(e)}var um=`(${lm})\\s{0,3}(${ke(qn)})`,om=new RegExp(um,"i"),OS=`(${lm})\\s{0,3}(${ke(am)})`,vt=Dl("(?:(?:about|around)\\s{0,3})?",um),Ht=Dl("(?:(?:about|around)\\s{0,3})?",OS);function ct(t){let e={},r=t,n=om.exec(r);for(;n;)MS(e,n),r=r.substring(n[0].length).trim(),n=om.exec(r);return e}function MS(t,e){let r=RS(e[1]),n=qn[e[2].toLowerCase()];t[n]=r}var ne=class{constructor(){this.cachedInnerPattern=null,this.cachedPattern=null}patternLeftBoundary(){return"(\\W|^)"}pattern(e){let r=this.innerPattern(e);return r==this.cachedInnerPattern?this.cachedPattern:(this.cachedPattern=new RegExp(`${this.patternLeftBoundary()}${r.source}`,r.flags),this.cachedInnerPattern=r,this.cachedPattern)}extract(e,r){let n=r[1]??"";r.index=r.index+n.length,r[0]=r[0].substring(n.length);for(let i=2;i<r.length;i++)r[i-1]=r[i];return this.innerExtract(e,r)}};var PS=new RegExp(`(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${vt})(?=\\W|$)`,"i"),CS=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${vt})(?=\\W|$)`,"i"),AS=new RegExp(`(?:within|in|for)\\s*(?:(?:about|around|roughly|approximately|just)\\s*(?:~\\s*)?)?(${Ht})(?=\\W|$)`,"i"),Fn=class extends ne{constructor(e){super(),this.strictMode=e}innerPattern(e){return this.strictMode?AS:e.option.forwardDate?PS:CS}innerExtract(e,r){let n=ct(r[1]);return te.createRelativeFromReference(e.reference,n)}};var IS=new RegExp(`(?:on\\s{0,3})?(${Yr})(?:\\s{0,3}(?:to|\\-|\\\u2013|until|through|till)?\\s{0,3}(${Yr}))?(?:-|/|\\s{0,3}(?:of)?\\s{0,3})(${ke(Ge)})(?:(?:-|/|,?\\s{0,3})(${Vr}(?![^\\s]\\d)))?(?=\\W|$)`,"i"),cm=1,fm=2,NS=3,dm=4,Un=class extends ne{innerPattern(){return IS}innerExtract(e,r){let n=e.createParsingResult(r.index,r[0]),i=Ge[r[NS].toLowerCase()],s=Hr(r[cm]);if(s>31)return r.index=r.index+r[cm].length,null;if(n.start.assign("month",i),n.start.assign("day",s),r[dm]){let o=Gr(r[dm]);n.start.assign("year",o)}else{let o=Yt(e.refDate,s,i);n.start.imply("year",o)}if(r[fm]){let o=Hr(r[fm]);n.end=n.start.clone(),n.end.assign("day",o)}return n}};var $S=new RegExp(`(${ke(Ge)})(?:-|/|\\s*,?\\s*)(${Yr})(?!\\s*(?:am|pm))\\s*(?:(?:to|\\-)\\s*(${Yr})\\s*)?(?:(?:-|/|\\s*,?\\s*)(${Vr}))?(?=\\W|$)(?!\\:\\d)`,"i"),DS=1,LS=2,hm=3,pm=4,zn=class extends ne{innerPattern(){return $S}innerExtract(e,r){let n=Ge[r[DS].toLowerCase()],i=Hr(r[LS]);if(i>31)return null;let s=e.createParsingComponents({day:i,month:n});if(r[pm]){let l=Gr(r[pm]);s.assign("year",l)}else{let l=Yt(e.refDate,i,n);s.imply("year",l)}if(!r[hm])return s;let o=Hr(r[hm]),a=e.createParsingResult(r.index,r[0]);return a.start=s,a.end=s.clone(),a.end.assign("day",o),a}};var jS=new RegExp(`((?:in)\\s*)?(${ke(Ge)})\\s*(?:[,-]?\\s*(${Vr})?)?(?=[^\\s\\w]|\\s+[^0-9]|\\s+$|$)`,"i"),qS=1,FS=2,mm=3,Bn=class extends ne{innerPattern(){return jS}innerExtract(e,r){let n=r[FS].toLowerCase();if(r[0].length<=3&&!Fl[n])return null;let i=e.createParsingResult(r.index+(r[qS]||"").length,r.index+r[0].length);i.start.imply("day",1);let s=Ge[n];if(i.start.assign("month",s),r[mm]){let o=Gr(r[mm]);i.start.assign("year",o)}else{let o=Yt(e.refDate,1,s);i.start.imply("year",o)}return i}};var US=new RegExp(`([0-9]{4})[\\.\\/\\s](?:(${ke(Ge)})|([0-9]{1,2}))[\\.\\/\\s]([0-9]{1,2})(?=\\W|$)`,"i"),zS=1,BS=2,gm=3,WS=4,Wn=class extends ne{innerPattern(){return US}innerExtract(e,r){let n=r[gm]?parseInt(r[gm]):Ge[r[BS].toLowerCase()];if(n<1||n>12)return null;let i=parseInt(r[zS]);return{day:parseInt(r[WS]),month:n,year:i}}};var YS=new RegExp("([0-9]|0[1-9]|1[012])/([0-9]{4})","i"),HS=1,VS=2,Yn=class extends ne{innerPattern(){return YS}innerExtract(e,r){let n=parseInt(r[VS]),i=parseInt(r[HS]);return e.createParsingComponents().imply("day",1).assign("month",i).assign("year",n)}};function GS(t,e,r,n){return new RegExp(`${t}${e}(\\d{1,4})(?:(?:\\.|:|\uFF1A)(\\d{1,2})(?:(?::|\uFF1A)(\\d{2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${r}`,n)}function KS(t,e){return new RegExp(`^(${t})(\\d{1,4})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:(?:\\.|\\:|\\\uFF1A)(\\d{1,2})(?:\\.(\\d{1,6}))?)?)?(?:\\s*(a\\.m\\.|p\\.m\\.|am?|pm?))?${e}`,"i")}var ym=2,Kr=3,ro=4,no=5,Hn=6,io=class{constructor(e=!1){this.cachedPrimaryPrefix=null,this.cachedPrimarySuffix=null,this.cachedPrimaryTimePattern=null,this.cachedFollowingPhase=null,this.cachedFollowingSuffix=null,this.cachedFollowingTimePatten=null,this.strictMode=e}patternFlags(){return"i"}primaryPatternLeftBoundary(){return"(^|\\s|T|\\b)"}primarySuffix(){return"(?=\\W|$)"}followingSuffix(){return"(?=\\W|$)"}pattern(e){return this.getPrimaryTimePatternThroughCache()}extract(e,r){let n=this.extractPrimaryTimeComponents(e,r);if(!n)return r.index+=r[0].length,null;let i=r.index+r[1].length,s=r[0].substring(r[1].length),o=e.createParsingResult(i,s,n);r.index+=r[0].length;let a=e.text.substring(r.index),u=this.getFollowingTimePatternThroughCache().exec(a);return s.match(/^\d{3,4}/)&&u&&u[0].match(/^\s*([+-])\s*\d{2,4}$/)?null:!u||u[0].match(/^\s*([+-])\s*\d{3,4}$/)?this.checkAndReturnWithoutFollowingPattern(o):(o.end=this.extractFollowingTimeComponents(e,u,o),o.end&&(o.text+=u[0]),this.checkAndReturnWithFollowingPattern(o))}extractPrimaryTimeComponents(e,r,n=!1){let i=e.createParsingComponents(),s=0,o=null,a=parseInt(r[ym]);if(a>100){if(this.strictMode||r[Kr]!=null)return null;s=a%100,a=Math.floor(a/100)}if(a>24)return null;if(r[Kr]!=null){if(r[Kr].length==1&&!r[Hn])return null;s=parseInt(r[Kr])}if(s>=60)return null;if(a>12&&(o=K.PM),r[Hn]!=null){if(a>12)return null;let l=r[Hn][0].toLowerCase();l=="a"&&(o=K.AM,a==12&&(a=0)),l=="p"&&(o=K.PM,a!=12&&(a+=12))}if(i.assign("hour",a),i.assign("minute",s),o!==null?i.assign("meridiem",o):a<12?i.imply("meridiem",K.AM):i.imply("meridiem",K.PM),r[no]!=null){let l=parseInt(r[no].substring(0,3));if(l>=1e3)return null;i.assign("millisecond",l)}if(r[ro]!=null){let l=parseInt(r[ro]);if(l>=60)return null;i.assign("second",l)}return i}extractFollowingTimeComponents(e,r,n){let i=e.createParsingComponents();if(r[no]!=null){let l=parseInt(r[no].substring(0,3));if(l>=1e3)return null;i.assign("millisecond",l)}if(r[ro]!=null){let l=parseInt(r[ro]);if(l>=60)return null;i.assign("second",l)}let s=parseInt(r[ym]),o=0,a=-1;if(r[Kr]!=null?o=parseInt(r[Kr]):s>100&&(o=s%100,s=Math.floor(s/100)),o>=60||s>24)return null;if(s>=12&&(a=K.PM),r[Hn]!=null){if(s>12)return null;let l=r[Hn][0].toLowerCase();l=="a"&&(a=K.AM,s==12&&(s=0,i.isCertain("day")||i.imply("day",i.get("day")+1))),l=="p"&&(a=K.PM,s!=12&&(s+=12)),n.start.isCertain("meridiem")||(a==K.AM?(n.start.imply("meridiem",K.AM),n.start.get("hour")==12&&n.start.assign("hour",0)):(n.start.imply("meridiem",K.PM),n.start.get("hour")!=12&&n.start.assign("hour",n.start.get("hour")+12)))}return i.assign("hour",s),i.assign("minute",o),a>=0?i.assign("meridiem",a):n.start.isCertain("meridiem")&&n.start.get("hour")>12?n.start.get("hour")-12>s?i.imply("meridiem",K.AM):s<=12&&(i.assign("hour",s+12),i.assign("meridiem",K.PM)):s>12?i.imply("meridiem",K.PM):s<=12&&i.imply("meridiem",K.AM),i.date().getTime()<n.start.date().getTime()&&i.imply("day",i.get("day")+1),i}checkAndReturnWithoutFollowingPattern(e){if(e.text.match(/^\d$/)||e.text.match(/^\d\d\d+$/)||e.text.match(/\d[apAP]$/))return null;let r=e.text.match(/[^\d:.](\d[\d.]+)$/);if(r){let n=r[1];if(this.strictMode||n.includes(".")&&!n.match(/\d(\.\d{2})+$/)||parseInt(n)>24)return null}return e}checkAndReturnWithFollowingPattern(e){if(e.text.match(/^\d+-\d+$/))return null;let r=e.text.match(/[^\d:.](\d[\d.]+)\s*-\s*(\d[\d.]+)$/);if(r){if(this.strictMode)return null;let n=r[1],i=r[2];if(i.includes(".")&&!i.match(/\d(\.\d{2})+$/))return null;let s=parseInt(i),o=parseInt(n);if(s>24||o>24)return null}return e}getPrimaryTimePatternThroughCache(){let e=this.primaryPrefix(),r=this.primarySuffix();return this.cachedPrimaryPrefix===e&&this.cachedPrimarySuffix===r?this.cachedPrimaryTimePattern:(this.cachedPrimaryTimePattern=GS(this.primaryPatternLeftBoundary(),e,r,this.patternFlags()),this.cachedPrimaryPrefix=e,this.cachedPrimarySuffix=r,this.cachedPrimaryTimePattern)}getFollowingTimePatternThroughCache(){let e=this.followingPhase(),r=this.followingSuffix();return this.cachedFollowingPhase===e&&this.cachedFollowingSuffix===r?this.cachedFollowingTimePatten:(this.cachedFollowingTimePatten=KS(e,r),this.cachedFollowingPhase=e,this.cachedFollowingSuffix=r,this.cachedFollowingTimePatten)}};var Vn=class extends io{constructor(e){super(e)}followingPhase(){return"\\s*(?:\\-|\\\u2013|\\~|\\\u301C|to|until|through|till|\\?)\\s*"}primaryPrefix(){return"(?:(?:at|from)\\s*)??"}primarySuffix(){return"(?:\\s*(?:o\\W*clock|at\\s*night|in\\s*the\\s*(?:morning|afternoon)))?(?!/)(?=\\W|$)"}extractPrimaryTimeComponents(e,r){let n=super.extractPrimaryTimeComponents(e,r);if(n){if(r[0].endsWith("night")){let i=n.get("hour");i>=6&&i<12?(n.assign("hour",n.get("hour")+12),n.assign("meridiem",K.PM)):i<6&&n.assign("meridiem",K.AM)}if(r[0].endsWith("afternoon")){n.assign("meridiem",K.PM);let i=n.get("hour");i>=0&&i<=6&&n.assign("hour",n.get("hour")+12)}r[0].endsWith("morning")&&(n.assign("meridiem",K.AM),n.get("hour")<12&&n.assign("hour",n.get("hour")))}return n}};function Zr(t){let e={};for(let r in t)e[r]=-t[r];return e}function bm(t,e){let r=t.clone(),n=t.dayjs();for(let i in e)n=n.add(e[i],i);return("day"in e||"d"in e||"week"in e||"month"in e||"year"in e)&&(r.imply("day",n.date()),r.imply("month",n.month()+1),r.imply("year",n.year())),("second"in e||"minute"in e||"hour"in e)&&(r.imply("second",n.second()),r.imply("minute",n.minute()),r.imply("hour",n.hour())),r}var ZS=new RegExp(`(${vt})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),JS=new RegExp(`(${Ht})\\s{0,5}(?:ago|before|earlier)(?=\\W|$)`,"i"),Gn=class extends ne{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?JS:ZS}innerExtract(e,r){let n=ct(r[1]),i=Zr(n);return te.createRelativeFromReference(e.reference,i)}};var XS=new RegExp(`(${vt})\\s{0,5}(?:later|after|from now|henceforth|forward|out)(?=(?:\\W|$))`,"i"),QS=new RegExp("("+Ht+")(later|from now)(?=(?:\\W|$))","i"),eE=1,Kn=class extends ne{constructor(e){super(),this.strictMode=e}innerPattern(){return this.strictMode?QS:XS}innerExtract(e,r){let n=ct(r[eE]);return te.createRelativeFromReference(e.reference,n)}};var so=class{refine(e,r){return r.filter(n=>this.isValid(e,n))}},ft=class{refine(e,r){if(r.length<2)return r;let n=[],i=r[0],s=null;for(let o=1;o<r.length;o++){s=r[o];let a=e.text.substring(i.index+i.text.length,s.index);if(!this.shouldMergeResults(a,i,s,e))n.push(i),i=s;else{let l=i,u=s,d=this.mergeResults(a,l,u,e);e.debug(()=>{console.log(`${this.constructor.name} merged ${l} and ${u} into ${d}`)}),i=d}}return i!=null&&n.push(i),n}};var Zn=class extends ft{shouldMergeResults(e,r,n){return!r.end&&!n.end&&e.match(this.patternBetween())!=null}mergeResults(e,r,n){if(!r.start.isOnlyWeekdayComponent()&&!n.start.isOnlyWeekdayComponent()&&(n.start.getCertainComponents().forEach(s=>{r.start.isCertain(s)||r.start.imply(s,n.start.get(s))}),r.start.getCertainComponents().forEach(s=>{n.start.isCertain(s)||n.start.imply(s,r.start.get(s))})),r.start.date().getTime()>n.start.date().getTime()){let s=r.start.dayjs(),o=n.start.dayjs();n.start.isOnlyWeekdayComponent()&&o.add(7,"days").isAfter(s)?(o=o.add(7,"days"),n.start.imply("day",o.date()),n.start.imply("month",o.month()+1),n.start.imply("year",o.year())):r.start.isOnlyWeekdayComponent()&&s.add(-7,"days").isBefore(o)?(s=s.add(-7,"days"),r.start.imply("day",s.date()),r.start.imply("month",s.month()+1),r.start.imply("year",s.year())):n.start.isDateWithUnknownYear()&&o.add(1,"years").isAfter(s)?(o=o.add(1,"years"),n.start.imply("year",o.year())):r.start.isDateWithUnknownYear()&&s.add(-1,"years").isBefore(o)?(s=s.add(-1,"years"),r.start.imply("year",s.year())):[n,r]=[r,n]}let i=r.clone();return i.start=r.start,i.end=n.start,i.index=Math.min(r.index,n.index),r.index<n.index?i.text=r.text+e+n.text:i.text=n.text+e+r.text,i}};var Jn=class extends Zn{patternBetween(){return/^\s*(to|-|–|until|through|till)\s*$/i}};function Ul(t,e){let r=t.clone(),n=t.start,i=e.start;if(r.start=_m(n,i),t.end!=null||e.end!=null){let s=t.end==null?t.start:t.end,o=e.end==null?e.start:e.end,a=_m(s,o);if(t.end==null&&a.date().getTime()<r.start.date().getTime()){let l=a.dayjs().add(1,"day");a.isCertain("day")?et(a,l):cr(a,l)}r.end=a}return r}function _m(t,e){let r=t.clone();return e.isCertain("hour")?(r.assign("hour",e.get("hour")),r.assign("minute",e.get("minute")),e.isCertain("second")?(r.assign("second",e.get("second")),e.isCertain("millisecond")?r.assign("millisecond",e.get("millisecond")):r.imply("millisecond",e.get("millisecond"))):(r.imply("second",e.get("second")),r.imply("millisecond",e.get("millisecond")))):(r.imply("hour",e.get("hour")),r.imply("minute",e.get("minute")),r.imply("second",e.get("second")),r.imply("millisecond",e.get("millisecond"))),e.isCertain("timezoneOffset")&&r.assign("timezoneOffset",e.get("timezoneOffset")),e.isCertain("meridiem")?r.assign("meridiem",e.get("meridiem")):e.get("meridiem")!=null&&r.get("meridiem")==null&&r.imply("meridiem",e.get("meridiem")),r.get("meridiem")==K.PM&&r.get("hour")<12&&(e.isCertain("hour")?r.assign("hour",r.get("hour")+12):r.imply("hour",r.get("hour")+12)),r}var Xn=class extends ft{shouldMergeResults(e,r,n){return(r.start.isOnlyDate()&&n.start.isOnlyTime()||n.start.isOnlyDate()&&r.start.isOnlyTime())&&e.match(this.patternBetween())!=null}mergeResults(e,r,n){let i=r.start.isOnlyDate()?Ul(r,n):Ul(n,r);return i.index=r.index,i.text=r.text+e+n.text,i}};var Qn=class extends Xn{patternBetween(){return new RegExp("^\\s*(T|at|after|before|on|of|,|-)?\\s*$")}};var tE=new RegExp("^\\s*,?\\s*\\(?([A-Z]{2,4})\\)?(?=\\W|$)","i"),ei=class{constructor(e){this.timezoneOverrides=e}refine(e,r){let n=e.option.timezones??{};return r.forEach(i=>{let s=e.text.substring(i.index+i.text.length),o=tE.exec(s);if(!o)return;let a=o[1].toUpperCase(),l=i.start.date()??i.refDate??new Date,u={...this.timezoneOverrides,...n},d=eo(a,l,u);if(d==null)return;e.debug(()=>{console.log(`Extracting timezone: '${a}' into: ${d} for: ${i.start}`)});let c=i.start.get("timezoneOffset");c!==null&&d!=c&&(i.start.isCertain("timezoneOffset")||a!=o[1])||i.start.isOnlyDate()&&a!=o[1]||(i.text+=o[0],i.start.isCertain("timezoneOffset")||i.start.assign("timezoneOffset",d),i.end!=null&&!i.end.isCertain("timezoneOffset")&&i.end.assign("timezoneOffset",d))}),r}};var rE=new RegExp("^\\s*(?:\\(?(?:GMT|UTC)\\s?)?([+-])(\\d{1,2})(?::?(\\d{2}))?\\)?","i"),nE=1,iE=2,sE=3,ti=class{refine(e,r){return r.forEach(function(n){if(n.start.isCertain("timezoneOffset"))return;let i=e.text.substring(n.index+n.text.length),s=rE.exec(i);if(!s)return;e.debug(()=>{console.log(`Extracting timezone: '${s[0]}' into : ${n}`)});let o=parseInt(s[iE]),a=parseInt(s[sE]||"0"),l=o*60+a;l>14*60||(s[nE]==="-"&&(l=-l),n.end!=null&&n.end.assign("timezoneOffset",l),n.start.assign("timezoneOffset",l),n.text+=s[0])}),r}};var Jr=class{refine(e,r){if(r.length<2)return r;let n=[],i=r[0];for(let s=1;s<r.length;s++){let o=r[s];o.index<i.index+i.text.length?o.text.length>i.text.length&&(i=o):(n.push(i),i=o)}return i!=null&&n.push(i),n}};var wm=Ke(Bt(),1);var ri=class{refine(e,r){return e.option.forwardDate&&r.forEach(function(n){let i=(0,wm.default)(e.refDate);if(n.start.isOnlyTime()&&i.isAfter(n.start.dayjs())&&(i=i.add(1,"day"),cr(n.start,i),n.end&&n.end.isOnlyTime()&&(cr(n.end,i),n.start.dayjs().isAfter(n.end.dayjs())&&(i=i.add(1,"day"),cr(n.end,i)))),n.start.isOnlyWeekdayComponent()&&i.isAfter(n.start.dayjs())&&(i.day()>=n.start.get("weekday")?i=i.day(n.start.get("weekday")+7):i=i.day(n.start.get("weekday")),n.start.imply("day",i.date()),n.start.imply("month",i.month()+1),n.start.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.start})`)}),n.end&&n.end.isOnlyWeekdayComponent()&&(i.day()>n.end.get("weekday")?i=i.day(n.end.get("weekday")+7):i=i.day(n.end.get("weekday")),n.end.imply("day",i.date()),n.end.imply("month",i.month()+1),n.end.imply("year",i.year()),e.debug(()=>{console.log(`Forward weekly adjusted for ${n} (${n.end})`)}))),n.start.isDateWithUnknownYear()&&i.isAfter(n.start.dayjs()))for(let s=0;s<3&&i.isAfter(n.start.dayjs());s++)n.start.imply("year",n.start.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.start})`)}),n.end&&!n.end.isCertain("year")&&(n.end.imply("year",n.end.get("year")+1),e.debug(()=>{console.log(`Forward yearly adjusted for ${n} (${n.end})`)}))}),r}};var ni=class extends so{constructor(e){super(),this.strictMode=e}isValid(e,r){return r.text.replace(" ","").match(/^\d*(\.\d*)?$/)?(e.debug(()=>{console.log(`Removing unlikely result '${r.text}'`)}),!1):r.start.isValidDate()?r.end&&!r.end.isValidDate()?(e.debug(()=>{console.log(`Removing invalid result: ${r} (${r.end})`)}),!1):this.strictMode?this.isStrictModeValid(e,r):!0:(e.debug(()=>{console.log(`Removing invalid result: ${r} (${r.start})`)}),!1)}isStrictModeValid(e,r){return r.start.isOnlyWeekdayComponent()?(e.debug(()=>{console.log(`(Strict) Removing weekday only component: ${r} (${r.end})`)}),!1):r.start.isOnlyTime()&&(!r.start.isCertain("hour")||!r.start.isCertain("minute"))?(e.debug(()=>{console.log(`(Strict) Removing uncertain time component: ${r} (${r.end})`)}),!1):!0}};var oE=new RegExp("([0-9]{4})\\-([0-9]{1,2})\\-([0-9]{1,2})(?:T([0-9]{1,2}):([0-9]{1,2})(?::([0-9]{1,2})(?:\\.(\\d{1,4}))?)?(?:Z|([+-]\\d{2}):?(\\d{2})?)?)?(?=\\W|$)","i"),aE=1,lE=2,uE=3,vm=4,cE=5,Tm=6,Sm=7,Em=8,xm=9,ii=class extends ne{innerPattern(){return oE}innerExtract(e,r){let n={};if(n.year=parseInt(r[aE]),n.month=parseInt(r[lE]),n.day=parseInt(r[uE]),r[vm]!=null)if(n.hour=parseInt(r[vm]),n.minute=parseInt(r[cE]),r[Tm]!=null&&(n.second=parseInt(r[Tm])),r[Sm]!=null&&(n.millisecond=parseInt(r[Sm])),r[Em]==null)n.timezoneOffset=0;else{let i=parseInt(r[Em]),s=0;r[xm]!=null&&(s=parseInt(r[xm]));let o=i*60;o<0?o-=s:o+=s,n.timezoneOffset=o}return n}};var si=class extends ft{mergeResults(e,r,n){let i=n.clone();return i.index=r.index,i.text=r.text+e+i.text,i.start.assign("weekday",r.start.get("weekday")),i.end&&i.end.assign("weekday",r.start.get("weekday")),i}shouldMergeResults(e,r,n){return r.start.isOnlyWeekdayComponent()&&!r.start.isCertain("hour")&&n.start.isCertain("day")&&e.match(/^,?\s*$/)!=null}};function km(t,e=!1){return t.parsers.unshift(new ii),t.refiners.unshift(new si),t.refiners.unshift(new ti),t.refiners.unshift(new Jr),t.refiners.push(new ei),t.refiners.push(new Jr),t.refiners.push(new ri),t.refiners.push(new ni(e)),t}var qm=Ke(Bt(),1);var Xr=Ke(Bt(),1);function Rm(t){let e=(0,Xr.default)(t.instant),r=new te(t,{});return et(r,e),Qs(r,e),t.timezoneOffset!==null&&r.assign("timezoneOffset",e.utcOffset()),r}function Om(t){let e=(0,Xr.default)(t.instant),r=new te(t,{});return et(r,e),Br(r,e),r}function Mm(t){return fE(t,1)}function fE(t,e){return Cm(t,-e)}function Pm(t){return Cm(t,1)}function Cm(t,e){let r=(0,Xr.default)(t.instant),n=new te(t,{});return r=r.add(e,"day"),et(n,r),Br(n,r),n}function Am(t,e=22){let r=(0,Xr.default)(t.instant),n=new te(t,{});return n.imply("hour",e),n.imply("meridiem",K.PM),et(n,r),n}function Im(t,e=20){let r=new te(t,{});return r.imply("meridiem",K.PM),r.imply("hour",e),r}function Nm(t){let e=new te(t,{}),r=(0,Xr.default)(t.instant);return r.hour()>2&&rm(e,r),e.assign("hour",0),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e}function $m(t,e=6){let r=new te(t,{});return r.imply("meridiem",K.AM),r.imply("hour",e),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r}function Dm(t,e=15){let r=new te(t,{});return r.imply("meridiem",K.PM),r.imply("hour",e),r.imply("minute",0),r.imply("second",0),r.imply("millisecond",0),r}function Lm(t){let e=new te(t,{});return e.imply("meridiem",K.AM),e.imply("hour",12),e.imply("minute",0),e.imply("second",0),e.imply("millisecond",0),e}var dE=/(now|today|tonight|tomorrow|tmr|tmrw|yesterday|last\s*night)(?=\W|$)/i,oi=class extends ne{innerPattern(e){return dE}innerExtract(e,r){let n=(0,qm.default)(e.refDate),i=r[0].toLowerCase(),s=e.createParsingComponents();switch(i){case"now":return Rm(e.reference);case"today":return Om(e.reference);case"yesterday":return Mm(e.reference);case"tomorrow":case"tmr":case"tmrw":return Pm(e.reference);case"tonight":return Am(e.reference);default:i.match(/last\s*night/)&&(n.hour()>6&&(n=n.add(-1,"day")),et(s,n),s.imply("hour",0));break}return s}};var hE=/(?:this)?\s{0,3}(morning|afternoon|evening|night|midnight|midday|noon)(?=\W|$)/i,ai=class extends ne{innerPattern(){return hE}innerExtract(e,r){switch(r[1].toLowerCase()){case"afternoon":return Dm(e.reference);case"evening":case"night":return Im(e.reference);case"midnight":return Nm(e.reference);case"morning":return $m(e.reference);case"noon":case"midday":return Lm(e.reference)}return null}};function Fm(t,e,r){let n=t.getDateWithAdjustedTimezone(),i=pE(n,e,r),s=new te(t);return s=bm(s,{day:i}),s.assign("weekday",e),s}function pE(t,e,r){let n=t.getDay();switch(r){case"this":return oo(t,e);case"last":return Um(t,e);case"next":return n==Se.SUNDAY?e==Se.SUNDAY?7:e:n==Se.SATURDAY?e==Se.SATURDAY?7:e==Se.SUNDAY?8:1+e:e<n&&e!=Se.SUNDAY?oo(t,e):oo(t,e)+7}return mE(t,e)}function mE(t,e){let r=Um(t,e),n=oo(t,e);return n<-r?n:r}function oo(t,e){let r=t.getDay(),n=e-r;return n<0&&(n+=7),n}function Um(t,e){let r=t.getDay(),n=e-r;return n>=0&&(n-=7),n}var gE=new RegExp(`(?:(?:\\,|\\(|\\\uFF08)\\s*)?(?:on\\s*?)?(?:(this|last|past|next)\\s*)?(${ke(ql)})(?:\\s*(?:\\,|\\)|\\\uFF09))?(?:\\s*(this|last|past|next)\\s*week)?(?=\\W|$)`,"i"),yE=1,bE=2,_E=3,li=class extends ne{innerPattern(){return gE}innerExtract(e,r){let n=r[bE].toLowerCase(),i=ql[n],s=r[yE],o=r[_E],a=s||o;a=a||"",a=a.toLowerCase();let l=null;return a=="last"||a=="past"?l="last":a=="next"?l="next":a=="this"&&(l="this"),Fm(e.reference,i,l)}};var zm=Ke(Bt(),1);var wE=new RegExp(`(this|last|past|next|after\\s*this)\\s*(${ke(qn)})(?=\\s*)(?=\\W|$)`,"i"),vE=1,TE=2,ui=class extends ne{innerPattern(){return wE}innerExtract(e,r){let n=r[vE].toLowerCase(),i=r[TE].toLowerCase(),s=qn[i];if(n=="next"||n.startsWith("after")){let l={};return l[s]=1,te.createRelativeFromReference(e.reference,l)}if(n=="last"||n=="past"){let l={};return l[s]=-1,te.createRelativeFromReference(e.reference,l)}let o=e.createParsingComponents(),a=(0,zm.default)(e.reference.instant);return i.match(/week/i)?(a=a.add(-a.get("d"),"d"),o.imply("day",a.date()),o.imply("month",a.month()+1),o.imply("year",a.year())):i.match(/month/i)?(a=a.add(-a.date()+1,"d"),o.imply("day",a.date()),o.assign("year",a.year()),o.assign("month",a.month()+1)):i.match(/year/i)&&(a=a.add(-a.date()+1,"d"),a=a.add(-a.month(),"month"),o.imply("day",a.date()),o.imply("month",a.month()+1),o.assign("year",a.year())),o}};var SE=new RegExp("([^\\d]|^)([0-3]{0,1}[0-9]{1})[\\/\\.\\-]([0-3]{0,1}[0-9]{1})(?:[\\/\\.\\-]([0-9]{4}|[0-9]{2}))?(\\W|$)","i"),ao=1,EE=5,Bm=2,Wm=3,zl=4,ci=class{constructor(e){this.groupNumberMonth=e?Wm:Bm,this.groupNumberDay=e?Bm:Wm}pattern(){return SE}extract(e,r){if(r[ao].length==0&&r.index>0&&r.index<e.text.length){let l=e.text[r.index-1];if(l>="0"&&l<="9")return}let n=r.index+r[ao].length,i=r[0].substr(r[ao].length,r[0].length-r[ao].length-r[EE].length);if(i.match(/^\d\.\d$/)||i.match(/^\d\.\d{1,2}\.\d{1,2}\s*$/)||!r[zl]&&r[0].indexOf("/")<0)return;let s=e.createParsingResult(n,i),o=parseInt(r[this.groupNumberMonth]),a=parseInt(r[this.groupNumberDay]);if((o<1||o>12)&&o>12)if(a>=1&&a<=12&&o<=31)[a,o]=[o,a];else return null;if(a<1||a>31)return null;if(s.start.assign("day",a),s.start.assign("month",o),r[zl]){let l=parseInt(r[zl]),u=to(l);s.start.assign("year",u)}else{let l=Yt(e.refDate,a,o);s.start.imply("year",l)}return s}};var xE=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${vt})(?=\\W|$)`,"i"),kE=new RegExp(`(this|last|past|next|after|\\+|-)\\s*(${Ht})(?=\\W|$)`,"i"),fi=class extends ne{constructor(e=!0){super(),this.allowAbbreviations=e}innerPattern(){return this.allowAbbreviations?xE:kE}innerExtract(e,r){let n=r[1].toLowerCase(),i=ct(r[2]);switch(n){case"last":case"past":case"-":i=Zr(i);break}return te.createRelativeFromReference(e.reference,i)}};function Ym(t){return t.text.match(/\s+(before|from)$/i)!=null}function RE(t){return t.text.match(/\s+(after|since)$/i)!=null}var di=class extends ft{patternBetween(){return/^\s*$/i}shouldMergeResults(e,r,n){return!e.match(this.patternBetween())||!Ym(r)&&!RE(r)?!1:!!n.start.get("day")&&!!n.start.get("month")&&!!n.start.get("year")}mergeResults(e,r,n){let i=ct(r.text);Ym(r)&&(i=Zr(i));let s=te.createRelativeFromReference(new Wr(n.start.date()),i);return new fr(n.reference,r.index,`${r.text}${e}${n.text}`,s)}};var dr=class{createCasualConfiguration(e=!1){let r=this.createConfiguration(!1,e);return r.parsers.unshift(new oi),r.parsers.unshift(new ai),r.parsers.unshift(new Bn),r.parsers.unshift(new ui),r.parsers.unshift(new fi),r}createConfiguration(e=!0,r=!1){return km({parsers:[new ci(r),new Fn(e),new Un,new zn,new li,new Wn,new Yn,new Vn(e),new Gn(e),new Kn(e)],refiners:[new di,new Qn,new Jn]},e)}};var Qr=class t{constructor(e){this.defaultConfig=new dr,e=e||this.defaultConfig.createCasualConfiguration(),this.parsers=[...e.parsers],this.refiners=[...e.refiners]}clone(){return new t({parsers:[...this.parsers],refiners:[...this.refiners]})}parseDate(e,r,n){let i=this.parse(e,r,n);return i.length>0?i[0].start.date():null}parse(e,r,n){let i=new Bl(e,r,n),s=[];return this.parsers.forEach(o=>{let a=t.executeParser(i,o);s=s.concat(a)}),s.sort((o,a)=>o.index-a.index),this.refiners.forEach(function(o){s=o.refine(i,s)}),s}static executeParser(e,r){let n=[],i=r.pattern(e),s=e.text,o=e.text,a=i.exec(o);for(;a;){let l=a.index+s.length-o.length;a.index=l;let u=r.extract(e,a);if(!u){o=s.substring(a.index+1),a=i.exec(o);continue}let d=null;u instanceof fr?d=u:u instanceof te?(d=e.createParsingResult(a.index,a[0]),d.start=u):d=e.createParsingResult(a.index,a[0],u);let c=d.index,f=d.text;e.debug(()=>console.log(`${r.constructor.name} extracted (at index=${c}) '${f}'`)),n.push(d),o=s.substring(c+f.length),a=i.exec(o)}return n}},Bl=class{constructor(e,r,n){this.text=e,this.reference=new Wr(r),this.option=n??{},this.refDate=this.reference.instant}createParsingComponents(e){return e instanceof te?e:new te(this.reference,e)}createParsingResult(e,r,n,i){let s=typeof r=="string"?r:this.text.substring(e,r),o=n?this.createParsingComponents(n):null,a=i?this.createParsingComponents(i):null;return new fr(this.reference,e,s,o,a)}debug(e){this.option.debug&&(this.option.debug instanceof Function?this.option.debug(e):this.option.debug.debug(e))}};var Wl=new dr,Hm=new Qr(Wl.createCasualConfiguration(!1)),OE=new Qr(Wl.createConfiguration(!0,!1)),MA=new Qr(Wl.createConfiguration(!1,!0));var PE=Hm;function Vm(t,e,r){return PE.parse(t,e,r)}var lo=class{constructor(e,r){e.subscribe(n=>{this.indicatorTag=n.parsingSettings.indicatorTag,this.markdownStartingNotation=n.parsingSettings.markdownStartingNotation,this.markdownEndingNotation=n.parsingSettings.markdownEndingNotation}),this.projectModule=r}parseTaskEl(e){function r(s,o=""){try{let a=e.querySelector(`span.${s}`);return JSON.parse(a&&a.textContent||o)}catch(a){return console.warn(`Failed to parse ${s} (got): ${a}`),o}}let n=new Qe;n.id=r("id",""),n.content=e.querySelector(".task-list-item-checkbox")?.nextSibling?.textContent?.trim()||"",n.priority=r("priority","1"),n.description=r("description",'""'),n.order=r("order","0"),n.project=r("project","null"),n.sectionID=r("section-id",""),n.labels=r("labels","[]");let i=e.querySelector(".task-list-item-checkbox");return n.completed=i?.checked||!1,n.parent=r("parent","null"),n.children=r("children","[]"),n.due=r("due","null"),n.metadata=r("metadata","{}"),ee.debug(`task project: ${n.project}`),n}parseTaskMarkdown(e){let r=new Qe,n=e.indexOf(this.markdownStartingNotation),i=n!==-1?e.slice(0,n).trim():e.trim();r.content=i.slice(5).trim(),r.completed=i.startsWith("- [x]");let[s,o]=Bp(r.content);r.content=o,r.labels=s.filter(d=>d!==this.indicatorTag);let a=e.slice(n),l=new RegExp(`${Ie(this.markdownStartingNotation)}(.*?)${Ie(this.markdownEndingNotation)}`,"g"),u=[...a.matchAll(l)];for(let d of u){let c=d[1],f=Gp(c.substring(0,c.indexOf(":")).trim()),h=c.substring(c.indexOf(":")+1).trim();if(!(f in r)){ee.warn(`Unknown attribute: ${f}`);continue}switch(f){case"due":try{r.due=this.parseDue(h)}catch(m){console.error(`Failed to parse due date: ${m.message}`)}case"project":try{let m=this.parseProject(h);r.project=m}catch(m){console.error(`Cannot find project: ${h}, error: ${m.message}`)}break;case"metadata":try{r.metadata=JSON.parse(h)}catch(m){console.error(`Failed to parse metadata attribute: ${m.message}`)}break;default:let g=f;if(g in r)try{Array.isArray(r[g])?r[g]=Qp(h):typeof r[g]=="boolean"?r[g]=em(h):typeof r[g]=="string"?r[g]=h:r[g]=JSON.parse(h)}catch(m){ee.error(`Failed to convert value for key ${g}: ${m.message}`)}break}}return r}parseDue(e){let n=Vm(e)[0].start,i=!n.isCertain("hour")&&!n.isCertain("minute")&&!n.isCertain("second"),s=n.date(),o=`${s.getFullYear()}-${String(s.getMonth()+1).padStart(2,"0")}-${String(s.getDate()).padStart(2,"0")}`,a=`${s.getHours()}:${s.getMinutes()}`;return i?{isRecurring:!1,date:o,string:e}:{isRecurring:!0,date:o,time:a,string:e}}parseProject(e){ee.debug(`Parsing project: ${e}, this.projectModule: ${JSON.stringify(this.projectModule.getProjectsData())}`);let r=this.projectModule.getProjectByName(e);return r||null}};var du=require("obsidian");function Gm(t){return!t||t.tagName!=="UL"?!1:t.classList.contains("contains-task-list")&&t.classList.contains("has-list-bullet")}function Km(t,e){return!t||t.tagName!=="LI"||t.children.length===0?!1:e.isValidTaskElement(t)}function Zm(t,e){if(!Array.isArray(t)||typeof e!="function")throw new Error("Invalid input provided.");let r=[];return t.forEach((n,i)=>{e(n)&&r.push(i)}),r}var Cg=require("obsidian");typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(Pu);function Jm(t){try{Up.check(t)}catch{return t}let e=new Date(t);e.setHours(0,0,0,0),e.setDate(e.getDate()+1);let r=new Date,n=e.toLocaleString("default",{month:"short"}),i=e.getDate();if(e.getFullYear()!==r.getFullYear()){let s=e.getFullYear();return`${n} ${i}, ${s}`}return qE(e)?"Yesterday":FE(e)?"Today":UE(e)?"Tomorrow":zE(e,0)===!0?e.toLocaleString("default",{weekday:"short"}):`${n} ${i}`}function Xm(t){try{zp.check(t)}catch{return t}try{let[e,r]=t.split(":");return`${parseInt(e)%12||12}:${r} ${parseInt(e)>=12?"PM":"AM"}`}catch{return t}}function qE(t){let e=new Date,r=new Date(e);return r.setDate(r.getDate()-1),t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}function FE(t){let e=new Date;return t.getFullYear()===e.getFullYear()&&t.getMonth()===e.getMonth()&&t.getDate()===e.getDate()}function UE(t){let e=new Date,r=new Date(e);return r.setDate(r.getDate()+1),t.getFullYear()===r.getFullYear()&&t.getMonth()===r.getMonth()&&t.getDate()===r.getDate()}function zE(t,e=0){let r=new Date,n=new Date(t);return r.setDate(r.getDate()-(r.getDay()-e+7)%7),n.setDate(n.getDate()-(n.getDay()-e+7)%7),r.getFullYear()===n.getFullYear()&&r.getMonth()===n.getMonth()&&r.getDate()===n.getDate()}function BE(t){kt(t,"svelte-8sqebz",".task-card-due.svelte-8sqebz{display:inline-block;padding:var(--tag-padding-y) var(--tag-padding-x);border-radius:var(--radius-l);border:var(--border-width) solid var(--background-modifier-border);width:auto;font-size:var(--font-ui-smaller);white-space:nowrap}.task-card-due.mode-multi-line.svelte-8sqebz:not(:empty):hover{background-color:var(--background-modifier-hover);cursor:pointer}input.task-card-due.svelte-8sqebz{border-radius:var(--radius-l);width:auto;text-align:center}input.task-card-due.svelte-8sqebz:focus{outline:none;box-shadow:none;border:calc(0.75 * var(--border-width)) solid var(--background-modifier-border)}")}function Qm(t){let e,r;function n(o,a){return a&1&&(e=null),e==null&&(e=o[0].getTaskCardStatus("dueStatus")==="editing"),e?YE:WE}let i=n(t,-1),s=i(t);return{c(){s.c(),r=Oe()},m(o,a){s.m(o,a),F(o,r,a)},p(o,a){i===(i=n(o,a))&&s?s.p(o,a):(s.d(1),s=i(o),s&&(s.c(),s.m(r.parentNode,r)))},d(o){o&&q(r),s.d(o)}}}function WE(t){let e,r,n,i,s;return{c(){e=L("div"),r=Ce(t[3]),w(e,"class",n="task-card-due "+(t[1].mode==="single-line"?"mode-single-line":"mode-multi-line")+" svelte-8sqebz"),w(e,"role","button"),w(e,"tabindex","0")},m(o,a){F(o,e,a),U(e,r),i||(s=[z(e,"click",t[5]),z(e,"keydown",t[5])],i=!0)},p(o,a){a&8&&tt(r,o[3]),a&2&&n!==(n="task-card-due "+(o[1].mode==="single-line"?"mode-single-line":"mode-multi-line")+" svelte-8sqebz")&&w(e,"class",n)},d(o){o&&q(e),i=!1,J(s)}}}function YE(t){let e,r,n;return{c(){e=L("input"),w(e,"type","text"),w(e,"class","task-card-due svelte-8sqebz")},m(i,s){F(i,e,s),Ne(e,t[2]),t[9](e),r||(n=[z(e,"keydown",t[6]),z(e,"input",t[8])],r=!0)},p(i,s){s&4&&e.value!==i[2]&&Ne(e,i[2])},d(i){i&&q(e),t[9](null),r=!1,J(n)}}}function HE(t){let e=t[0].obsidianTask.hasDue()||t[0].getTaskCardStatus("dueStatus")==="editing",r,n=e&&Qm(t);return{c(){n&&n.c(),r=Oe()},m(i,s){n&&n.m(i,s),F(i,r,s)},p(i,[s]){s&1&&(e=i[0].obsidianTask.hasDue()||i[0].getTaskCardStatus("dueStatus")==="editing"),e?n?n.p(i,s):(n=Qm(i),n.c(),n.m(r.parentNode,r)):n&&(n.d(1),n=null)},i:re,o:re,d(i){i&&q(r),n&&n.d(i)}}}function VE(t){t.focus(),t.select()}function GE(t,e,r){let{taskSyncManager:n}=e,{plugin:i}=e,{params:s}=e,o,a;o=n.obsidianTask.hasDue()?n.obsidianTask.due:null,a=o?o.string:"";let l="",u;f();async function d(){r(0,n.taskCardStatus.dueStatus="editing",n),await We(),VE(u)}function c(g){g.key==="Enter"?(g.preventDefault(),r(0,n.taskCardStatus.dueStatus="done",n),o=i.taskParser.parseDue(a),n.updateObsidianTaskAttribute("due",o),f()):g.key==="Escape"&&r(0,n.taskCardStatus.dueStatus="done",n)}function f(){if(!o)return r(3,l=""),l;let g=Jm(o.date),m=Xm(o.time);return r(3,l=m?`${g}, ${m}`:g),l}function h(){a=this.value,r(2,a)}function p(g){Ze[g?"unshift":"push"](()=>{u=g,r(4,u)})}return t.$$set=g=>{"taskSyncManager"in g&&r(0,n=g.taskSyncManager),"plugin"in g&&r(7,i=g.plugin),"params"in g&&r(1,s=g.params)},[n,s,a,l,u,d,c,i,h,p]}var Yl=class extends ce{constructor(e){super(),ge(this,e,GE,HE,fe,{taskSyncManager:0,plugin:7,params:1},BE)}},Hl=Yl;function KE(t){kt(t,"svelte-y045uy",":root{--project-popup-padding-y:4px;--project-popup-padding-x:6px}.project-wrapper.svelte-y045uy{position:relative;display:flex;align-items:center}.task-card-project.svelte-y045uy{flex-shrink:0;white-space:nowrap;display:flex;align-items:center;font-size:var(--font-ui-small)}.project-popup.svelte-y045uy{position:absolute;top:calc(-1 * (var(--project-popup-padding-y) + var(--border-width)));right:calc(-1 * (var(--project-popup-padding-x) + var(--border-width)));margin:2px 0;padding:var(--project-popup-padding-y) var(--project-popup-padding-x);background-color:var(--interactive-normal);border:var(--border-width) solid var(--background-modifier-border);border-radius:var(--radius-m);z-index:1}.project-option.svelte-y045uy{display:flex;justify-content:flex-end;cursor:pointer;border-radius:var(--radius-s)}.project-option.svelte-y045uy:hover{background-color:var(--background-modifier-hover)}.project-option.svelte-y045uy:active{background-color:var(--background-modifier-active-hover)}.divider.svelte-y045uy{height:1px;margin:2px 0;background-color:var(--background-modifier-border)}.project-color.svelte-y045uy{display:inline-block;width:12px;height:12px;padding:4px;border-radius:50%;margin:4px;border:var(--border-width) solid var(--background-primary)}.project-color.clickable-icon.svelte-y045uy:hover{cursor:pointer;border:var(--border-width) solid var(--background-modifier-border)}")}function eg(t,e,r){let n=t.slice();return n[17]=e[r],n[19]=r,n}function ZE(t){let e,r;function n(o,a){if(a&1&&(r=null),r==null&&(r=o[0].getTaskCardStatus("projectStatus")==="selecting"),r)return QE;if(o[2])return XE}let i=n(t,-1),s=i&&i(t);return{c(){e=L("div"),s&&s.c(),w(e,"class","project-wrapper svelte-y045uy")},m(o,a){F(o,e,a),s&&s.m(e,null),t[15](e)},p(o,a){i===(i=n(o,a))&&s?s.p(o,a):(s&&s.d(1),s=i&&i(o),s&&(s.c(),s.m(e,null)))},d(o){o&&q(e),s&&s.d(),t[15](null)}}}function JE(t){let e,r=t[2]&&sg(t);return{c(){e=L("div"),r&&r.c(),w(e,"class","task-card-project svelte-y045uy")},m(n,i){F(n,e,i),r&&r.m(e,null)},p(n,i){n[2]?r?r.p(n,i):(r=sg(n),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},d(n){n&&q(e),r&&r.d()}}}function XE(t){let e,r,n=t[2].name+"",i,s,o,a,l,u;return{c(){e=L("div"),r=L("a"),i=Ce(n),o=he(),a=L("span"),w(r,"href",s="#"+t[2].name),w(r,"class","tag"),w(r,"target","_blank"),w(r,"rel","noopener"),w(a,"class","project-color clickable-icon svelte-y045uy"),dt(a,"background-color",t[2].color),w(a,"tabindex","0"),w(a,"role","button"),w(e,"class","task-card-project svelte-y045uy")},m(d,c){F(d,e,c),U(e,r),U(r,i),U(e,o),U(e,a),l||(u=[z(a,"click",t[6]),z(a,"keydown",t[14])],l=!0)},p(d,c){c&4&&n!==(n=d[2].name+"")&&tt(i,n),c&4&&s!==(s="#"+d[2].name)&&w(r,"href",s),c&4&&dt(a,"background-color",d[2].color)},d(d){d&&q(e),l=!1,J(u)}}}function QE(t){let e,r,n=t[2]&&tg(t),i=Ot(t[3]),s=[];for(let o=0;o<i.length;o+=1)s[o]=ig(eg(t,i,o));return{c(){e=L("div"),n&&n.c(),r=he();for(let o=0;o<s.length;o+=1)s[o].c();w(e,"class","project-popup svelte-y045uy")},m(o,a){F(o,e,a),n&&n.m(e,null),U(e,r);for(let l=0;l<s.length;l+=1)s[l]&&s[l].m(e,null);t[13](e)},p(o,a){if(o[2]?n?n.p(o,a):(n=tg(o),n.c(),n.m(e,r)):n&&(n.d(1),n=null),a&396){i=Ot(o[3]);let l;for(l=0;l<i.length;l+=1){let u=eg(o,i,l);s[l]?s[l].p(u,a):(s[l]=ig(u),s[l].c(),s[l].m(e,null))}for(;l<s.length;l+=1)s[l].d(1);s.length=i.length}},d(o){o&&q(e),n&&n.d(),_i(s,o),t[13](null)}}}function tg(t){let e,r,n,i=t[2].name+"",s,o,a,l,u,d;return{c(){e=L("div"),r=L("div"),n=L("a"),s=Ce(i),a=he(),l=L("span"),w(n,"href",o="#"+t[2].name),w(n,"class","tag"),w(n,"target","_blank"),w(n,"rel","noopener"),w(l,"class","project-color svelte-y045uy"),dt(l,"background-color",t[2].color),w(r,"class","task-card-project svelte-y045uy"),w(e,"class","project-option svelte-y045uy"),w(e,"tabindex","0"),w(e,"role","button")},m(c,f){F(c,e,f),U(e,r),U(r,n),U(n,s),U(r,a),U(r,l),u||(d=[z(e,"click",t[9]),z(e,"keydown",t[10])],u=!0)},p(c,f){f&4&&i!==(i=c[2].name+"")&&tt(s,i),f&4&&o!==(o="#"+c[2].name)&&w(n,"href",o),f&4&&dt(l,"background-color",c[2].color)},d(c){c&&q(e),u=!1,J(d)}}}function rg(t){let e;return{c(){e=L("div"),w(e,"class","divider svelte-y045uy")},m(r,n){F(r,e,n)},d(r){r&&q(e)}}}function ng(t){let e,r,n,i=t[17].name+"",s,o,a,l,u,d,c;function f(){return t[11](t[17])}function h(...p){return t[12](t[17],...p)}return{c(){e=L("div"),r=L("div"),n=L("a"),s=Ce(i),a=he(),l=L("span"),u=he(),w(n,"href",o="#"+t[17].name),w(n,"class","tag"),w(n,"target","_blank"),w(n,"rel","noopener"),w(l,"class","project-color svelte-y045uy"),dt(l,"background-color",t[17].color),w(r,"class","task-card-project svelte-y045uy"),w(e,"class","project-option svelte-y045uy"),w(e,"tabindex","0"),w(e,"role","button")},m(p,g){F(p,e,g),U(e,r),U(r,n),U(n,s),U(r,a),U(r,l),U(e,u),d||(c=[z(e,"click",f),z(e,"keydown",h)],d=!0)},p(p,g){t=p,g&8&&i!==(i=t[17].name+"")&&tt(s,i),g&8&&o!==(o="#"+t[17].name)&&w(n,"href",o),g&8&&dt(l,"background-color",t[17].color)},d(p){p&&q(e),d=!1,J(c)}}}function ig(t){let e=(t[19]!==0||t[2])&&!t[8](t[2],t[17]),r,n=!t[8](t[2],t[17]),i,s=e&&rg(t),o=n&&ng(t);return{c(){s&&s.c(),r=he(),o&&o.c(),i=Oe()},m(a,l){s&&s.m(a,l),F(a,r,l),o&&o.m(a,l),F(a,i,l)},p(a,l){l&12&&(e=(a[19]!==0||a[2])&&!a[8](a[2],a[17])),e?s||(s=rg(a),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null),l&12&&(n=!a[8](a[2],a[17])),n?o?o.p(a,l):(o=ng(a),o.c(),o.m(i.parentNode,i)):o&&(o.d(1),o=null)},d(a){a&&(q(r),q(i)),s&&s.d(a),o&&o.d(a)}}}function sg(t){let e;return{c(){e=L("span"),w(e,"class","project-color svelte-y045uy"),dt(e,"background-color",t[2].color)},m(r,n){F(r,e,n)},p(r,n){n&4&&dt(e,"background-color",r[2].color)},d(r){r&&q(e)}}}function ex(t){let e;function r(s,o){return s[1].mode==="single-line"?JE:ZE}let n=r(t,-1),i=n(t);return{c(){i.c(),e=Oe()},m(s,o){i.m(s,o),F(s,e,o)},p(s,[o]){n===(n=r(s,o))&&i?i.p(s,o):(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},i:re,o:re,d(s){s&&q(e),i.d(s)}}}function tx(t,e,r){let{taskSyncManager:n}=e,{params:i}=e,s=n.obsidianTask.hasProject()?n.obsidianTask.project:null,o=[];$e.subscribe(b=>{r(3,o=b.userMetadata.projects)});let a,l;async function u(){n.getTaskCardStatus("projectStatus")==="selecting"?r(0,n.taskCardStatus.projectStatus="done",n):(r(0,n.taskCardStatus.projectStatus="selecting",n),await f())}function d(b){r(2,s=b),r(0,n.taskCardStatus.projectStatus="done",n),ee.debug(`project: ${JSON.stringify(s)}`),n.updateObsidianTaskAttribute("project",b)}function c(b,M){if(!b&&!M)return!0;if(!b||!M)return!1;let $=b.id===M.id||!b.id&&!M.id,N=b.name===M.name||!b.name&&!M.name;return ee.debug(`comparing project ${JSON.stringify(b)} and ${JSON.stringify(M)}, sameID: ${$}, sameName: ${N}`),$&&N}async function f(){if(await We(),a&&l){let b=a.firstChild;if(b){let M=b.offsetHeight,$=parseFloat(getComputedStyle(a).paddingTop),N=parseFloat(getComputedStyle(a).marginBottom),C=M+$+N;r(5,l.style.height=`${C}px`,l),ee.debug(`adjusting height to ${C}px, height=${M}, padding=${$}, margin=${N}`)}}}f();let h=()=>d(s),p=b=>b.key==="Enter"&&d(s),g=b=>d(b),m=(b,M)=>M.key==="Enter"&&d(b);function x(b){Ze[b?"unshift":"push"](()=>{a=b,r(4,a)})}let k=b=>b.key==="Enter"&&u();function T(b){Ze[b?"unshift":"push"](()=>{l=b,r(5,l)})}return t.$$set=b=>{"taskSyncManager"in b&&r(0,n=b.taskSyncManager),"params"in b&&r(1,i=b.params)},[n,i,s,o,a,l,u,d,c,h,p,g,m,x,k,T]}var Vl=class extends ce{constructor(e){super(),ge(this,e,tx,ex,fe,{taskSyncManager:0,params:1},KE)}},Gl=Vl;var ug=require("obsidian");function rx(t){let e,r,n,i,s;return{c(){e=Su("svg"),w(e,"xmlns","http://www.w3.org/2000/svg"),w(e,"width",t[0]),w(e,"height",t[1]),w(e,"role",t[3]),w(e,"aria-label",t[4]),w(e,"fill","none"),w(e,"stroke",t[2]),w(e,"stroke-width",t[5]),w(e,"stroke-linecap","round"),w(e,"stroke-linejoin","round"),w(e,"viewBox",r="0 0 "+t[7]+" "+t[7]),w(e,"class",n=t[8].class)},m(o,a){F(o,e,a),e.innerHTML=t[6],i||(s=[z(e,"click",t[9]),z(e,"keydown",t[10]),z(e,"keyup",t[11]),z(e,"focus",t[12]),z(e,"blur",t[13]),z(e,"mouseenter",t[14]),z(e,"mouseleave",t[15]),z(e,"mouseover",t[16]),z(e,"mouseout",t[17])],i=!0)},p(o,[a]){a&64&&(e.innerHTML=o[6]),a&1&&w(e,"width",o[0]),a&2&&w(e,"height",o[1]),a&8&&w(e,"role",o[3]),a&16&&w(e,"aria-label",o[4]),a&4&&w(e,"stroke",o[2]),a&32&&w(e,"stroke-width",o[5]),a&128&&r!==(r="0 0 "+o[7]+" "+o[7])&&w(e,"viewBox",r),a&256&&n!==(n=o[8].class)&&w(e,"class",n)},i:re,o:re,d(o){o&&q(e),i=!1,J(s)}}}function nx(t,e,r){let{width:n="24"}=e,{height:i="24"}=e,{color:s="currentColor"}=e,{role:o="img"}=e,{ariaLabel:a="icon"}=e,{strokeWidth:l="2"}=e,{svgPath:u=""}=e,{box:d=24}=e;function c(b){rt.call(this,t,b)}function f(b){rt.call(this,t,b)}function h(b){rt.call(this,t,b)}function p(b){rt.call(this,t,b)}function g(b){rt.call(this,t,b)}function m(b){rt.call(this,t,b)}function x(b){rt.call(this,t,b)}function k(b){rt.call(this,t,b)}function T(b){rt.call(this,t,b)}return t.$$set=b=>{r(8,e=xo(xo({},e),Oo(b))),"width"in b&&r(0,n=b.width),"height"in b&&r(1,i=b.height),"color"in b&&r(2,s=b.color),"role"in b&&r(3,o=b.role),"ariaLabel"in b&&r(4,a=b.ariaLabel),"strokeWidth"in b&&r(5,l=b.strokeWidth),"svgPath"in b&&r(6,u=b.svgPath),"box"in b&&r(7,d=b.box)},e=Oo(e),[n,i,s,o,a,l,u,d,e,c,f,h,p,g,m,x,k,T]}var Kl=class extends ce{constructor(e){super(),ge(this,e,nx,rx,fe,{width:0,height:1,color:2,role:3,ariaLabel:4,strokeWidth:5,svgPath:6,box:7})}},en=Kl;function ix(t){let e,r;return e=new en({props:{width:t[0],height:t[1],svgPath:t[2],ariaLabel:"plus",class:"task-card-icon"}}),{c(){_e(e.$$.fragment)},m(n,i){pe(e,n,i),r=!0},p(n,[i]){let s={};i&1&&(s.width=n[0]),i&2&&(s.height=n[1]),e.$set(s)},i(n){r||(H(e.$$.fragment,n),r=!0)},o(n){X(e.$$.fragment,n),r=!1},d(n){me(e,n)}}}function sx(t,e,r){let{width:n="24"}=e,{height:i="24"}=e,s=`
      <path d="M5 12h14"/>
      <path d="M12 5v14"/>
    `;return t.$$set=o=>{"width"in o&&r(0,n=o.width),"height"in o&&r(1,i=o.height)},[n,i,s]}var Zl=class extends ce{constructor(e){super(),ge(this,e,sx,ix,fe,{width:0,height:1})}},og=Zl;var uo=class{constructor(){this.labels=[]}isValidLabel(e){return!(!e||!/[A-Za-z_\-\/]/.test(e)||/\s/.test(e))}validateLabel(e){return e=e.replace(/[^A-Za-z0-9_\-\/\s]/g," "),e=e.replace(/\s+/g," ").trim(),Kp(e)}addLabel(e,r=!0){if(e=e.replace(/^#+/,""),this.isValidLabel(e))this.pushLabel(e);else if(r)ee.error("Invalid label format");else{let n=this.validateLabel(e);this.isValidLabel(n)?this.pushLabel(n):ee.error("Invalid label format")}}pushLabel(e){this.labels.includes(e)||this.labels.push(e)}addLabels(e,r=!0){for(let n of e)this.addLabel(n,r)}getLabels(){return this.labels.map(e=>"#"+e)}setLabels(e,r=!0){this.deleteAllLabels(),this.addLabels(e,r)}editLabel(e,r,n=!0){r=r.replace(/^#+/,"");let i=this.labels.indexOf(r);if(i===-1)throw new Error("Label not found");if(e=e.replace(/^#+/,""),this.isValidLabel(e))this.labels[i]=e;else if(n)ee.error("Invalid new label format");else{let s=this.validateLabel(e);this.isValidLabel(s)?this.labels[i]=s:ee.error("Invalid new label format")}}deleteLabel(e){let r=this.labels.indexOf(e);if(r===-1)throw new Error("Label not found");this.labels.splice(r,1)}deleteAllLabels(){this.labels=[]}};function ag(t,e,r){let n=t.slice();return n[16]=e[r],n[18]=r,n}function ox(t){let e,r,n=t[16]+"",i,s,o,a;function l(...u){return t[10](t[18],...u)}return{c(){e=L("div"),r=L("a"),i=Ce(n),w(r,"href",s=t[16]),w(r,"class","tag"),w(r,"target","_blank"),w(r,"rel","noopener"),w(e,"class","label-container")},m(u,d){F(u,e,d),U(e,r),U(r,i),o||(a=z(r,"contextmenu",l),o=!0)},p(u,d){t=u},d(u){u&&q(e),o=!1,a()}}}function ax(t){let e,r,n;return{c(){e=L("input"),w(e,"type","text"),w(e,"class","task-card-label-input")},m(i,s){F(i,e,s),Ne(e,t[1]),r||(n=[z(e,"input",t[8]),z(e,"keydown",t[9])],r=!0)},p(i,s){s&2&&e.value!==i[1]&&Ne(e,i[1])},d(i){i&&q(e),r=!1,J(n)}}}function lx(t){let e=" ",r;return{c(){r=Ce(e)},m(n,i){F(n,r,i)},d(n){n&&q(r)}}}function lg(t){let e,r=t[16]!==t[3].getLabels()[t[3].getLabels().length-1],n;function i(l,u){return l[2]===l[18]?ax:ox}let s=i(t,-1),o=s(t),a=r&&lx(t);return{c(){o.c(),e=he(),a&&a.c(),n=Oe()},m(l,u){o.m(l,u),F(l,e,u),a&&a.m(l,u),F(l,n,u)},p(l,u){s===(s=i(l,u))&&o?o.p(l,u):(o.d(1),o=s(l),o&&(o.c(),o.m(e.parentNode,e)))},d(l){l&&(q(e),q(n)),o.d(l),a&&a.d(l)}}}function ux(t){let e,r,n,i,s;return r=new og({}),{c(){e=L("button"),_e(r.$$.fragment),w(e,"class","task-card-round-button")},m(o,a){F(o,e,a),pe(r,e,null),n=!0,i||(s=z(e,"click",t[13]),i=!0)},p:re,i(o){n||(H(r.$$.fragment,o),n=!0)},o(o){X(r.$$.fragment,o),n=!1},d(o){o&&q(e),me(r),i=!1,s()}}}function cx(t){let e,r,n;return{c(){e=L("input"),w(e,"type","text"),w(e,"class","task-card-label-input")},m(i,s){F(i,e,s),Ne(e,t[1]),r||(n=[z(e,"input",t[11]),z(e,"keydown",t[12])],r=!0)},p(i,s){s&2&&e.value!==i[1]&&Ne(e,i[1])},i:re,o:re,d(i){i&&q(e),r=!1,J(n)}}}function fx(t){let e,r,n,i,s,o=Ot(t[3].getLabels()),a=[];for(let c=0;c<o.length;c+=1)a[c]=lg(ag(t,o,c));let l=[cx,ux],u=[];function d(c,f){return c[0]?0:1}return n=d(t,-1),i=u[n]=l[n](t),{c(){e=L("div");for(let c=0;c<a.length;c+=1)a[c].c();r=he(),i.c(),w(e,"class","task-card-labels")},m(c,f){F(c,e,f);for(let h=0;h<a.length;h+=1)a[h]&&a[h].m(e,null);U(e,r),u[n].m(e,null),s=!0},p(c,[f]){if(f&110){o=Ot(c[3].getLabels());let p;for(p=0;p<o.length;p+=1){let g=ag(c,o,p);a[p]?a[p].p(g,f):(a[p]=lg(g),a[p].c(),a[p].m(e,r))}for(;p<a.length;p+=1)a[p].d(1);a.length=o.length}let h=n;n=d(c,f),n===h?u[n].p(c,f):(pt(),X(u[h],1,1,()=>{u[h]=null}),mt(),i=u[n],i?i.p(c,f):(i=u[n]=l[n](c),i.c()),H(i,1),i.m(e,null))},i(c){s||(H(i),s=!0)},o(c){X(i),s=!1},d(c){c&&q(e),_i(a,c),u[n].d()}}}function dx(t,e,r){let{taskSyncManager:n}=e,i=new uo,s=!1,o="",a=null;i.setLabels(n.obsidianTask.labels,!1);function l(){i.addLabel(o,!1),r(1,o=""),r(0,s=!1),n.updateObsidianTaskAttribute("labels",i.getLabels())}function u(T){r(2,a=T),r(1,o=i.getLabels()[T].substring(1))}function d(){i.editLabel("#"+o,"#"+i.getLabels()[a].substring(1),!1),r(1,o=""),r(2,a=null),n.updateObsidianTaskAttribute("labels",i.getLabels())}function c(T){i.deleteLabel(i.getLabels()[T]),n.updateObsidianTaskAttribute("labels",i.getLabels())}function f(T,b){b.preventDefault();let M=new ug.Menu;M.addItem($=>{$.setTitle("Edit"),$.setIcon("pencil"),$.onClick(N=>(u(T),$))}),M.addItem($=>{$.setTitle("Delete"),$.setIcon("trash"),$.onClick(N=>(c(T),$))}),M.showAtPosition({x:b.clientX,y:b.clientY})}function h(){o=this.value,r(1,o)}let p=T=>T.key==="Enter"&&d(),g=(T,b)=>f(T,b);function m(){o=this.value,r(1,o)}let x=T=>T.key==="Enter"&&l(),k=()=>r(0,s=!0);return t.$$set=T=>{"taskSyncManager"in T&&r(7,n=T.taskSyncManager)},[s,o,a,i,l,d,f,n,h,p,g,m,x,k]}var Jl=class extends ce{constructor(e){super(),ge(this,e,dx,fx,fe,{taskSyncManager:7})}},cg=Jl;var hx=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},fg=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},Xl=(t,e,r)=>(hx(t,e,"access private method"),r);function eu(){return{async:!1,baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,hooks:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}var pr=eu();function yg(t){pr=t}var bg=/[&<>"']/,px=new RegExp(bg.source,"g"),_g=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,mx=new RegExp(_g.source,"g"),gx={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},dg=t=>gx[t];function Pe(t,e){if(e){if(bg.test(t))return t.replace(px,dg)}else if(_g.test(t))return t.replace(mx,dg);return t}var yx=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function wg(t){return t.replace(yx,(e,r)=>(r=r.toLowerCase(),r==="colon"?":":r.charAt(0)==="#"?r.charAt(1)==="x"?String.fromCharCode(parseInt(r.substring(2),16)):String.fromCharCode(+r.substring(1)):""))}var bx=/(^|[^\[])\^/g;function ie(t,e){t=typeof t=="string"?t:t.source,e=e||"";let r={replace:(n,i)=>(i=typeof i=="object"&&"source"in i?i.source:i,i=i.replace(bx,"$1"),t=t.replace(n,i),r),getRegex:()=>new RegExp(t,e)};return r}var _x=/[^\w:]/g,wx=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function hg(t,e,r){if(t){let n;try{n=decodeURIComponent(wg(r)).replace(_x,"").toLowerCase()}catch{return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!wx.test(r)&&(r=Ex(e,r));try{r=encodeURI(r).replace(/%25/g,"%")}catch{return null}return r}var co={},vx=/^[^:]+:\/*[^/]*$/,Tx=/^([^:]+:)[\s\S]*$/,Sx=/^([^:]+:\/*[^/]*)[\s\S]*$/;function Ex(t,e){co[" "+t]||(vx.test(t)?co[" "+t]=t+"/":co[" "+t]=fo(t,"/",!0)),t=co[" "+t];let r=t.indexOf(":")===-1;return e.substring(0,2)==="//"?r?e:t.replace(Tx,"$1")+e:e.charAt(0)==="/"?r?e:t.replace(Sx,"$1")+e:t+e}var po={exec:()=>null};function pg(t,e){let r=t.replace(/\|/g,(s,o,a)=>{let l=!1,u=o;for(;--u>=0&&a[u]==="\\";)l=!l;return l?"|":" |"}),n=r.split(/ \|/),i=0;if(n[0].trim()||n.shift(),n.length>0&&!n[n.length-1].trim()&&n.pop(),n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;i<n.length;i++)n[i]=n[i].trim().replace(/\\\|/g,"|");return n}function fo(t,e,r){let n=t.length;if(n===0)return"";let i=0;for(;i<n;){let s=t.charAt(n-i-1);if(s===e&&!r)i++;else if(s!==e&&r)i++;else break}return t.slice(0,n-i)}function xx(t,e){if(t.indexOf(e[1])===-1)return-1;let r=t.length,n=0,i=0;for(;i<r;i++)if(t[i]==="\\")i++;else if(t[i]===e[0])n++;else if(t[i]===e[1]&&(n--,n<0))return i;return-1}function kx(t,e){!t||t.silent||(e&&console.warn("marked(): callback is deprecated since version 5.0.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/using_pro#async"),(t.sanitize||t.sanitizer)&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options"),(t.highlight||t.langPrefix!=="language-")&&console.warn("marked(): highlight and langPrefix parameters are deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-highlight."),t.mangle&&console.warn("marked(): mangle parameter is enabled by default, but is deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install https://www.npmjs.com/package/marked-mangle, or disable by setting `{mangle: false}`."),t.baseUrl&&console.warn("marked(): baseUrl parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-base-url."),t.smartypants&&console.warn("marked(): smartypants parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-smartypants."),t.xhtml&&console.warn("marked(): xhtml parameter is deprecated since version 5.0.0, should not be used and will be removed in the future. Instead use https://www.npmjs.com/package/marked-xhtml."),(t.headerIds||t.headerPrefix)&&console.warn("marked(): headerIds and headerPrefix parameters enabled by default, but are deprecated since version 5.0.0, and will be removed in the future. To clear this warning, install  https://www.npmjs.com/package/marked-gfm-heading-id, or disable by setting `{headerIds: false}`."))}function mg(t,e,r,n){let i=e.href,s=e.title?Pe(e.title):null,o=t[1].replace(/\\([\[\]])/g,"$1");if(t[0].charAt(0)!=="!"){n.state.inLink=!0;let a={type:"link",raw:r,href:i,title:s,text:o,tokens:n.inlineTokens(o)};return n.state.inLink=!1,a}return{type:"image",raw:r,href:i,title:s,text:Pe(o)}}function Rx(t,e){let r=t.match(/^(\s+)(?:```)/);if(r===null)return e;let n=r[1];return e.split(`
`).map(i=>{let s=i.match(/^\s+/);if(s===null)return i;let[o]=s;return o.length>=n.length?i.slice(n.length):i}).join(`
`)}var mo=class{constructor(t){this.options=t||pr}space(t){let e=this.rules.block.newline.exec(t);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(t){let e=this.rules.block.code.exec(t);if(e){let r=e[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?r:fo(r,`
`)}}}fences(t){let e=this.rules.block.fences.exec(t);if(e){let r=e[0],n=Rx(r,e[3]||"");return{type:"code",raw:r,lang:e[2]?e[2].trim().replace(this.rules.inline._escapes,"$1"):e[2],text:n}}}heading(t){let e=this.rules.block.heading.exec(t);if(e){let r=e[2].trim();if(/#$/.test(r)){let n=fo(r,"#");(this.options.pedantic||!n||/ $/.test(n))&&(r=n.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:r,tokens:this.lexer.inline(r)}}}hr(t){let e=this.rules.block.hr.exec(t);if(e)return{type:"hr",raw:e[0]}}blockquote(t){let e=this.rules.block.blockquote.exec(t);if(e){let r=e[0].replace(/^ *>[ \t]?/gm,""),n=this.lexer.state.top;this.lexer.state.top=!0;let i=this.lexer.blockTokens(r);return this.lexer.state.top=n,{type:"blockquote",raw:e[0],tokens:i,text:r}}}list(t){let e=this.rules.block.list.exec(t);if(e){let r,n,i,s,o,a,l,u,d,c,f,h,p=e[1].trim(),g=p.length>1,m={type:"list",raw:"",ordered:g,start:g?+p.slice(0,-1):"",loose:!1,items:[]};p=g?`\\d{1,9}\\${p.slice(-1)}`:`\\${p}`,this.options.pedantic&&(p=g?p:"[*+-]");let x=new RegExp(`^( {0,3}${p})((?:[	 ][^\\n]*)?(?:\\n|$))`);for(;t&&(h=!1,!(!(e=x.exec(t))||this.rules.block.hr.test(t)));){if(r=e[0],t=t.substring(r.length),u=e[2].split(`
`,1)[0].replace(/^\t+/,T=>" ".repeat(3*T.length)),d=t.split(`
`,1)[0],this.options.pedantic?(s=2,f=u.trimLeft()):(s=e[2].search(/[^ ]/),s=s>4?1:s,f=u.slice(s),s+=e[1].length),a=!1,!u&&/^ *$/.test(d)&&(r+=d+`
`,t=t.substring(d.length+1),h=!0),!h){let T=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),b=new RegExp(`^ {0,${Math.min(3,s-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),M=new RegExp(`^ {0,${Math.min(3,s-1)}}(?:\`\`\`|~~~)`),$=new RegExp(`^ {0,${Math.min(3,s-1)}}#`);for(;t&&(c=t.split(`
`,1)[0],d=c,this.options.pedantic&&(d=d.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  ")),!(M.test(d)||$.test(d)||T.test(d)||b.test(t)));){if(d.search(/[^ ]/)>=s||!d.trim())f+=`
`+d.slice(s);else{if(a||u.search(/[^ ]/)>=4||M.test(u)||$.test(u)||b.test(u))break;f+=`
`+d}!a&&!d.trim()&&(a=!0),r+=c+`
`,t=t.substring(c.length+1),u=d.slice(s)}}m.loose||(l?m.loose=!0:/\n *\n *$/.test(r)&&(l=!0)),this.options.gfm&&(n=/^\[[ xX]\] /.exec(f),n&&(i=n[0]!=="[ ] ",f=f.replace(/^\[[ xX]\] +/,""))),m.items.push({type:"list_item",raw:r,task:!!n,checked:i,loose:!1,text:f}),m.raw+=r}m.items[m.items.length-1].raw=r.trimRight(),m.items[m.items.length-1].text=f.trimRight(),m.raw=m.raw.trimRight();let k=m.items.length;for(o=0;o<k;o++)if(this.lexer.state.top=!1,m.items[o].tokens=this.lexer.blockTokens(m.items[o].text,[]),!m.loose){let T=m.items[o].tokens.filter(M=>M.type==="space"),b=T.length>0&&T.some(M=>/\n.*\n/.test(M.raw));m.loose=b}if(m.loose)for(o=0;o<k;o++)m.items[o].loose=!0;return m}}html(t){let e=this.rules.block.html.exec(t);if(e){let r={type:"html",block:!0,raw:e[0],pre:!this.options.sanitizer&&(e[1]==="pre"||e[1]==="script"||e[1]==="style"),text:e[0]};if(this.options.sanitize){let n=this.options.sanitizer?this.options.sanitizer(e[0]):Pe(e[0]),i=r;i.type="paragraph",i.text=n,i.tokens=this.lexer.inline(n)}return r}}def(t){let e=this.rules.block.def.exec(t);if(e){let r=e[1].toLowerCase().replace(/\s+/g," "),n=e[2]?e[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline._escapes,"$1"):"",i=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline._escapes,"$1"):e[3];return{type:"def",tag:r,raw:e[0],href:n,title:i}}}table(t){let e=this.rules.block.table.exec(t);if(e){let r={type:"table",header:pg(e[1]).map(n=>({text:n})),align:e[2].replace(/^ *|\| *$/g,"").split(/ *\| */),rows:e[3]&&e[3].trim()?e[3].replace(/\n[ \t]*$/,"").split(`
`):[]};if(r.header.length===r.align.length){r.raw=e[0];let n=r.align.length,i,s,o,a;for(i=0;i<n;i++)/^ *-+: *$/.test(r.align[i])?r.align[i]="right":/^ *:-+: *$/.test(r.align[i])?r.align[i]="center":/^ *:-+ *$/.test(r.align[i])?r.align[i]="left":r.align[i]=null;for(n=r.rows.length,i=0;i<n;i++)r.rows[i]=pg(r.rows[i],r.header.length).map(l=>({text:l}));for(n=r.header.length,s=0;s<n;s++)r.header[s].tokens=this.lexer.inline(r.header[s].text);for(n=r.rows.length,s=0;s<n;s++)for(a=r.rows[s],o=0;o<a.length;o++)a[o].tokens=this.lexer.inline(a[o].text);return r}}}lheading(t){let e=this.rules.block.lheading.exec(t);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(t){let e=this.rules.block.paragraph.exec(t);if(e){let r=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:r,tokens:this.lexer.inline(r)}}}text(t){let e=this.rules.block.text.exec(t);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(t){let e=this.rules.inline.escape.exec(t);if(e)return{type:"escape",raw:e[0],text:Pe(e[1])}}tag(t){let e=this.rules.inline.tag.exec(t);if(e)return!this.lexer.state.inLink&&/^<a /i.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:this.options.sanitize?"text":"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(e[0]):Pe(e[0]):e[0]}}link(t){let e=this.rules.inline.link.exec(t);if(e){let r=e[2].trim();if(!this.options.pedantic&&/^</.test(r)){if(!/>$/.test(r))return;let s=fo(r.slice(0,-1),"\\");if((r.length-s.length)%2===0)return}else{let s=xx(e[2],"()");if(s>-1){let a=(e[0].indexOf("!")===0?5:4)+e[1].length+s;e[2]=e[2].substring(0,s),e[0]=e[0].substring(0,a).trim(),e[3]=""}}let n=e[2],i="";if(this.options.pedantic){let s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);s&&(n=s[1],i=s[3])}else i=e[3]?e[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(this.options.pedantic&&!/>$/.test(r)?n=n.slice(1):n=n.slice(1,-1)),mg(e,{href:n&&n.replace(this.rules.inline._escapes,"$1"),title:i&&i.replace(this.rules.inline._escapes,"$1")},e[0],this.lexer)}}reflink(t,e){let r;if((r=this.rules.inline.reflink.exec(t))||(r=this.rules.inline.nolink.exec(t))){let n=(r[2]||r[1]).replace(/\s+/g," ");if(n=e[n.toLowerCase()],!n){let i=r[0].charAt(0);return{type:"text",raw:i,text:i}}return mg(r,n,r[0],this.lexer)}}emStrong(t,e,r=""){let n=this.rules.inline.emStrong.lDelim.exec(t);if(!n||n[3]&&r.match(/[\p{L}\p{N}]/u))return;if(!(n[1]||n[2]||"")||!r||this.rules.inline.punctuation.exec(r)){let s=n[0].length-1,o,a,l=s,u=0,d=n[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(d.lastIndex=0,e=e.slice(-1*t.length+s);(n=d.exec(e))!=null;){if(o=n[1]||n[2]||n[3]||n[4]||n[5]||n[6],!o)continue;if(a=o.length,n[3]||n[4]){l+=a;continue}else if((n[5]||n[6])&&s%3&&!((s+a)%3)){u+=a;continue}if(l-=a,l>0)continue;a=Math.min(a,a+l+u);let c=t.slice(0,s+n.index+a+1);if(Math.min(s,a)%2){let h=c.slice(1,-1);return{type:"em",raw:c,text:h,tokens:this.lexer.inlineTokens(h)}}let f=c.slice(2,-2);return{type:"strong",raw:c,text:f,tokens:this.lexer.inlineTokens(f)}}}}codespan(t){let e=this.rules.inline.code.exec(t);if(e){let r=e[2].replace(/\n/g," "),n=/[^ ]/.test(r),i=/^ /.test(r)&&/ $/.test(r);return n&&i&&(r=r.substring(1,r.length-1)),r=Pe(r,!0),{type:"codespan",raw:e[0],text:r}}}br(t){let e=this.rules.inline.br.exec(t);if(e)return{type:"br",raw:e[0]}}del(t){let e=this.rules.inline.del.exec(t);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(t,e){let r=this.rules.inline.autolink.exec(t);if(r){let n,i;return r[2]==="@"?(n=Pe(this.options.mangle?e(r[1]):r[1]),i="mailto:"+n):(n=Pe(r[1]),i=n),{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}url(t,e){let r;if(r=this.rules.inline.url.exec(t)){let n,i;if(r[2]==="@")n=Pe(this.options.mangle?e(r[0]):r[0]),i="mailto:"+n;else{let s;do s=r[0],r[0]=this.rules.inline._backpedal.exec(r[0])[0];while(s!==r[0]);n=Pe(r[0]),r[1]==="www."?i="http://"+r[0]:i=r[0]}return{type:"link",raw:r[0],text:n,href:i,tokens:[{type:"text",raw:n,text:n}]}}}inlineText(t,e){let r=this.rules.inline.text.exec(t);if(r){let n;return this.lexer.state.inRawBlock?n=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):Pe(r[0]):r[0]:n=Pe(this.options.smartypants?e(r[0]):r[0]),{type:"text",raw:r[0],text:n}}}},j={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,hr:/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *(?:\n *)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n *)?| *\n *)(title))? *(?:\n+|$)/,table:po,lheading:/^((?:(?!^bull ).|\n(?!\n|bull ))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,text:/^[^\n]+/};j._label=/(?!\s*\])(?:\\.|[^\[\]\\])+/;j._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;j.def=ie(j.def).replace("label",j._label).replace("title",j._title).getRegex();j.bullet=/(?:[*+-]|\d{1,9}[.)])/;j.listItemStart=ie(/^( *)(bull) */).replace("bull",j.bullet).getRegex();j.list=ie(j.list).replace(/bull/g,j.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+j.def.source+")").getRegex();j._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";j._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;j.html=ie(j.html,"i").replace("comment",j._comment).replace("tag",j._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();j.lheading=ie(j.lheading).replace(/bull/g,j.bullet).getRegex();j.paragraph=ie(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex();j.blockquote=ie(j.blockquote).replace("paragraph",j.paragraph).getRegex();j.normal={...j};j.gfm={...j.normal,table:"^ *([^\\n ].*\\|.*)\\n {0,3}(?:\\| *)?(:?-+:? *(?:\\| *:?-+:? *)*)(?:\\| *)?(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"};j.gfm.table=ie(j.gfm.table).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex();j.gfm.paragraph=ie(j._paragraph).replace("hr",j.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("table",j.gfm.table).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",j._tag).getRegex();j.pedantic={...j.normal,html:ie(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",j._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:po,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:ie(j.normal._paragraph).replace("hr",j.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",j.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()};var P={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:po,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(ref)\]/,nolink:/^!?\[(ref)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,rDelimAst:/^[^_*]*?__[^_*]*?\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\*)[punct](\*+)(?=[\s]|$)|[^punct\s](\*+)(?!\*)(?=[punct\s]|$)|(?!\*)[punct\s](\*+)(?=[^punct\s])|[\s](\*+)(?!\*)(?=[punct])|(?!\*)[punct](\*+)(?!\*)(?=[punct])|[^punct\s](\*+)(?=[^punct\s])/,rDelimUnd:/^[^_*]*?\*\*[^_*]*?_[^_*]*?(?=\*\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\s]|$)|[^punct\s](_+)(?!_)(?=[punct\s]|$)|(?!_)[punct\s](_+)(?=[^punct\s])|[\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:po,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^((?![*_])[\spunctuation])/};P._punctuation="\\p{P}$+<=>`^|~";P.punctuation=ie(P.punctuation,"u").replace(/punctuation/g,P._punctuation).getRegex();P.blockSkip=/\[[^[\]]*?\]\([^\(\)]*?\)|`[^`]*?`|<[^<>]*?>/g;P.anyPunctuation=/\\[punct]/g;P._escapes=/\\([punct])/g;P._comment=ie(j._comment).replace("(?:-->|$)","-->").getRegex();P.emStrong.lDelim=ie(P.emStrong.lDelim,"u").replace(/punct/g,P._punctuation).getRegex();P.emStrong.rDelimAst=ie(P.emStrong.rDelimAst,"gu").replace(/punct/g,P._punctuation).getRegex();P.emStrong.rDelimUnd=ie(P.emStrong.rDelimUnd,"gu").replace(/punct/g,P._punctuation).getRegex();P.anyPunctuation=ie(P.anyPunctuation,"gu").replace(/punct/g,P._punctuation).getRegex();P._escapes=ie(P._escapes,"gu").replace(/punct/g,P._punctuation).getRegex();P._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;P._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;P.autolink=ie(P.autolink).replace("scheme",P._scheme).replace("email",P._email).getRegex();P._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;P.tag=ie(P.tag).replace("comment",P._comment).replace("attribute",P._attribute).getRegex();P._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;P._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;P._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;P.link=ie(P.link).replace("label",P._label).replace("href",P._href).replace("title",P._title).getRegex();P.reflink=ie(P.reflink).replace("label",P._label).replace("ref",j._label).getRegex();P.nolink=ie(P.nolink).replace("ref",j._label).getRegex();P.reflinkSearch=ie(P.reflinkSearch,"g").replace("reflink",P.reflink).replace("nolink",P.nolink).getRegex();P.normal={...P};P.pedantic={...P.normal,strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:ie(/^!?\[(label)\]\((.*?)\)/).replace("label",P._label).getRegex(),reflink:ie(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",P._label).getRegex()};P.gfm={...P.normal,escape:ie(P.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/};P.gfm.url=ie(P.gfm.url,"i").replace("email",P.gfm._extended_email).getRegex();P.breaks={...P.gfm,br:ie(P.br).replace("{2,}","*").getRegex(),text:ie(P.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()};function Ox(t){return t.replace(/---/g,"\u2014").replace(/--/g,"\u2013").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1\u2018").replace(/'/g,"\u2019").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1\u201C").replace(/"/g,"\u201D").replace(/\.{3}/g,"\u2026")}function gg(t){let e="",r,n,i=t.length;for(r=0;r<i;r++)n=t.charCodeAt(r),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var Tt=class{constructor(t){this.tokens=[],this.tokens.links=Object.create(null),this.options=t||pr,this.options.tokenizer=this.options.tokenizer||new mo,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};let e={block:j.normal,inline:P.normal};this.options.pedantic?(e.block=j.pedantic,e.inline=P.pedantic):this.options.gfm&&(e.block=j.gfm,this.options.breaks?e.inline=P.breaks:e.inline=P.gfm),this.tokenizer.rules=e}static get rules(){return{block:j,inline:P}}static lex(t,e){return new Tt(e).lex(t)}static lexInline(t,e){return new Tt(e).inlineTokens(t)}lex(t){t=t.replace(/\r\n|\r/g,`
`),this.blockTokens(t,this.tokens);let e;for(;e=this.inlineQueue.shift();)this.inlineTokens(e.src,e.tokens);return this.tokens}blockTokens(t,e=[]){this.options.pedantic?t=t.replace(/\t/g,"    ").replace(/^ +$/gm,""):t=t.replace(/^( *)(\t+)/gm,(o,a,l)=>a+"    ".repeat(l.length));let r,n,i,s;for(;t;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(o=>(r=o.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))){if(r=this.tokenizer.space(t)){t=t.substring(r.raw.length),r.raw.length===1&&e.length>0?e[e.length-1].raw+=`
`:e.push(r);continue}if(r=this.tokenizer.code(t)){t=t.substring(r.raw.length),n=e[e.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+r.raw,n.text+=`
`+r.text,this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(r);continue}if(r=this.tokenizer.fences(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.heading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.hr(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.blockquote(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.list(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.html(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.def(t)){t=t.substring(r.raw.length),n=e[e.length-1],n&&(n.type==="paragraph"||n.type==="text")?(n.raw+=`
`+r.raw,n.text+=`
`+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=n.text):this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.lheading(t)){t=t.substring(r.raw.length),e.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startBlock){let o=1/0,a=t.slice(1),l;this.options.extensions.startBlock.forEach(u=>{l=u.call({lexer:this},a),typeof l=="number"&&l>=0&&(o=Math.min(o,l))}),o<1/0&&o>=0&&(i=t.substring(0,o+1))}if(this.state.top&&(r=this.tokenizer.paragraph(i))){n=e[e.length-1],s&&n.type==="paragraph"?(n.raw+=`
`+r.raw,n.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(r),s=i.length!==t.length,t=t.substring(r.raw.length);continue}if(r=this.tokenizer.text(t)){t=t.substring(r.raw.length),n=e[e.length-1],n&&n.type==="text"?(n.raw+=`
`+r.raw,n.text+=`
`+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=n.text):e.push(r);continue}if(t){let o="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(o);break}else throw new Error(o)}}return this.state.top=!0,e}inline(t,e=[]){return this.inlineQueue.push({src:t,tokens:e}),e}inlineTokens(t,e=[]){let r,n,i,s=t,o,a,l;if(this.tokens.links){let u=Object.keys(this.tokens.links);if(u.length>0)for(;(o=this.tokenizer.rules.inline.reflinkSearch.exec(s))!=null;)u.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(o=this.tokenizer.rules.inline.blockSkip.exec(s))!=null;)s=s.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+s.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(o=this.tokenizer.rules.inline.anyPunctuation.exec(s))!=null;)s=s.slice(0,o.index)+"++"+s.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;t;)if(a||(l=""),a=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(u=>(r=u.call({lexer:this},t,e))?(t=t.substring(r.raw.length),e.push(r),!0):!1))){if(r=this.tokenizer.escape(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.tag(t)){t=t.substring(r.raw.length),n=e[e.length-1],n&&r.type==="text"&&n.type==="text"?(n.raw+=r.raw,n.text+=r.text):e.push(r);continue}if(r=this.tokenizer.link(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.reflink(t,this.tokens.links)){t=t.substring(r.raw.length),n=e[e.length-1],n&&r.type==="text"&&n.type==="text"?(n.raw+=r.raw,n.text+=r.text):e.push(r);continue}if(r=this.tokenizer.emStrong(t,s,l)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.codespan(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.br(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.del(t)){t=t.substring(r.raw.length),e.push(r);continue}if(r=this.tokenizer.autolink(t,gg)){t=t.substring(r.raw.length),e.push(r);continue}if(!this.state.inLink&&(r=this.tokenizer.url(t,gg))){t=t.substring(r.raw.length),e.push(r);continue}if(i=t,this.options.extensions&&this.options.extensions.startInline){let u=1/0,d=t.slice(1),c;this.options.extensions.startInline.forEach(f=>{c=f.call({lexer:this},d),typeof c=="number"&&c>=0&&(u=Math.min(u,c))}),u<1/0&&u>=0&&(i=t.substring(0,u+1))}if(r=this.tokenizer.inlineText(i,Ox)){t=t.substring(r.raw.length),r.raw.slice(-1)!=="_"&&(l=r.raw.slice(-1)),a=!0,n=e[e.length-1],n&&n.type==="text"?(n.raw+=r.raw,n.text+=r.text):e.push(r);continue}if(t){let u="Infinite loop on byte: "+t.charCodeAt(0);if(this.options.silent){console.error(u);break}else throw new Error(u)}}return e}},go=class{constructor(t){this.options=t||pr}code(t,e,r){let n=(e||"").match(/\S*/)[0];if(this.options.highlight){let i=this.options.highlight(t,n);i!=null&&i!==t&&(r=!0,t=i)}return t=t.replace(/\n$/,"")+`
`,n?'<pre><code class="'+this.options.langPrefix+Pe(n)+'">'+(r?t:Pe(t,!0))+`</code></pre>
`:"<pre><code>"+(r?t:Pe(t,!0))+`</code></pre>
`}blockquote(t){return`<blockquote>
${t}</blockquote>
`}html(t,e){return t}heading(t,e,r,n){if(this.options.headerIds){let i=this.options.headerPrefix+n.slug(r);return`<h${e} id="${i}">${t}</h${e}>
`}return`<h${e}>${t}</h${e}>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(t,e,r){let n=e?"ol":"ul",i=e&&r!==1?' start="'+r+'"':"";return"<"+n+i+`>
`+t+"</"+n+`>
`}listitem(t,e,r){return`<li>${t}</li>
`}checkbox(t){return"<input "+(t?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(t){return`<p>${t}</p>
`}table(t,e){return e&&(e=`<tbody>${e}</tbody>`),`<table>
<thead>
`+t+`</thead>
`+e+`</table>
`}tablerow(t){return`<tr>
${t}</tr>
`}tablecell(t,e){let r=e.header?"th":"td";return(e.align?`<${r} align="${e.align}">`:`<${r}>`)+t+`</${r}>
`}strong(t){return`<strong>${t}</strong>`}em(t){return`<em>${t}</em>`}codespan(t){return`<code>${t}</code>`}br(){return this.options.xhtml?"<br/>":"<br>"}del(t){return`<del>${t}</del>`}link(t,e,r){if(t=hg(this.options.sanitize,this.options.baseUrl,t),t===null)return r;let n='<a href="'+t+'"';return e&&(n+=' title="'+e+'"'),n+=">"+r+"</a>",n}image(t,e,r){if(t=hg(this.options.sanitize,this.options.baseUrl,t),t===null)return r;let n=`<img src="${t}" alt="${r}"`;return e&&(n+=` title="${e}"`),n+=this.options.xhtml?"/>":">",n}text(t){return t}},tu=class{strong(t){return t}em(t){return t}codespan(t){return t}del(t){return t}html(t){return t}text(t){return t}link(t,e,r){return""+r}image(t,e,r){return""+r}br(){return""}},ru=class{constructor(){this.seen={}}serialize(t){return t.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(t,e){let r=t,n=0;if(this.seen.hasOwnProperty(r)){n=this.seen[t];do n++,r=t+"-"+n;while(this.seen.hasOwnProperty(r))}return e||(this.seen[t]=n,this.seen[r]=0),r}slug(t,e={}){let r=this.serialize(t);return this.getNextSafeSlug(r,e.dryrun)}},St=class{constructor(t){this.options=t||pr,this.options.renderer=this.options.renderer||new go,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new tu,this.slugger=new ru}static parse(t,e){return new St(e).parse(t)}static parseInline(t,e){return new St(e).parseInline(t)}parse(t,e=!0){let r="",n,i,s,o,a,l,u,d,c,f,h,p,g,m,x,k,T,b,M,$=t.length;for(n=0;n<$;n++){if(f=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[f.type]&&(M=this.options.extensions.renderers[f.type].call({parser:this},f),M!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(f.type))){r+=M||"";continue}switch(f.type){case"space":continue;case"hr":{r+=this.renderer.hr();continue}case"heading":{r+=this.renderer.heading(this.parseInline(f.tokens),f.depth,wg(this.parseInline(f.tokens,this.textRenderer)),this.slugger);continue}case"code":{r+=this.renderer.code(f.text,f.lang,!!f.escaped);continue}case"table":{for(d="",u="",o=f.header.length,i=0;i<o;i++)u+=this.renderer.tablecell(this.parseInline(f.header[i].tokens),{header:!0,align:f.align[i]});for(d+=this.renderer.tablerow(u),c="",o=f.rows.length,i=0;i<o;i++){for(l=f.rows[i],u="",a=l.length,s=0;s<a;s++)u+=this.renderer.tablecell(this.parseInline(l[s].tokens),{header:!1,align:f.align[s]});c+=this.renderer.tablerow(u)}r+=this.renderer.table(d,c);continue}case"blockquote":{c=this.parse(f.tokens),r+=this.renderer.blockquote(c);continue}case"list":{for(h=f.ordered,p=f.start,g=f.loose,o=f.items.length,c="",i=0;i<o;i++)x=f.items[i],k=x.checked,T=x.task,m="",x.task&&(b=this.renderer.checkbox(!!k),g?x.tokens.length>0&&x.tokens[0].type==="paragraph"?(x.tokens[0].text=b+" "+x.tokens[0].text,x.tokens[0].tokens&&x.tokens[0].tokens.length>0&&x.tokens[0].tokens[0].type==="text"&&(x.tokens[0].tokens[0].text=b+" "+x.tokens[0].tokens[0].text)):x.tokens.unshift({type:"text",text:b}):m+=b),m+=this.parse(x.tokens,g),c+=this.renderer.listitem(m,T,!!k);r+=this.renderer.list(c,h,p);continue}case"html":{r+=this.renderer.html(f.text,f.block);continue}case"paragraph":{r+=this.renderer.paragraph(this.parseInline(f.tokens));continue}case"text":{for(c=f.tokens?this.parseInline(f.tokens):f.text;n+1<$&&t[n+1].type==="text";)f=t[++n],c+=`
`+(f.tokens?this.parseInline(f.tokens):f.text);r+=e?this.renderer.paragraph(c):c;continue}default:{let N='Token with "'+f.type+'" type was not found.';if(this.options.silent)return console.error(N),"";throw new Error(N)}}}return r}parseInline(t,e){e=e||this.renderer;let r="",n,i,s,o=t.length;for(n=0;n<o;n++){if(i=t[n],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]&&(s=this.options.extensions.renderers[i.type].call({parser:this},i),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type))){r+=s||"";continue}switch(i.type){case"escape":{r+=e.text(i.text);break}case"html":{r+=e.html(i.text);break}case"link":{r+=e.link(i.href,i.title,this.parseInline(i.tokens,e));break}case"image":{r+=e.image(i.href,i.title,i.text);break}case"strong":{r+=e.strong(this.parseInline(i.tokens,e));break}case"em":{r+=e.em(this.parseInline(i.tokens,e));break}case"codespan":{r+=e.codespan(i.text);break}case"br":{r+=e.br();break}case"del":{r+=e.del(this.parseInline(i.tokens,e));break}case"text":{r+=e.text(i.text);break}default:{let a='Token with "'+i.type+'" type was not found.';if(this.options.silent)return console.error(a),"";throw new Error(a)}}}return r}},hi=class{constructor(t){this.options=t||pr}preprocess(t){return t}postprocess(t){return t}};hi.passThroughHooks=new Set(["preprocess","postprocess"]);var ho,Ql,nu,vg,Mx=class{constructor(...t){fg(this,ho),fg(this,nu),this.defaults=eu(),this.options=this.setOptions,this.parse=Xl(this,ho,Ql).call(this,Tt.lex,St.parse),this.parseInline=Xl(this,ho,Ql).call(this,Tt.lexInline,St.parseInline),this.Parser=St,this.parser=St.parse,this.Renderer=go,this.TextRenderer=tu,this.Lexer=Tt,this.lexer=Tt.lex,this.Tokenizer=mo,this.Slugger=ru,this.Hooks=hi,this.use(...t)}walkTokens(t,e){let r=[];for(let n of t)switch(r=r.concat(e.call(this,n)),n.type){case"table":{for(let i of n.header)r=r.concat(this.walkTokens(i.tokens,e));for(let i of n.rows)for(let s of i)r=r.concat(this.walkTokens(s.tokens,e));break}case"list":{r=r.concat(this.walkTokens(n.items,e));break}default:this.defaults.extensions&&this.defaults.extensions.childTokens&&this.defaults.extensions.childTokens[n.type]?this.defaults.extensions.childTokens[n.type].forEach(i=>{r=r.concat(this.walkTokens(n[i],e))}):n.tokens&&(r=r.concat(this.walkTokens(n.tokens,e)))}return r}use(...t){let e=this.defaults.extensions||{renderers:{},childTokens:{}};return t.forEach(r=>{let n={...r};if(n.async=this.defaults.async||n.async||!1,r.extensions&&(r.extensions.forEach(i=>{if(!i.name)throw new Error("extension name required");if("renderer"in i){let s=e.renderers[i.name];s?e.renderers[i.name]=function(...o){let a=i.renderer.apply(this,o);return a===!1&&(a=s.apply(this,o)),a}:e.renderers[i.name]=i.renderer}if("tokenizer"in i){if(!i.level||i.level!=="block"&&i.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");e[i.level]?e[i.level].unshift(i.tokenizer):e[i.level]=[i.tokenizer],i.start&&(i.level==="block"?e.startBlock?e.startBlock.push(i.start):e.startBlock=[i.start]:i.level==="inline"&&(e.startInline?e.startInline.push(i.start):e.startInline=[i.start]))}"childTokens"in i&&i.childTokens&&(e.childTokens[i.name]=i.childTokens)}),n.extensions=e),r.renderer){let i=this.defaults.renderer||new go(this.defaults);for(let s in r.renderer){let o=i[s];i[s]=(...a)=>{let l=r.renderer[s].apply(i,a);return l===!1&&(l=o.apply(i,a)),l}}n.renderer=i}if(r.tokenizer){let i=this.defaults.tokenizer||new mo(this.defaults);for(let s in r.tokenizer){let o=i[s];i[s]=(...a)=>{let l=r.tokenizer[s].apply(i,a);return l===!1&&(l=o.apply(i,a)),l}}n.tokenizer=i}if(r.hooks){let i=this.defaults.hooks||new hi;for(let s in r.hooks){let o=i[s];hi.passThroughHooks.has(s)?i[s]=a=>{if(this.defaults.async)return Promise.resolve(r.hooks[s].call(i,a)).then(u=>o.call(i,u));let l=r.hooks[s].call(i,a);return o.call(i,l)}:i[s]=(...a)=>{let l=r.hooks[s].apply(i,a);return l===!1&&(l=o.apply(i,a)),l}}n.hooks=i}if(r.walkTokens){let i=this.defaults.walkTokens;n.walkTokens=function(s){let o=[];return o.push(r.walkTokens.call(this,s)),i&&(o=o.concat(i.call(this,s))),o}}this.defaults={...this.defaults,...n}}),this}setOptions(t){return this.defaults={...this.defaults,...t},this}};ho=new WeakSet;Ql=function(t,e){return(r,n,i)=>{typeof n=="function"&&(i=n,n=null);let s={...n},o={...this.defaults,...s},a=Xl(this,nu,vg).call(this,!!o.silent,!!o.async,i);if(typeof r>"u"||r===null)return a(new Error("marked(): input parameter is undefined or null"));if(typeof r!="string")return a(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(r)+", string expected"));if(kx(o,i),o.hooks&&(o.hooks.options=o),i){let l=o.highlight,u;try{o.hooks&&(r=o.hooks.preprocess(r)),u=t(r,o)}catch(f){return a(f)}let d=f=>{let h;if(!f)try{o.walkTokens&&this.walkTokens(u,o.walkTokens),h=e(u,o),o.hooks&&(h=o.hooks.postprocess(h))}catch(p){f=p}return o.highlight=l,f?a(f):i(null,h)};if(!l||l.length<3||(delete o.highlight,!u.length))return d();let c=0;this.walkTokens(u,f=>{f.type==="code"&&(c++,setTimeout(()=>{l(f.text,f.lang,(h,p)=>{if(h)return d(h);p!=null&&p!==f.text&&(f.text=p,f.escaped=!0),c--,c===0&&d()})},0))}),c===0&&d();return}if(o.async)return Promise.resolve(o.hooks?o.hooks.preprocess(r):r).then(l=>t(l,o)).then(l=>o.walkTokens?Promise.all(this.walkTokens(l,o.walkTokens)).then(()=>l):l).then(l=>e(l,o)).then(l=>o.hooks?o.hooks.postprocess(l):l).catch(a);try{o.hooks&&(r=o.hooks.preprocess(r));let l=t(r,o);o.walkTokens&&this.walkTokens(l,o.walkTokens);let u=e(l,o);return o.hooks&&(u=o.hooks.postprocess(u)),u}catch(l){return a(l)}}};nu=new WeakSet;vg=function(t,e,r){return n=>{if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,t){let i="<p>An error occurred:</p><pre>"+Pe(n.message+"",!0)+"</pre>";if(e)return Promise.resolve(i);if(r){r(null,i);return}return i}if(e)return Promise.reject(n);if(r){r(n);return}throw n}};var hr=new Mx;function Z(t,e,r){return hr.parse(t,e,r)}Z.options=Z.setOptions=function(t){return hr.setOptions(t),Z.defaults=hr.defaults,yg(Z.defaults),Z};Z.getDefaults=eu;Z.defaults=pr;Z.use=function(...t){return hr.use(...t),Z.defaults=hr.defaults,yg(Z.defaults),Z};Z.walkTokens=function(t,e){return hr.walkTokens(t,e)};Z.parseInline=hr.parseInline;Z.Parser=St;Z.parser=St.parse;Z.Renderer=go;Z.TextRenderer=tu;Z.Lexer=Tt;Z.lexer=Tt.lex;Z.Tokenizer=mo;Z.Slugger=ru;Z.Hooks=hi;Z.parse=Z;var vI=Z.options,TI=Z.setOptions,SI=Z.use,EI=Z.walkTokens,xI=Z.parseInline;var kI=St.parse,RI=Tt.lex;function Px(t){let e,r,n;return{c(){e=L("div"),w(e,"class","task-card-description"),w(e,"role","button"),w(e,"tabindex","0")},m(i,s){F(i,e,s),e.innerHTML=t[2],r||(n=[z(e,"click",t[4]),z(e,"keydown",t[4])],r=!0)},p(i,s){s&4&&(e.innerHTML=i[2])},d(i){i&&q(e),r=!1,J(n)}}}function Cx(t){let e,r,n;return{c(){e=L("textarea"),w(e,"class","task-card-description")},m(i,s){F(i,e,s),Ne(e,t[1]),t[7](e),r||(n=[z(e,"input",t[6]),z(e,"keydown",t[5])],r=!0)},p(i,s){s&2&&Ne(e,i[1])},d(i){i&&q(e),t[7](null),r=!1,J(n)}}}function Ax(t){let e,r;function n(o,a){return a&1&&(e=null),e==null&&(e=o[0].getTaskCardStatus("descriptionStatus")==="editing"),e?Cx:Px}let i=n(t,-1),s=i(t);return{c(){s.c(),r=Oe()},m(o,a){s.m(o,a),F(o,r,a)},p(o,[a]){i===(i=n(o,a))&&s?s.p(o,a):(s.d(1),s=i(o),s&&(s.c(),s.m(r.parentNode,r)))},i:re,o:re,d(o){o&&q(r),s.d(o)}}}function Tg(t){t.focus(),t.select()}function Ix(t,e,r){Z.use({mangle:!1,headerIds:!1,langPrefix:""});let{taskSyncManager:n}=e,i=n.obsidianTask.description,s=Z(i),o;async function a(c){c instanceof KeyboardEvent?(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),r(0,n.taskCardStatus.descriptionStatus="editing",n),await We(),Tg(o)):c instanceof MouseEvent&&(r(0,n.taskCardStatus.descriptionStatus="editing",n),await We(),Tg(o))}function l(c){c.shiftKey&&c.key==="Enter"?(c.preventDefault(),r(0,n.taskCardStatus.descriptionStatus="done",n),r(2,s=Z(i)),n.updateObsidianTaskAttribute("description",i)):c.key==="Escape"&&(r(0,n.taskCardStatus.descriptionStatus="done",n),r(1,i=n.obsidianTask.description),r(2,s=Z(i)))}function u(){i=this.value,r(1,i)}function d(c){Ze[c?"unshift":"push"](()=>{o=c,r(3,o)})}return t.$$set=c=>{"taskSyncManager"in c&&r(0,n=c.taskSyncManager)},[n,i,s,o,a,l,u,d]}var iu=class extends ce{constructor(e){super(),ge(this,e,Ix,Ax,fe,{taskSyncManager:0})}},Sg=iu;function Nx(t){kt(t,"svelte-hvlaac",".task-card-content.mode-multi-line.svelte-hvlaac:hover{background-color:var(--background-modifier-hover)}.task-card-content.mode-multi-line.svelte-hvlaac:active{background-color:var(--background-modifier-active-hover)}input.task-card-content.mode-multi-line.svelte-hvlaac{border:var(--input-border-width) solid var(--background-modifier-border);border-radius:var(--radius-s);font-size:var(--font-text-size);font-weight:var(--input-font-weight);outline:none;box-shadow:none}input.task-card-content.mode-multi-line.svelte-hvlaac:hover{border-color:var(--background-modifier-border-hover)}input.task-card-content.mode-multi-line.svelte-hvlaac:focus{border-color:var(--background-modifier-border-focus);box-shadow:0 0 5px var(--background-modifier-border-focus)}")}function $x(t){let e,r,n,i;return{c(){e=L("div"),r=Ce(t[0]),w(e,"class","task-card-content mode-multi-line svelte-hvlaac"),w(e,"role","button"),w(e,"tabindex","0")},m(s,o){F(s,e,o),U(e,r),n||(i=[z(e,"click",t[3]),z(e,"keydown",t[3])],n=!0)},p(s,o){o&1&&tt(r,s[0])},d(s){s&&q(e),n=!1,J(i)}}}function Dx(t){let e,r,n;return{c(){e=L("input"),w(e,"class","task-card-content mode-multi-line svelte-hvlaac")},m(i,s){F(i,e,s),Ne(e,t[0]),t[7](e),r||(n=[z(e,"input",t[6]),z(e,"keydown",t[4])],r=!0)},p(i,s){s&1&&e.value!==i[0]&&Ne(e,i[0])},d(i){i&&q(e),t[7](null),r=!1,J(n)}}}function Lx(t){let e;function r(s,o){return s[1]?Dx:$x}let n=r(t,-1),i=n(t);return{c(){i.c(),e=Oe()},m(s,o){i.m(s,o),F(s,e,o)},p(s,[o]){n===(n=r(s,o))&&i?i.p(s,o):(i.d(1),i=n(s),i&&(i.c(),i.m(e.parentNode,e)))},i:re,o:re,d(s){s&&q(e),i.d(s)}}}function Eg(t){t.focus(),t.select()}function jx(t,e,r){let{taskSyncManager:n}=e,i=n.obsidianTask.content,s=!1,o;async function a(c){c instanceof KeyboardEvent?(c.key==="Enter"||c.key===" ")&&(c.preventDefault(),r(1,s=!0),await We(),Eg(o)):c instanceof MouseEvent&&(r(1,s=!0),await We(),Eg(o))}function l(c){c.key==="Enter"?(c.preventDefault(),r(1,s=!1),n.updateObsidianTaskAttribute("content",i)):c.key==="Escape"&&(r(1,s=!1),r(0,i=n.obsidianTask.content))}function u(){i=this.value,r(0,i)}function d(c){Ze[c?"unshift":"push"](()=>{o=c,r(2,o)})}return t.$$set=c=>{"taskSyncManager"in c&&r(5,n=c.taskSyncManager)},[i,s,o,a,l,n,u,d]}var su=class extends ce{constructor(e){super(),ge(this,e,jx,Lx,fe,{taskSyncManager:5},Nx)}},xg=su;function qx(t){let e,r;return e=new en({props:{width:t[0],height:t[1],svgPath:t[2],ariaLabel:"chevrons-down-up",class:"task-card-icon"}}),{c(){_e(e.$$.fragment)},m(n,i){pe(e,n,i),r=!0},p(n,[i]){let s={};i&1&&(s.width=n[0]),i&2&&(s.height=n[1]),e.$set(s)},i(n){r||(H(e.$$.fragment,n),r=!0)},o(n){X(e.$$.fragment,n),r=!1},d(n){me(e,n)}}}function Fx(t,e,r){let{width:n="24"}=e,{height:i="24"}=e,s=`
    <path d="m7 20 5-5 5 5" />
    <path d="m7 4 5 5 5-5" />
  `;return t.$$set=o=>{"width"in o&&r(0,n=o.width),"height"in o&&r(1,i=o.height)},[n,i,s]}var ou=class extends ce{constructor(e){super(),ge(this,e,Fx,qx,fe,{width:0,height:1})}},kg=ou;function Ux(t){let e,r;return e=new en({props:{width:t[0],height:t[1],svgPath:t[2],ariaLabel:"more-vertical",class:"task-card-icon"}}),{c(){_e(e.$$.fragment)},m(n,i){pe(e,n,i),r=!0},p(n,[i]){let s={};i&1&&(s.width=n[0]),i&2&&(s.height=n[1]),e.$set(s)},i(n){r||(H(e.$$.fragment,n),r=!0)},o(n){X(e.$$.fragment,n),r=!1},d(n){me(e,n)}}}function zx(t,e,r){let{width:n="24"}=e,{height:i="24"}=e,s=`
        <circle cx="12" cy="12" r="1"/>
        <circle cx="12" cy="5" r="1"/>
        <circle cx="12" cy="19" r="1"/>
    `;return t.$$set=o=>{"width"in o&&r(0,n=o.width),"height"in o&&r(1,i=o.height)},[n,i,s]}var au=class extends ce{constructor(e){super(),ge(this,e,zx,Ux,fe,{width:0,height:1})}},Rg=au;var lu=require("obsidian");function Bx(t){kt(t,"svelte-1cig2ed",".task-card-checkbox.svelte-1cig2ed{border:var(--border-width) solid}.task-card-checkbox.priority-1.svelte-1cig2ed{border-color:var(--color-red)}.task-card-checkbox.priority-2.svelte-1cig2ed{border-color:var(--color-orange)}.task-card-checkbox.priority-3.svelte-1cig2ed{border-color:var(--color-yellow)}.task-card-checkbox.priority-1.svelte-1cig2ed:hover{border-color:var(--color-red)}.task-card-checkbox.priority-2.svelte-1cig2ed:hover{border-color:var(--color-orange)}.task-card-checkbox.priority-3.svelte-1cig2ed:hover{border-color:var(--color-yellow)}.task-card-checkbox.svelte-1cig2ed:hover{cursor:pointer;border-width:calc( 2 * var(--border-width))}.task-card-menu-button.svelte-1cig2ed{background:none !important;border:none !important;box-shadow:none !important;outline:none !important;cursor:pointer;padding:0 0.25em !important;margin:0 0.15em !important}.task-card-menu-button.svelte-1cig2ed:hover{background:none !important;box-shadow:none !important}")}function Wx(t){let e,r,n,i,s,o,a,l,u,d,c,f,h,p,g,m,x,k,T=t[0].obsidianTask.hasDue()||t[0].getTaskCardStatus("dueStatus")==="editing",b,M,$,N,C,G,se,A,R;l=new xg({props:{taskSyncManager:t[0]}}),d=new Gl({props:{taskSyncManager:t[0],params:t[2]}}),f=new Sg({props:{taskSyncManager:t[0]}}),g=new Rg({});let v=T&&Og(t);return M=new cg({props:{taskSyncManager:t[0]}}),G=new kg({}),{c(){e=L("div"),r=L("div"),n=L("input"),o=he(),a=L("div"),_e(l.$$.fragment),u=he(),_e(d.$$.fragment),c=he(),_e(f.$$.fragment),h=he(),p=L("button"),_e(g.$$.fragment),m=he(),x=L("div"),k=L("div"),v&&v.c(),b=he(),_e(M.$$.fragment),$=he(),N=L("div"),C=L("button"),_e(G.$$.fragment),w(n,"type","checkbox"),w(n,"class",i=nn(`task-card-checkbox priority-${t[3].priority}`)+" svelte-1cig2ed"),n.checked=s=t[3].completed,w(r,"class","task-card-checkbox-wrapper"),w(a,"class","task-card-content-project-line"),w(p,"class","task-card-menu-button mode-multi-line svelte-1cig2ed"),w(p,"tabindex","0"),w(e,"class","task-card-major-block"),w(k,"class","task-card-attribute-bottom-bar-left"),w(C,"class","task-card-round-button"),w(N,"class","task-card-attribute-bottom-bar-right"),w(x,"class","task-card-attribute-bottom-bar")},m(E,O){F(E,e,O),U(e,r),U(r,n),U(e,o),U(e,a),pe(l,a,null),U(a,u),pe(d,a,null),U(e,c),pe(f,e,null),U(e,h),U(e,p),pe(g,p,null),F(E,m,O),F(E,x,O),U(x,k),v&&v.m(k,null),U(k,b),pe(M,k,null),U(x,$),U(x,N),U(N,C),pe(G,C,null),se=!0,A||(R=[z(n,"click",Po(t[5])),z(n,"contextmenu",t[6]),z(p,"click",t[8]),z(C,"click",t[9])],A=!0)},p(E,O){(!se||O&8&&i!==(i=nn(`task-card-checkbox priority-${E[3].priority}`)+" svelte-1cig2ed"))&&w(n,"class",i),(!se||O&8&&s!==(s=E[3].completed))&&(n.checked=s);let y={};O&1&&(y.taskSyncManager=E[0]),l.$set(y);let S={};O&1&&(S.taskSyncManager=E[0]),O&4&&(S.params=E[2]),d.$set(S);let D={};O&1&&(D.taskSyncManager=E[0]),f.$set(D),O&1&&(T=E[0].obsidianTask.hasDue()||E[0].getTaskCardStatus("dueStatus")==="editing"),T?v?(v.p(E,O),O&1&&H(v,1)):(v=Og(E),v.c(),H(v,1),v.m(k,b)):v&&(pt(),X(v,1,1,()=>{v=null}),mt());let W={};O&1&&(W.taskSyncManager=E[0]),M.$set(W)},i(E){se||(H(l.$$.fragment,E),H(d.$$.fragment,E),H(f.$$.fragment,E),H(g.$$.fragment,E),H(v),H(M.$$.fragment,E),H(G.$$.fragment,E),se=!0)},o(E){X(l.$$.fragment,E),X(d.$$.fragment,E),X(f.$$.fragment,E),X(g.$$.fragment,E),X(v),X(M.$$.fragment,E),X(G.$$.fragment,E),se=!1},d(E){E&&(q(e),q(m),q(x)),me(l),me(d),me(f),me(g),v&&v.d(),me(M),me(G),A=!1,J(R)}}}function Yx(t){let e,r,n,i,s,o,a,l=t[3].content+"",u,d,c,f=t[0].obsidianTask.hasDue(),h,p,g,m,x,k=f&&Mg(t);return p=new Gl({props:{taskSyncManager:t[0],params:t[2]}}),{c(){e=L("div"),r=L("div"),n=L("input"),o=he(),a=L("div"),u=Ce(l),d=he(),c=L("div"),k&&k.c(),h=he(),_e(p.$$.fragment),w(n,"type","checkbox"),w(n,"class",i=nn(`task-card-checkbox priority-${t[3].priority}`)+" svelte-1cig2ed"),n.checked=s=t[3].completed,w(a,"class","task-card-content"),w(r,"class","task-card-single-line-left-container"),w(c,"class","task-card-single-line-right-container"),w(e,"class","task-card-single-line")},m(T,b){F(T,e,b),U(e,r),U(r,n),U(r,o),U(r,a),U(a,u),U(e,d),U(e,c),k&&k.m(c,null),U(c,h),pe(p,c,null),g=!0,m||(x=z(n,"click",Po(t[5])),m=!0)},p(T,b){(!g||b&8&&i!==(i=nn(`task-card-checkbox priority-${T[3].priority}`)+" svelte-1cig2ed"))&&w(n,"class",i),(!g||b&8&&s!==(s=T[3].completed))&&(n.checked=s),(!g||b&8)&&l!==(l=T[3].content+"")&&tt(u,l),b&1&&(f=T[0].obsidianTask.hasDue()),f?k?(k.p(T,b),b&1&&H(k,1)):(k=Mg(T),k.c(),H(k,1),k.m(c,h)):k&&(pt(),X(k,1,1,()=>{k=null}),mt());let M={};b&1&&(M.taskSyncManager=T[0]),b&4&&(M.params=T[2]),p.$set(M)},i(T){g||(H(k),H(p.$$.fragment,T),g=!0)},o(T){X(k),X(p.$$.fragment,T),g=!1},d(T){T&&q(e),k&&k.d(),me(p),m=!1,x()}}}function Og(t){let e,r,n,i;return e=new Hl({props:{taskSyncManager:t[0],plugin:t[1],params:t[2]}}),{c(){_e(e.$$.fragment),r=he(),n=L("div"),n.textContent="|",w(n,"class","task-card-attribute-separator")},m(s,o){pe(e,s,o),F(s,r,o),F(s,n,o),i=!0},p(s,o){let a={};o&1&&(a.taskSyncManager=s[0]),o&2&&(a.plugin=s[1]),o&4&&(a.params=s[2]),e.$set(a)},i(s){i||(H(e.$$.fragment,s),i=!0)},o(s){X(e.$$.fragment,s),i=!1},d(s){s&&(q(r),q(n)),me(e,s)}}}function Mg(t){let e,r;return e=new Hl({props:{taskSyncManager:t[0],plugin:t[1],params:t[2]}}),{c(){_e(e.$$.fragment)},m(n,i){pe(e,n,i),r=!0},p(n,i){let s={};i&1&&(s.taskSyncManager=n[0]),i&2&&(s.plugin=n[1]),i&4&&(s.params=n[2]),e.$set(s)},i(n){r||(H(e.$$.fragment,n),r=!0)},o(n){X(e.$$.fragment,n),r=!1},d(n){me(e,n)}}}function Hx(t){let e,r,n,i,s=[Yx,Wx],o=[];function a(l,u){return l[2].mode==="single-line"?0:1}return e=a(t,-1),r=o[e]=s[e](t),{c(){r.c(),n=Oe()},m(l,u){o[e].m(l,u),F(l,n,u),i=!0},p(l,[u]){let d=e;e=a(l,u),e===d?o[e].p(l,u):(pt(),X(o[d],1,1,()=>{o[d]=null}),mt(),r=o[e],r?r.p(l,u):(r=o[e]=s[e](l),r.c()),H(r,1),r.m(n.parentNode,n))},i(l){i||(H(r),i=!0)},o(l){X(r),i=!1},d(l){l&&q(n),o[e].d(l)}}}function Vx(t,e,r){let{taskSyncManager:n}=e,{plugin:i}=e,{params:s}=e,o=n.obsidianTask,a=yr();function l(p,g){p.stopPropagation(),a("switchMode",g);for(let m in n.taskCardStatus)r(0,n.taskCardStatus[m]="done",n)}function u(){r(3,o.completed=!o.completed,o)}function d(p){p.preventDefault();let g=new lu.Menu;g.addItem(m=>{m.setTitle("1. High"),m.setIcon("star"),m.onClick(x=>{n.updateObsidianTaskAttribute("priority",1)})}),g.addItem(m=>{m.setTitle("2. Medium"),m.setIcon("star"),m.onClick(x=>{n.updateObsidianTaskAttribute("priority",2)})}),g.addItem(m=>{m.setTitle("3. Low"),m.setIcon("star"),m.onClick(x=>{n.updateObsidianTaskAttribute("priority",3)})}),g.addItem(m=>{m.setTitle("4. Basic"),m.setIcon("star"),m.onClick(x=>{n.updateObsidianTaskAttribute("priority",4)})}),g.showAtPosition({x:p.clientX,y:p.clientY})}function c(p){p.preventDefault();let g=new lu.Menu;n.obsidianTask.hasDescription()?g.addItem(m=>{m.setTitle("Delete Description"),m.setIcon("trash"),m.onClick(x=>{n.updateObsidianTaskAttribute("description","")})}):g.addItem(m=>{m.setTitle("Add Description"),m.setIcon("plus"),m.onClick(x=>{r(0,n.taskCardStatus.descriptionStatus="editing",n)})}),n.obsidianTask.hasDue()?g.addItem(m=>{m.setTitle("Delete Due"),m.setIcon("trash"),m.onClick(x=>{n.updateObsidianTaskAttribute("due",null)})}):g.addItem(m=>{m.setTitle("Add Due"),m.setIcon("plus"),m.onClick(x=>{r(0,n.taskCardStatus.dueStatus="editing",n)})}),n.obsidianTask.hasAnyLabels()&&g.addItem(m=>{m.setTitle("Remove All Labels"),m.setIcon("trash"),m.onClick(x=>{n.updateObsidianTaskAttribute("labels",[])})}),n.obsidianTask.hasProject()?g.addItem(m=>{m.setTitle("Remove Project"),m.setIcon("trash"),m.onClick(x=>{n.updateObsidianTaskAttribute("project",null)})}):g.addItem(m=>{m.setTitle("Add Project"),m.setIcon("plus"),m.onClick(x=>{r(0,n.taskCardStatus.projectStatus="selecting",n)})}),g.addItem(m=>{m.setTitle("Delete Task"),m.setIcon("trash"),m.onClick(x=>{n.deleteTask()})}),g.showAtPosition({x:p.clientX,y:p.clientY})}let f=p=>c(p),h=p=>l(p,"single-line");return t.$$set=p=>{"taskSyncManager"in p&&r(0,n=p.taskSyncManager),"plugin"in p&&r(1,i=p.plugin),"params"in p&&r(2,s=p.params)},[n,i,s,o,l,u,d,c,f,h]}var uu=class extends ce{constructor(e){super(),ge(this,e,Vx,Hx,fe,{taskSyncManager:0,plugin:1,params:2},Bx)}},cu=uu;function Gx(t){let e,r,n;return r=new cu({props:{taskSyncManager:t[0],plugin:t[1],params:t[2]}}),r.$on("switchMode",t[3]),{c(){e=L("li"),_e(r.$$.fragment),w(e,"class","obsidian-taskcard task-list-item mode-multi-line")},m(i,s){F(i,e,s),pe(r,e,null),n=!0},p(i,s){let o={};s&1&&(o.taskSyncManager=i[0]),s&2&&(o.plugin=i[1]),s&4&&(o.params=i[2]),r.$set(o)},i(i){n||(H(r.$$.fragment,i),n=!0)},o(i){X(r.$$.fragment,i),n=!1},d(i){i&&q(e),me(r)}}}function Kx(t){let e,r,n,i,s;return r=new cu({props:{taskSyncManager:t[0],plugin:t[1],params:t[2]}}),r.$on("switchMode",t[3]),{c(){e=L("button"),_e(r.$$.fragment),w(e,"class","obsidian-taskcard task-list-item mode-single-line"),w(e,"tabindex","0")},m(o,a){F(o,e,a),pe(r,e,null),n=!0,i||(s=[z(e,"click",t[3]),z(e,"keydown",t[3])],i=!0)},p(o,a){let l={};a&1&&(l.taskSyncManager=o[0]),a&2&&(l.plugin=o[1]),a&4&&(l.params=o[2]),r.$set(l)},i(o){n||(H(r.$$.fragment,o),n=!0)},o(o){X(r.$$.fragment,o),n=!1},d(o){o&&q(e),me(r),i=!1,J(s)}}}function Zx(t){let e,r,n,i,s=[Kx,Gx],o=[];function a(l,u){return l[2].mode==="single-line"?0:1}return e=a(t,-1),r=o[e]=s[e](t),{c(){r.c(),n=Oe()},m(l,u){o[e].m(l,u),F(l,n,u),i=!0},p(l,[u]){let d=e;e=a(l,u),e===d?o[e].p(l,u):(pt(),X(o[d],1,1,()=>{o[d]=null}),mt(),r=o[e],r?r.p(l,u):(r=o[e]=s[e](l),r.c()),H(r,1),r.m(n.parentNode,n))},i(l){i||(H(r),i=!0)},o(l){X(r),i=!1},d(l){l&&q(n),o[e].d(l)}}}function Jx(t,e,r){let{taskSyncManager:n}=e,{plugin:i}=e,{defaultParams:s}=e,o=s,a=yr();function l(u){if(u instanceof KeyboardEvent&&u.key!=="Enter"&&u.key!==" ")return;let d=o.mode==="single-line"?"multi-line":"single-line";a("switchMode",d),ee.debug(`In TaskItem, switching mode to ${d}`),r(2,o=Object.assign(Object.assign({},o),{mode:d}))}return t.$$set=u=>{"taskSyncManager"in u&&r(0,n=u.taskSyncManager),"plugin"in u&&r(1,i=u.plugin),"defaultParams"in u&&r(4,s=u.defaultParams)},[n,i,o,l,s]}var fu=class extends ce{constructor(e){super(),ge(this,e,Jx,Zx,fe,{taskSyncManager:0,plugin:1,defaultParams:4})}},Pg=fu;var yo=class{constructor(e,r){this.obsidianTask=r?.obsidianTask||new Qe,this.taskCardStatus=r?.taskCardStatus||{descriptionStatus:"done",projectStatus:"done",dueStatus:"done"},this.taskItemEl=r?.taskItemEl||null,this.taskMetadata=r?.taskMetadata||{sourcePath:null,mdSectionInfo:null,lineStartInSection:null,lineEndsInSection:null},this.plugin=e}async getMarkdownTaskFromFile(){let e=this.taskMetadata.lineStartInSection+this.taskMetadata.mdSectionInfo.lineStart,r=this.taskMetadata.lineEndsInSection+this.taskMetadata.mdSectionInfo.lineStart;return await this.plugin.fileOperator.getMarkdownBetweenLines(this.taskMetadata.sourcePath,e,r)}async updateTaskToFile(e){let r=this.taskMetadata.lineStartInSection+this.taskMetadata.mdSectionInfo.lineStart,n=this.taskMetadata.lineEndsInSection+this.taskMetadata.mdSectionInfo.lineStart;ee.debug(`taskSyncManager - updateTaskToFile: docLineStart: ${r}, docLineEnd: ${n},
        linStartInSection: ${this.taskMetadata.lineStartInSection}, lineEndsInSection: ${this.taskMetadata.lineEndsInSection},
        section line start: ${this.taskMetadata.mdSectionInfo.lineStart}, section line end: ${this.taskMetadata.mdSectionInfo.lineEnd}`),await this.plugin.fileOperator.updateFile(this.taskMetadata.sourcePath,e,r,n)}updateObsidianTaskAttribute(e,r){this.obsidianTask[e]=r,ee.debug(`successfully set ${e} to ${r}`);let n=this.plugin.taskFormatter.taskToMarkdownOneLine(this.obsidianTask);ee.debug(`markdownTask: ${n}`),this.updateTaskToFile(n)}isValidStatus(e,r){return{descriptionStatus:["editing","done"],projectStatus:["selecting","done"],dueStatus:["editing","done"]}[e].includes(r)}setTaskCardStatus(e,r){this.isValidStatus(e,r)&&(this.taskCardStatus[e]=r,ee.debug(`successfully set ${e} to ${r}`))}getTaskCardStatus(e){return this.taskCardStatus[e]}async deleteTask(){let e=this.taskMetadata.lineStartInSection+this.taskMetadata.mdSectionInfo.lineStart,r=this.taskMetadata.lineEndsInSection+this.taskMetadata.mdSectionInfo.lineStart;await this.plugin.fileOperator.updateFile(this.taskMetadata.sourcePath,"",e,r)}};var bo=class extends Cg.MarkdownRenderChild{constructor(r,n){super(r.taskItemEl);this.taskSync=r,this.taskSyncManager=new yo(n,r);let i=Ro($e);this.params={mode:i.displaySettings.defaultMode},this.plugin=n}onload(){this.svelteComponent=new Pg({target:this.taskSync.taskItemEl.parentElement,props:{taskSyncManager:this.taskSyncManager,plugin:this.plugin,defaultParams:this.params},anchor:this.taskSync.taskItemEl}),this.taskSync.taskItemEl.style.display="none"}};var _o=class{constructor(e){this.plugin=e,this.taskItemFilter=(r=>n=>Km(n,r))(this.plugin.taskValidator)}getPostProcessor(){return async(r,n)=>{(0,du.htmlToMarkdown)(r.innerHTML).split(`
`).forEach((a,l)=>{ee.debug(`- line ${l}: ${a}`)});let o=await this.constructTaskSync(r,n);for(let a of o)new bo(a,this.plugin).onload()}}async constructTaskSync(e,r){let n=e.children[0];if(!Gm(n))return[];let i=Zm(Array.from(n.children),this.taskItemFilter);if(i.length===0)return[];ee.debug(`taskItemsIndices: ${i}`);let s=r.getSectionInfo(n),o=r.sourcePath,a=await this.plugin.fileOperator.getMarkdownBetweenLines(o,s.lineStart,s.lineEnd+1),l=i.map(d=>Xx(n,d,a));return i.map((d,c)=>{let f=n.children[d],h=l[c],p=l[c]+1;return{obsidianTask:this.plugin.taskParser.parseTaskEl(f),taskCardStatus:{descriptionStatus:"done",projectStatus:"done",dueStatus:"done"},markdownTask:null,taskItemEl:f,taskMetadata:{sourcePath:o,mdSectionInfo:s,lineStartInSection:h,lineEndsInSection:p}}})}};function Xx(t,e,r){let n=0,i=r.split(`
`),s=0;ee.debug(`originalLines: ${JSON.stringify(i)}`);for(let o=0;o<e;o++){let l=(0,du.htmlToMarkdown)(t.children[o].innerHTML).split(`
`).filter(u=>u.trim()!=="");for(n+=l.length,s+=l.length;i.length>s&&i[s].trim()==="";)n++,s++}return ee.debug(`Final line number: ${n}`),n}var wo=class{constructor(e,r){this.plugin=e,this.app=r}async getFileContent(e){let r=this.app.vault.getAbstractFileByPath(e);return await this.app.vault.read(r)}async getFileLines(e){return(await this.getFileContent(e)).split(`
`)}async getMarkdownBetweenLines(e,r,n){return(await this.getFileLines(e)).slice(r,n).join(`
`)}async updateFile(e,r,n,i){let s=await this.app.vault.getAbstractFileByPath(e),a=[...await this.getFileLines(e)];a.splice(n,i-n,r),await this.app.vault.modify(s,a.join(`
`))}};var vo=class{constructor(e){e.subscribe(r=>{this.indicatorTag=r.parsingSettings.indicatorTag})}taskToMarkdown(e){let r=`- [${e.completed?"x":" "}] ${e.content} #${this.indicatorTag}
`;for(let n in e){if(n==="completed"||n==="content")continue;let i=e[n];i===void 0&&(i=null),i=JSON.stringify(i);let s=Dn(n);r+=`<span class="${s}" style="display:none;">${i}</span>
`}return r}taskToMarkdownOneLine(e){return this.taskToMarkdown(e).replace(/\n/g,"")}};var To=class{constructor(e){this.plugin=e}async monitorFile(e){let r=await this.getLinesFromFile(e),n=this.updateTasksInLines(r);await this.updateFileWithNewLines(e,n)}async getLinesFromFile(e){return await this.plugin.fileOperator.getFileLines(e.path)}updateTasksInLines(e){return e.map((r,n)=>this.updateTaskInLine(r,n))}updateTaskInLine(e,r){if(this.plugin.taskValidator.isValidUnformattedTaskMarkdown(e)){let n=this.plugin.taskParser.parseTaskMarkdown(e);return this.plugin.taskFormatter.taskToMarkdownOneLine(n)}return e}async updateFileWithNewLines(e,r){await this.plugin.fileOperator.updateFile(e.path,r.join(`
`),0,r.length)}};var So=class extends Ag.Plugin{constructor(r,n){super(r,n);$e.subscribe(i=>{ee.info("Settings updated",i),this.settings=i}),this.projectModule=new Xs,this.taskParser=new lo($e,this.projectModule),this.taskFormatter=new vo($e),this.taskValidator=new zr($e),this.taskCardRenderManager=new _o(this),this.fileOperator=new wo(this,this.app),this.taskMonitor=new To(this)}async loadSettings(){let r=await this.loadData();$e.update(n=>({...n,...r||{}}))}async writeSettings(r){$e.update(n=>(r(n),n)),await this.saveData(this.settings)}async onload(){await this.loadSettings(),this.projectModule.updateProjects(this.settings.userMetadata.projects),this.addSettingTab(new Si(this.app,this)),this.registerMarkdownPostProcessor(this.taskCardRenderManager.getPostProcessor()),this.registerEditorSuggest(new Ln(this.app)),this.registerEvent(this.app.workspace.on("layout-change",()=>{let r=this.app.workspace.getActiveFile();setTimeout(()=>{ee.debug(`taskMonitor triggered for file: ${r.path}`),this.taskMonitor.monitorFile(r)},2)})),ee.info("Plugin loaded.")}};
/*! Bundled license information:

safe-buffer/index.js:
  (*! safe-buffer. MIT License. Feross Aboukhadijeh <https://feross.org/opensource> *)
*/
